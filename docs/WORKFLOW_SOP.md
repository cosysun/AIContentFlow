# AIContentFlow 工作流标准操作流程 (SOP)

> **重要提示**：本文档是为AI Agent设计的详细操作手册，确保工作流的一致性和可复现性。

---

## 📋 目录

1. [热点监控工作流](#1-热点监控工作流)
2. [内容创作工作流](#2-内容创作工作流)
3. [审校与优化工作流](#3-审校与优化工作流)
4. [标题创作工作流](#4-标题创作工作流)
5. [配图设计工作流](#5-配图设计工作流)
6. [发布推广工作流](#6-发布推广工作流)

---

## 1. 热点监控工作流

### 🎯 目标
每天自动采集AI行业热点，生成Top 5推荐选题，供用户选择创作主题。

### ⏰ 触发条件
- **定时触发**：每天07:00自动执行（通过cron任务）
- **手动触发**：用户明确要求"执行AIContentFlow热点监控任务"

### 📝 执行步骤

#### Step 1: 执行监控脚本
```bash
cd /data/workspace/AIContentFlow/monitor
python3 aicontentflow_monitor.py
```

**预期结果**：
- 脚本成功执行，采集V2EX、掘金、GitHub Trending等平台数据
- 生成报告文件：`/data/workspace/AIContentFlow/outputs/topic_monitor_report.md`

**异常处理**：
- 如果脚本报错，检查环境变量（BRAVE_API_KEY）
- 如果网络超时，等待5分钟后重试
- 如果失败2次，使用notify通知用户："❌ 热点监控失败，请手动检查"

#### Step 2: 读取并解析报告
```bash
read_file /data/workspace/AIContentFlow/outputs/topic_monitor_report.md
```

**提取信息**：
- 找到 `📋 今日推荐选题 (Top 5)` 章节
- 提取5个选题，每个包含：
  - 编号（1-5）
  - 标题
  - 一句话描述
  - 热度指标
  - 推荐内容线

**格式化输出**：
```markdown
## 📊 今日热点 Top 5

1. **选题标题1**
   - 描述：xxx
   - 热度：⭐⭐⭐⭐⭐
   - 内容线：xxx

（依次列出2-5）
```

#### Step 3: 推送给用户
使用`notify`工具推送：

```json
{
  "title": "📊 AIContentFlow热点监控完成 - 请选择创作主题",
  "message": "[Top 5选题列表]\n\n💡 **下一步操作**：\n- 回复选题编号（1-5）立即开始创作\n- 回复'等明天'跳过今日创作\n- 回复'重新监控'刷新选题"
}
```

#### Step 4: 等待用户确认
**重要**：必须等待用户回复，不要自动进入下一步骤。

---

## 2. 内容创作工作流

### 🎯 目标
根据用户选择的选题，通过八段式流程创作高质量AI内容（3000-10000字）。

### ⏰ 触发条件
- 用户回复选题编号（1-5）
- 用户直接提供创作主题

### 📝 八段式创作流程

#### 阶段1：确认选题和创作目标

**操作**：
1. 提取用户选择的选题信息
2. 保存到临时文件：`/data/workspace/.daily_topic_choice.txt`
3. 向用户确认：

```markdown
## ✅ 选题已确认

**主题**：[选题标题]
**类型**：[科普/工具/编程/创业]
**目标字数**：[根据类型自动判断]
- 科普类：3000-5000字
- 工具类：4000-6000字
- 编程类：6000-8000字
- 创业类：8000-10000字

**目标读者**：AI从业者、开发者、技术爱好者

请回复"确认"开始创作，或提出修改建议。
```

**等待用户确认**，如回复"确认"，进入阶段2。

---

#### 阶段2：深度调研

**目标**：收集≥15个高质量信息源

**执行步骤**：

1. **使用检索工具**：
```bash
cd /data/workspace/AIContentFlow/writer
python3 aicontentflow_search.py --query "[选题关键词]" --sources 15
```

2. **补充手动检索**：
   - 使用`web_search`工具检索最新信息
   - 如果是GitHub项目，使用`terminal`获取仓库信息
   - 如果需要技术文档，使用`browser`工具访问官网

3. **信息源分类**：
   - 官方文档：权威性最高
   - 技术博客：实践经验
   - GitHub仓库：代码示例
   - 社区讨论：用户反馈
   - 新闻报道：行业动态

4. **输出检索报告**：
```markdown
## 📚 调研资料清单

### 官方资源（3-5个）
1. [资源标题](链接) - 摘要

### 技术博客（5-8个）
...

### 代码示例（2-3个）
...

### 社区讨论（2-4个）
...

**总计**：15+ 信息源
```

5. **向用户确认**：
```
✅ 调研完成，已收集15个信息源。
回复"继续"进入创作阶段，或"补充调研"添加更多资料。
```

---

#### 阶段3：内容创作

**核心原则**：
- 深度 > 广度（宁可少而精，不可多而浅）
- 实用 > 理论（提供可操作的建议）
- 原创 > 编译（基于事实的原创观点）

**结构模板**（根据类型调整）：

##### 科普类文章结构：
```markdown
# [吸引人的标题]

## 引子（300-500字）
- 用生动的案例或问题引入
- 说明为什么这个话题重要

## 核心概念（1000-1500字）
- 是什么？本质解释
- 为什么？背景和原理
- 怎么样？特点和优势

## 技术实现（1000-1500字）
- 底层机制
- 关键技术点
- 与传统方法对比

## 实际应用（800-1200字）
- 典型应用场景
- 成功案例分析
- 局限性和注意事项

## 未来展望（300-500字）
- 发展趋势
- 潜在影响

## 总结（200-300字）
- 核心要点回顾
- 行动建议
```

##### 工具类文章结构：
```markdown
# [工具名称] - [一句话定位]

## 快速开始（500-800字）
- 10秒了解这个工具
- 适合谁用？解决什么问题？
- 核心特性（3-5个）

## 安装配置（800-1200字）
- 环境要求
- 安装步骤（配截图/代码）
- 基础配置

## 功能详解（2000-3000字）
- 核心功能1：说明+示例
- 核心功能2：说明+示例
- ...
- 高级技巧

## 最佳实践（800-1200字）
- 推荐工作流
- 常见问题FAQ
- 性能优化建议

## 对比评测（500-800字）
- 与竞品对比
- 优势和不足
- 选择建议

## 总结（200-300字）
```

**创作要求**：

1. **语言风格**：
   - 专业但不晦涩
   - 使用类比和比喻
   - 避免AI腔（见"降AI味"标准）

2. **内容质量**：
   - 每个观点必须有事实支撑
   - 引用数据注明出处
   - 代码示例必须可运行

3. **排版规范**：
   - 使用Markdown语法
   - 中英文之间加空格
   - 适当使用emoji（不超过每300字1个）
   - 关键词加粗或斜体

4. **配图占位**：
   在需要配图的位置添加：
   ```markdown
   ![图片说明](./images/placeholder_N.svg)
   <!-- 配图需求：描述这里需要什么样的图 -->
   ```

**输出**：
```markdown
# [文章标题]

[完整文章内容，3000-10000字]

---
📊 **字数统计**：xxx字
⏱️ **预计阅读时长**：xx分钟
🏷️ **标签**：标签1, 标签2, 标签3
```

**向用户确认**：
```
✅ 初稿已完成（xxx字），现在进入三遍审校流程。
回复"继续"开始审校，或"重写某部分"进行调整。
```

---

#### 阶段4：第一遍审校 - 事实核查

**目标**：确保所有事实准确无误

**检查清单**：

1. **数据准确性**：
   - [ ] 所有数字（版本号、时间、统计数据）已验证
   - [ ] GitHub Stars/Forks数据最新
   - [ ] 引用的论文/报告链接有效

2. **技术准确性**：
   - [ ] API调用示例代码已测试
   - [ ] 配置参数说明正确
   - [ ] 技术原理解释准确

3. **时效性**：
   - [ ] "最新"、"目前"等表述符合当前时间（2026-02-24）
   - [ ] 已标注信息的时效性（如"截至2026年2月"）

**输出**：
```markdown
## 📋 第一遍审校报告

### ✅ 已验证的事实（列出关键数据）
1. [事实1] - 来源：[链接]
2. ...

### ⚠️ 需要修正的内容
1. 原文：[错误内容]
   修正：[正确内容]
   依据：[来源]

### 🔄 已完成修改
[修正后的文章片段]
```

---

#### 阶段5：第二遍审校 - 降AI味

**目标**：让文章读起来像人写的，不是AI生成的

**AI腔特征识别**：

❌ **要避免的表达**：
- "在当今xxx的时代"
- "值得注意的是"
- "需要指出的是"
- "毫无疑问"
- "显而易见"
- "众所周知"
- "总而言之"
- 过度使用"然而"、"此外"、"因此"

✅ **人性化表达**：
- 直接说事实，少用过渡词
- 用具体案例代替抽象描述
- 偶尔用口语化表达
- 适当提问与读者互动

**修改示例**：

原文（AI腔）：
```
在当今人工智能快速发展的时代，大语言模型无疑成为了最受关注的技术之一。
值得注意的是，这项技术不仅在学术界引起了广泛讨论，在工业界也得到了大量应用。
```

修改后（人性化）：
```
2023年底ChatGPT爆火之后，大语言模型彻底火了。
不只是研究人员在研究它，各大公司也在抢着把它用到自己的产品里。
```

**审校流程**：
1. 逐段阅读，标记AI腔表达
2. 重写标记的句子
3. 整体阅读，检查语言流畅度

**输出**：
```markdown
## 🎨 第二遍审校报告 - 降AI味

### 修改统计
- 修改句子数：xx处
- 删除过渡词：xx个
- 新增具体案例：xx个

### 典型修改示例
**修改前**：[AI腔表达]
**修改后**：[人性化表达]

### 完整修改版
[降AI味后的文章]
```

---

#### 阶段6：第三遍审校 - 排版润色

**目标**：让文章视觉上舒适，易于阅读

**检查清单**：

1. **Markdown格式**：
   - [ ] 标题层级正确（h1 > h2 > h3）
   - [ ] 代码块有语言标注
   - [ ] 链接格式正确
   - [ ] 列表缩进一致

2. **排版规范**：
   - [ ] 中英文之间有空格
   - [ ] 数字与单位之间有空格（除了%）
   - [ ] 标点符号使用正确（中文全角，英文半角）
   - [ ] 段落长度适中（不超过5行）

3. **视觉优化**：
   - [ ] 关键词加粗
   - [ ] 重要提示用引用块
   - [ ] 适当使用emoji（不过度）
   - [ ] 表格对齐

4. **配图规划**：
   - [ ] 确认需要几张配图
   - [ ] 每张配图的需求描述清晰

**输出**：
```markdown
## ✨ 第三遍审校完成

### 排版优化统计
- 修复格式错误：xx处
- 添加空格：xx处
- 优化段落：xx段
- 规划配图：xx张

### 最终版文章
[完整的、经过三遍审校的文章]

---
**审校完成**！现在进入标题创作阶段。
```

**向用户确认**：
```
✅ 三遍审校完成！文章已达到发布标准。
回复"继续"生成20个标题方案，或"再审一遍某部分"。
```

---

#### 阶段7：标题创作

**目标**：生成20个不同风格的标题供用户选择

**标题创作原则**：
1. 准确传达文章核心内容
2. 吸引目标读者点击
3. 符合平台调性（不同平台可能需要不同标题）

**标题风格分类**（每种风格3-4个）：

1. **直白型**（适合技术平台）
   - 直接说明文章主题
   - 包含关键技术词
   - 例：《BMAD-METHOD：用大模型自动调试代码的新方法》

2. **数字型**（吸引点击）
   - 包含具体数字
   - 突出量化效果
   - 例：《4个AI Agent写代码，调试效率提升300%：BMAD-METHOD深度解析》

3. **对比型**（制造反差）
   - 新旧对比
   - 优劣对比
   - 例：《忘掉传统Debug吧，BMAD-METHOD让AI自己找Bug》

4. **疑问型**（引发好奇）
   - 提出问题
   - 引发思考
   - 例：《AI能自己Debug代码吗？BMAD-METHOD给出了答案》

5. **场景型**（带入感强）
   - 描述具体场景
   - 贴近用户痛点
   - 例：《凌晨3点还在找Bug？试试这个AI自动调试方法》

**输出格式**：
```markdown
## 📝 标题方案（20个）

### 🎯 直白型（技术平台推荐）
1. [标题1]
2. [标题2]
3. [标题3]

### 📊 数字型（吸引点击）
4. [标题4]
5. [标题5]
6. [标题6]
7. [标题7]

### ⚡ 对比型（制造反差）
8. [标题8]
9. [标题9]
10. [标题10]

### ❓ 疑问型（引发好奇）
11. [标题11]
12. [标题12]
13. [标题13]
14. [标题14]

### 🎬 场景型（带入感强）
15. [标题15]
16. [标题16]
17. [标题17]
18. [标题18]

### 🌟 创意型（个性化）
19. [标题19]
20. [标题20]

---
## 💡 推荐选择

**掘金/V2EX**：标题[编号]（原因：xxx）
**微信公众号**：标题[编号]（原因：xxx）
**知乎**：标题[编号]（原因：xxx）
```

**向用户确认**：
```
✅ 20个标题已生成！
请选择你最喜欢的标题编号，或提出修改建议。
```

---

#### 阶段8：最终审阅与暂存

**操作步骤**：

1. **创建暂存目录**：
```bash
mkdir -p /data/workspace/.draft/$(date +%Y-%m-%d)
```

2. **保存所有文件**：
```bash
# 主文章
/data/workspace/.draft/2026-02-24/article.md

# 标题方案
/data/workspace/.draft/2026-02-24/titles.md

# 调研资料
/data/workspace/.draft/2026-02-24/research_notes.md

# 元数据
/data/workspace/.draft/2026-02-24/metadata.json
```

3. **生成元数据文件**（metadata.json）：
```json
{
  "date": "2026-02-24",
  "topic": "选题标题",
  "type": "科普/工具/编程/创业",
  "word_count": 5800,
  "reading_time": "15分钟",
  "tags": ["AI", "开发工具", "自动化"],
  "selected_title": "标题编号",
  "review_status": "已审校",
  "images_needed": 4,
  "publish_platforms": ["掘金", "V2EX", "知乎", "微信公众号"]
}
```

4. **生成发布计划**：
```markdown
## 📢 发布推广计划

### 🎯 目标平台
1. **掘金**
   - 标题：[选定标题]
   - 标签：标签1, 标签2, 标签3
   - 发布时间：工作日 09:00-10:00

2. **V2EX**
   - 标题：[选定标题]
   - 节点：程序员 / 分享创造
   - 发布时间：工作日 10:00-11:00

（依次列出其他平台）

### 📊 推广策略
- 发布后1小时内回复评论
- 准备3-5个常见问题回答
- 在相关社群分享（不spam）

### ✅ 发布检查清单
- [ ] 文章已终审无误
- [ ] 配图已制作完成
- [ ] 标题已确定
- [ ] 平台账号已登录
- [ ] 发布时间已预约
```

5. **最终通知用户**：
```markdown
🎉 **内容创作全流程完成！**

📄 **文章信息**
- 标题：[选定标题]
- 字数：xxx字
- 配图：x张
- 暂存位置：`/data/workspace/.draft/2026-02-24/`

📋 **下一步操作**
1. 制作配图（回复"制作配图"）
2. 发布到各平台（回复"执行发布"）
3. 归档到AI-Content-Archive（回复"归档"）

**全部文件已保存，可随时修改或发布！** ✨
```

---

## 3. 审校与优化工作流

（上面阶段4-6已详细说明，这里可以独立触发）

### ⏰ 触发条件
- 用户提供已有文章要求审校
- 创作流程中的阶段4-6

### 📝 执行步骤
参见"内容创作工作流"的阶段4-6。

---

## 4. 标题创作工作流

（上面阶段7已详细说明）

### ⏰ 触发条件
- 文章完成后自动触发
- 用户单独要求生成标题

### 📝 执行步骤
参见"内容创作工作流"的阶段7。

---

## 5. 配图设计工作流

### 🎯 目标
为文章制作专业的SVG配图（赛博朋克科技风）

### ⏰ 触发条件
- 用户回复"制作配图"
- 文章中有配图占位符

### 📝 执行步骤

#### Step 1: 确认配图需求

**读取文章**，提取所有配图占位符：
```markdown
![图1说明](./images/placeholder_1.svg)
<!-- 配图需求：BMAD-METHOD整体架构图 -->
```

**生成配图清单**：
```markdown
## 🎨 配图需求清单

1. **图1：BMAD-METHOD整体架构图**
   - 类型：架构图
   - 元素：4个Agent模块 + 交互流程
   - 风格：赛博朋克科技风

2. **图2：调试流程对比**
   - 类型：对比图
   - 元素：传统方法 vs BMAD方法
   - 风格：赛博朋克科技风

（依次列出）

**总计**：需要制作 x 张配图
```

**向用户确认**：
```
📋 已识别 x 张配图需求，是否全部制作？
回复"全部制作"或指定编号（如"只做1、3"）
```

#### Step 2: 设计配图

**设计原则**：
- **风格**：赛博朋克科技风
- **色彩**：深色背景（#0a0e27）+ 霓虹色彩（蓝#00d9ff、紫#b24bf3、粉#ff006e）
- **格式**：SVG矢量图（可缩放，文件小）
- **尺寸**：1200x675px（16:9比例，适合各平台）

**制作方法**：
使用代码生成SVG（不需要图形软件）

**示例代码**：
```svg
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 675">
  <!-- 背景 -->
  <rect width="1200" height="675" fill="#0a0e27"/>
  
  <!-- 网格 -->
  <defs>
    <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
      <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#1a2456" stroke-width="1"/>
    </pattern>
  </defs>
  <rect width="1200" height="675" fill="url(#grid)"/>
  
  <!-- 主要内容 -->
  <text x="600" y="100" text-anchor="middle" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="#00d9ff">
    BMAD-METHOD
  </text>
  
  <!-- 更多元素... -->
</svg>
```

**保存路径**：
```
/data/workspace/AIContentFlow/outputs/images/
├── figure_1.svg
├── figure_2.svg
└── ...
```

#### Step 3: 更新文章中的图片链接

将占位符替换为实际图片路径：
```markdown
![图1：BMAD-METHOD整体架构图](./images/figure_1.svg)
```

#### Step 4: 通知用户
```
✅ 所有配图已制作完成！
📁 保存位置：`/data/workspace/AIContentFlow/outputs/images/`
📄 文章已更新图片链接

你可以：
1. 查看配图效果（我可以展示SVG代码）
2. 修改某张配图
3. 继续执行发布流程
```

---

## 6. 发布推广工作流

### 🎯 目标
将文章发布到9个平台，并执行推广策略

### ⏰ 触发条件
- 用户回复"执行发布"
- 文章和配图都已完成

### 📝 执行步骤

#### Step 1: 发布前检查

**检查清单**：
```markdown
## ✅ 发布前检查清单

### 内容完整性
- [ ] 文章已三遍审校
- [ ] 标题已确定
- [ ] 配图已制作
- [ ] 链接已测试
- [ ] 代码已验证

### 平台准备
- [ ] 目标平台列表已确认
- [ ] 每个平台的标题/标签已定制
- [ ] 发布时间已规划

### 备份
- [ ] 文章已暂存到 .draft/
- [ ] 已创建发布记录文件
```

**向用户确认**：
```
📋 发布前检查完成，准备发布到以下平台：
1. 掘金
2. V2EX
3. 知乎
4. 微信公众号
5. CSDN
6. 博客园
7. 开发者头条
8. Medium
9. Dev.to

回复"确认发布"开始，或"修改平台列表"调整。
```

#### Step 2: 生成平台适配版本

**不同平台的差异**：

| 平台 | 标题风格 | 字数限制 | 特殊要求 |
|------|----------|----------|----------|
| 掘金 | 技术直白型 | 无 | 需要选择标签 |
| V2EX | 简洁型 | 120字 | 需要选择节点 |
| 知乎 | 疑问/数字型 | 无 | 适合长文 |
| 微信公众号 | 场景/情感型 | 无 | 需要排版优化 |

**生成适配版本**：
```markdown
## 📱 平台适配版本

### 掘金
**标题**：[技术直白型标题]
**标签**：标签1, 标签2, 标签3
**内容**：[原文]

### V2EX
**标题**：[简洁型标题，≤120字]
**节点**：程序员 / 分享创造
**内容**：[原文]

（依次列出其他平台）
```

#### Step 3: 执行发布

**⚠️ 重要提示**：
由于AnyDev开发机限制，无法直接通过浏览器登录各平台账号发布。

**可行方案**：

**方案A：生成发布包**（推荐）
1. 将所有平台的文章内容打包
2. 生成发布指南文档
3. 用户手动复制到各平台发布

```bash
# 创建发布包
mkdir -p /data/workspace/AIContentFlow/outputs/publish_$(date +%Y%m%d)

# 生成各平台文件
/data/workspace/AIContentFlow/outputs/publish_20260224/
├── juejin.md          # 掘金版本
├── v2ex.md            # V2EX版本
├── zhihu.md           # 知乎版本
├── wechat.md          # 微信公众号版本
├── images/            # 配图文件夹
└── PUBLISH_GUIDE.md   # 发布指南
```

**PUBLISH_GUIDE.md内容**：
```markdown
# 发布指南

## 📋 发布顺序建议

1. **掘金**（09:00-10:00）
2. **V2EX**（10:00-11:00）
3. **知乎**（11:00-12:00）
4. **微信公众号**（14:00-15:00）
（依次列出）

## 📝 逐平台发布步骤

### 1. 掘金
1. 打开 https://juejin.cn/editor/drafts/new
2. 复制 `juejin.md` 的内容粘贴
3. 上传 `images/` 文件夹中的配图
4. 选择标签：[标签列表]
5. 设置发布时间或立即发布

### 2. V2EX
（详细步骤）

（依次列出其他平台）

## ⚠️ 注意事项
- 发布后1小时内及时回复评论
- 观察数据反馈，调整后续发布策略
- 记录发布链接到 PUBLISH_LOG.md
```

**方案B：使用发布API**（如果平台提供）
某些平台提供API，可以通过脚本自动发布：
```python
# publisher/auto_publish.py
# （如果平台支持API发布）
```

#### Step 4: 记录发布日志

**创建发布日志**（PUBLISH_LOG.md）：
```markdown
# 发布日志 - 2026-02-24

## 📄 文章信息
- **标题**：[选定标题]
- **字数**：xxx字
- **发布时间**：2026-02-24

## 🌐 发布平台

| 平台 | 发布时间 | 文章链接 | 数据反馈 |
|------|----------|----------|----------|
| 掘金 | 2026-02-24 09:30 | [链接] | 浏览xxx / 点赞xx |
| V2EX | 2026-02-24 10:15 | [链接] | 浏览xxx / 点赞xx |
| 知乎 | 2026-02-24 11:00 | [链接] | 浏览xxx / 赞同xx |
（依次列出）

## 💬 互动记录
- 评论数：xx条
- 主要问题：
  1. [问题1] - 已回复
  2. [问题2] - 已回复

## 📊 总结
- 最佳平台：[平台名]（原因：xxx）
- 改进建议：xxx
```

#### Step 5: 归档

**归档到AI-Content-Archive**：
```bash
# 创建归档目录
mkdir -p /data/workspace/AI-Content-Archive/2026/02/24-[文章标题]

# 复制所有文件
cp -r /data/workspace/.draft/2026-02-24/* \
      /data/workspace/AI-Content-Archive/2026/02/24-[文章标题]/

# 添加发布日志
cp /data/workspace/AIContentFlow/outputs/PUBLISH_LOG.md \
   /data/workspace/AI-Content-Archive/2026/02/24-[文章标题]/
```

**更新归档索引**（AI-Content-Archive/README.md）：
```markdown
## 2026年2月

### 2026-02-24: [文章标题]
- **类型**：科普/工具/编程/创业
- **字数**：xxx字
- **平台**：掘金、V2EX、知乎等9个平台
- **数据**：总浏览xxx / 总点赞xx
- **链接**：[./2026/02/24-文章标题/](./2026/02/24-文章标题/)
```

#### Step 6: 最终通知

```markdown
🎉 **发布流程全部完成！**

## 📊 发布摘要
- ✅ 文章已发布到 9 个平台
- ✅ 发布包已生成：`/data/workspace/AIContentFlow/outputs/publish_20260224/`
- ✅ 发布日志已记录：`PUBLISH_LOG.md`
- ✅ 已归档到：`/data/workspace/AI-Content-Archive/2026/02/24-[文章标题]/`

## 📋 后续任务
- [ ] 1小时后检查各平台反馈
- [ ] 回复评论和私信
- [ ] 24小时后更新数据到PUBLISH_LOG.md
- [ ] 7天后进行数据复盘

**发布包位置**：`/data/workspace/AIContentFlow/outputs/publish_20260224/`
请查看`PUBLISH_GUIDE.md`了解详细发布步骤。

---
**下次见！明天07:00继续监控热点！** 🚀
```

---

## 🔄 异常处理

### 常见异常及应对策略

#### 1. 脚本执行失败
**现象**：`aicontentflow_monitor.py`报错

**检查步骤**：
1. 验证环境变量：`echo $BRAVE_API_KEY`
2. 检查依赖：`pip list | grep requests`
3. 查看详细错误：重新运行脚本并捕获stderr

**解决方案**：
- 如果是API Key问题：检查`.env`文件
- 如果是网络问题：等待5分钟重试
- 如果失败2次：notify通知用户手动处理

#### 2. 用户回复不明确
**现象**：用户回复既不是数字1-5，也不是"等明天"

**应对**：
```
❓ 抱歉，我没理解你的意思。

请：
- 回复 1-5 选择对应的选题
- 回复"等明天"跳过今日创作
- 或者直接告诉我你想创作的主题
```

#### 3. 信息源检索不足
**现象**：检索工具返回<15个信息源

**应对**：
1. 调整检索关键词
2. 使用`web_search`补充
3. 如果实在不足，向用户说明："目前找到了xx个信息源，是否继续？"

#### 4. 配图制作失败
**现象**：SVG代码生成错误或用户不满意

**应对**：
1. 检查SVG语法
2. 询问用户具体不满意的地方
3. 提供修改方案或重新设计

---

## 📌 关键注意事项

### ⚠️ 必须遵守的原则

1. **主动推送**
   - 所有关键节点必须使用`notify`工具主动通知用户
   - 不要假设用户会主动查看工作目录

2. **等待确认**
   - 涉及用户决策的步骤（选择选题、确认标题等）必须等待回复
   - 不要自作主张跳过步骤

3. **保存备份**
   - 每个阶段的输出都要保存到文件
   - 使用`.draft/`目录暂存，最终归档到`AI-Content-Archive/`

4. **事实准确**
   - 所有数据必须有来源
   - 不确定的信息必须标注
   - 引用必须注明出处

5. **工具调用**
   - 优先使用项目内的脚本（如`aicontentflow_monitor.py`）
   - 善用`terminal`、`read_file`、`write_to_file`等工具
   - 关键操作后验证结果

6. **风格一致**
   - 配图风格：赛博朋克科技风
   - 语言风格：专业但不晦涩
   - 排版风格：遵循Markdown规范

---

## 🔗 相关文档

- [决策树和用户交互逻辑](./DECISION_TREE.md)
- [Prompt模板库](./PROMPT_TEMPLATES.md)
- [AI Agent专用指南](./FOR_AI_AGENT.md)
- [示例对话](./EXAMPLE_CONVERSATION.md)

---

**文档版本**：v1.0  
**最后更新**：2026-02-24  
**维护者**：cosysun

---

💡 **提示**：本SOP是活文档，会根据实践不断优化。如有改进建议，请更新此文档。