# AIContentFlow - AI Agent 专用指南

> **目标读者**：新的 OpenClaw (或其他 AI Agent) 实例  
> **用途**：快速理解项目并正确执行工作流

---

## 👋 欢迎！

你好，新的 AI Agent！

这个项目叫 **AIContentFlow**，是一个**AI内容创作自动化工作流系统**。你的任务是帮助用户高效创作高质量的AI行业内容（文章、教程、解析等）。

本文档将帮助你：
1. 快速理解项目结构和目标
2. 掌握核心工作流程
3. 了解隐式规则和约定
4. 避免常见错误

---

## 📚 必读文档（按顺序阅读）

### 1. 本文档（当前）
**用途**：整体概览  
**阅读时间**：5分钟

### 2. [WORKFLOW_SOP.md](./WORKFLOW_SOP.md)
**用途**：详细的工作流执行步骤  
**阅读时间**：20分钟  
**重要性**：⭐⭐⭐⭐⭐（必读）

### 3. [DECISION_TREE.md](./DECISION_TREE.md)
**用途**：用户交互决策逻辑  
**阅读时间**：10分钟  
**重要性**：⭐⭐⭐⭐⭐（必读）

### 4. [PROMPT_TEMPLATES.md](./PROMPT_TEMPLATES.md)
**用途**：标准化Prompt模板  
**阅读时间**：15分钟  
**重要性**：⭐⭐⭐⭐（推荐）

### 5. [EXAMPLE_CONVERSATION.md](./EXAMPLE_CONVERSATION.md)
**用途**：实际对话示例  
**阅读时间**：10分钟  
**重要性**：⭐⭐⭐（有助于理解）

---

## 🎯 项目核心目标

### 最终目标
帮助用户每天高效创作**1篇高质量AI行业内容**（3000-10000字）

### 具体指标
- ✅ 内容准确性：所有事实有据可查
- ✅ 可读性：降AI味，像人写的
- ✅ 专业性：有深度，有洞察
- ✅ 实用性：读者能学到东西
- ✅ 视觉呈现：排版规范，配图专业

---

## 🏗️ 项目结构

```
/data/workspace/AIContentFlow/
├── monitor/                    # 热点监控模块
│   └── aicontentflow_monitor.py  # 主监控脚本
│
├── writer/                     # 内容创作模块
│   └── aicontentflow_search.py   # 信息检索脚本
│
├── scorer/                     # 内容评分模块
│
├── publisher/                  # 发布管理模块
│
├── config/                     # 配置文件
│   ├── config.json            # 主配置
│   └── sources.json           # 数据源配置
│
├── outputs/                    # 输出结果
│   ├── topic_monitor_report.md  # 监控报告
│   └── images/                   # 配图存放
│
├── docs/                       # 文档（你现在读的）
│   ├── FOR_AI_AGENT.md         # 本文档
│   ├── WORKFLOW_SOP.md         # 工作流SOP
│   ├── DECISION_TREE.md        # 决策树
│   ├── PROMPT_TEMPLATES.md     # Prompt模板
│   └── EXAMPLE_CONVERSATION.md # 示例对话
│
├── .env                        # 环境变量（包含API Key）
├── .gitignore                  # Git忽略规则
└── README.md                   # 项目说明
```

### 重要目录说明

#### `/data/workspace/.draft/`
**用途**：暂存创作过程中的文件  
**结构**：
```
.draft/
└── 2026-02-24/          # 按日期组织
    ├── article_draft.md   # 初稿
    ├── article_final.md   # 最终版
    ├── titles.md          # 标题方案
    ├── research_notes.md  # 调研资料
    ├── metadata.json      # 元数据
    └── context.json       # 上下文信息
```

**注意**：`.draft/`是临时目录，最终要归档到`AI-Content-Archive/`

#### `/data/workspace/AI-Content-Archive/`
**用途**：归档已发布的内容  
**结构**：
```
AI-Content-Archive/
└── 2026/
    └── 02/
        └── 24-BMAD-METHOD文章/
            ├── article.md
            ├── images/
            ├── PUBLISH_LOG.md
            └── metadata.json
```

---

## 🔄 核心工作流（快速版）

AIContentFlow有**6大工作流**，最重要的是**热点监控 + 内容创作**：

### 工作流1：热点监控 ⭐⭐⭐⭐⭐
**触发**：每天07:00自动 或 用户说"执行AIContentFlow热点监控任务"  
**步骤**：
1. 运行脚本：`cd /data/workspace/AIContentFlow/monitor && python3 aicontentflow_monitor.py`
2. 读取报告：`/data/workspace/AIContentFlow/outputs/topic_monitor_report.md`
3. 提取Top 5选题
4. **使用`notify`推送给用户**（关键！）
5. **等待用户回复**（不要自动继续）

**用户可能回复**：
- `1-5`：选择选题 → 启动内容创作
- `"等明天"`：跳过 → notify确认
- `"重新监控"`：重新执行脚本

---

### 工作流2：内容创作（八段式）⭐⭐⭐⭐⭐
**触发**：用户选择选题后  
**步骤**：

#### 阶段1：确认选题和创作目标
- 提取选题信息
- 规划字数、结构、目标
- **等待用户确认"确认"**

#### 阶段2：深度调研
- 使用检索工具收集≥15个信息源
- 分类整理（官方/博客/代码/社区）
- 输出调研报告
- **等待用户确认"继续"**

#### 阶段3：内容创作
- 根据类型选择结构模板（科普/工具/编程/创业）
- 创作3000-10000字初稿
- 添加配图占位符
- **等待用户确认"继续"**

#### 阶段4：第一遍审校 - 事实核查
- 验证所有数据、链接、技术细节
- 修正错误，记录依据
- 输出审校报告
- **等待用户确认"继续"**

#### 阶段5：第二遍审校 - 降AI味
- 识别并删除AI腔表达
- 用人性化语言重写
- 输出修改对比
- **等待用户确认"继续"**

#### 阶段6：第三遍审校 - 排版润色
- 修复Markdown格式
- 优化排版（中英文空格、标点等）
- 规划配图位置
- **等待用户确认"继续"**

#### 阶段7：标题创作
- 生成20个不同风格的标题
- 为各平台推荐最佳标题
- **等待用户选择标题编号**

#### 阶段8：最终审阅与暂存
- 保存所有文件到`.draft/日期/`
- 生成元数据和发布计划
- notify通知用户完成

---

### 其他工作流
- **工作流3**：审校与优化（可独立触发）
- **工作流4**：标题创作（可独立触发）
- **工作流5**：配图设计（可独立触发）
- **工作流6**：发布推广（可独立触发）

详见：[WORKFLOW_SOP.md](./WORKFLOW_SOP.md)

---

## ⚠️ 关键注意事项（必须遵守）

### 1. 主动推送 ⭐⭐⭐⭐⭐
**规则**：所有关键节点必须使用`notify`工具主动通知用户

**为什么**：
- 用户不会主动查看工作目录
- 用户可能不在电脑前
- notify通过企业微信推送，用户手机能收到

**何时用notify**：
- 热点监控完成 → 推送Top 5
- 每个创作阶段完成 → 推送进度
- 出现错误 → 推送错误信息
- 最终完成 → 推送完成通知

**示例**：
```python
notify(
    title="📊 热点监控完成",
    message="今日Top 5选题已生成，请回复编号1-5选择创作主题..."
)
```

---

### 2. 等待确认 ⭐⭐⭐⭐⭐
**规则**：涉及用户决策的步骤必须等待回复，不要自作主张

**需要等待的时机**：
- 选择选题（等待1-5或"等明天"）
- 确认创作目标（等待"确认"）
- 每个阶段完成（等待"继续"）
- 选择标题（等待标题编号）
- 制作配图（等待"全部制作"或指定编号）

**错误示例❌**：
```
User: 2
AI: 已选择选题2，现在开始调研...
    调研完成，开始创作...
    创作完成，开始审校...
    （一口气做完所有步骤）
```

**正确示例✅**：
```
User: 2
AI: ✅ 已选择选题2：xxx
    
    [展示创作规划]
    
    请回复"确认"开始创作，或提出修改建议。
    
    （然后等待用户回复）
```

---

### 3. 保存备份 ⭐⭐⭐⭐
**规则**：每个阶段的输出都要保存到文件

**保存位置**：
- 创作中：`/data/workspace/.draft/YYYY-MM-DD/`
- 已发布：`/data/workspace/AI-Content-Archive/YYYY/MM/DD-标题/`

**必须保存的文件**：
- `article_draft.md` - 初稿
- `article_final.md` - 最终版
- `titles.md` - 20个标题方案
- `research_notes.md` - 调研资料
- `metadata.json` - 元数据
- `context.json` - 上下文信息（便于中途恢复）

**为什么**：
- 防止意外中断导致丢失进度
- 用户可以随时查看历史版本
- 便于新AI Agent实例恢复上下文

---

### 4. 事实准确 ⭐⭐⭐⭐⭐
**规则**：所有数据必须有来源，不确定的信息必须标注

**验证方法**：
- GitHub Stars：访问仓库实时查询
- 技术参数：查阅官方文档
- 发布时间：查看GitHub仓库创建日期
- 代码示例：确保可运行

**不确定时**：
- ❌ 错误：猜测或编造数据
- ✅ 正确：标注"根据xxx来源"或"暂无确切数据"

**示例**：
```markdown
❌ 错误：
BMAD-METHOD的调试效率提升了300%。

✅ 正确：
根据项目作者在README中的说明，BMAD-METHOD在特定场景下
可以显著提升调试效率。（注：官方未提供具体量化数据）
```

---

### 5. 工具调用策略 ⭐⭐⭐⭐
**规则**：正确选择和使用工具

#### 优先级：
1. **项目内脚本**：如`aicontentflow_monitor.py`（最高优先级）
2. **terminal**：执行命令、运行脚本
3. **read_file**：读取文件内容
4. **write_to_file**：保存文件
5. **notify**：推送通知（关键节点必用）
6. **web_search**：补充检索
7. **browser**：访问网页（需要时）

#### 何时用什么工具：

**场景1：热点监控**
```python
# Step 1: 执行脚本
terminal("cd /data/workspace/AIContentFlow/monitor && python3 aicontentflow_monitor.py")

# Step 2: 读取报告
read_file("/data/workspace/AIContentFlow/outputs/topic_monitor_report.md")

# Step 3: 推送通知
notify(title="...", message="...")
```

**场景2：查询GitHub数据**
```python
# 使用terminal + curl
terminal("curl -s https://api.github.com/repos/user/repo")
```

**场景3：保存文章**
```python
# 使用write_to_file
write_to_file(
    path="/data/workspace/.draft/2026-02-24/article_final.md",
    content="[完整文章内容]"
)
```

---

### 6. 风格一致 ⭐⭐⭐
**规则**：保持统一的风格标准

#### 配图风格
- **风格名**：赛博朋克科技风
- **色彩**：
  - 背景：深色（#0a0e27）
  - 主色：霓虹蓝（#00d9ff）
  - 辅色：霓虹紫（#b24bf3）、霓虹粉（#ff006e）
- **格式**：SVG矢量图
- **尺寸**：1200x675px（16:9）

#### 语言风格
- **专业但不晦涩**：用简单的话解释复杂概念
- **具体胜于抽象**：多举例，少空谈
- **避免AI腔**：见[WORKFLOW_SOP.md § 阶段5](./WORKFLOW_SOP.md#阶段5第二遍审校---降ai味)

#### 排版风格
- **Markdown规范**：标题层级、代码块标注、链接格式
- **中英文混排**：中英文之间加空格
- **emoji使用**：适当使用（不超过每300字1个）
- **段落长度**：不超过5行

---

## 🚫 常见错误及避免方法

### 错误1：忘记用notify推送 ❌
**现象**：脚本执行完了，但用户不知道

**正确做法✅**：
每个关键节点都用notify：
```python
# 监控完成
notify(title="📊 热点监控完成", message="...")

# 阶段完成
notify(title="✅ 阶段X完成", message="...")

# 出现错误
notify(title="❌ 执行失败", message="...")
```

---

### 错误2：不等待用户确认就继续 ❌
**现象**：用户选择选题后，AI一口气做完所有步骤

**正确做法✅**：
每个阶段结束时明确提示用户：
```markdown
**请回复"确认"开始创作，或提出修改建议。**

（然后停止，等待用户输入）
```

---

### 错误3：数据不验证就使用 ❌
**现象**：文章中写"GitHub 1.2k Stars"，实际是800 Stars

**正确做法✅**：
```python
# 使用terminal实时查询
terminal("curl -s https://api.github.com/repos/user/repo | jq '.stargazers_count'")

# 然后用实际数据
```

---

### 错误4：忘记保存中间文件 ❌
**现象**：用户说"查看初稿"，找不到文件

**正确做法✅**：
每个阶段都保存：
```python
write_to_file(
    path="/data/workspace/.draft/2026-02-24/article_draft.md",
    content="[初稿内容]"
)
```

---

### 错误5：AI腔严重 ❌
**现象**：文章读起来像AI写的，不像人写的

**典型AI腔**：
- "在当今xxx的时代"
- "值得注意的是"
- "毫无疑问"
- "综上所述"

**正确做法✅**：
阶段5专门降AI味，参考[PROMPT_TEMPLATES.md](./PROMPT_TEMPLATES.md#32-阶段5第二遍审校---降ai味)

---

### 错误6：配图风格不统一 ❌
**现象**：有的图是赛博朋克风，有的图是扁平风

**正确做法✅**：
所有配图统一使用赛博朋克风格模板，参考[PROMPT_TEMPLATES.md § 配图设计](./PROMPT_TEMPLATES.md#5-配图设计相关prompt)

---

## 🎓 快速上手指南

### 如果用户说："执行AIContentFlow热点监控任务"

**你应该做**：
1. ✅ 执行监控脚本
2. ✅ 读取报告
3. ✅ 提取Top 5
4. ✅ 用notify推送
5. ✅ 等待用户回复（1-5 或 "等明天"）

**不要做**：
- ❌ 不用notify，只在对话中显示
- ❌ 不等待回复，直接开始创作

---

### 如果用户回复："2"

**你应该做**：
1. ✅ 提取选题2的信息
2. ✅ 保存到临时文件
3. ✅ 展示创作规划
4. ✅ 提示"请回复'确认'开始创作"
5. ✅ 等待用户回复

**不要做**：
- ❌ 直接开始调研和创作

---

### 如果用户回复："确认"

**你应该做**：
1. ✅ 开始阶段2：深度调研
2. ✅ 使用检索工具收集信息
3. ✅ 输出调研报告
4. ✅ 提示"回复'继续'进入阶段3"
5. ✅ 等待用户回复

---

### 如果用户说："查看进度"

**你应该做**：
1. ✅ 读取context.json（如果存在）
2. ✅ 展示当前进度
3. ✅ 列出已完成/进行中/待完成的阶段
4. ✅ 提示下一步操作

**示例输出**：
```markdown
## 📊 当前任务进度

**任务**：内容创作
**选题**：BMAD-METHOD：用大模型自动调试代码

### ✅ 已完成
- [x] 阶段1：确认选题和创作目标
- [x] 阶段2：深度调研

### 🔄 进行中
- [ ] **阶段3：内容创作** ← 当前

### ⏳ 待完成
- [ ] 阶段4：第一遍审校
- [ ] 阶段5：第二遍审校
- [ ] 阶段6：第三遍审校
- [ ] 阶段7：标题创作
- [ ] 阶段8：最终审阅与暂存

**下一步**：完成初稿创作后，回复"继续"进入审校阶段。
```

---

## 🔍 如何恢复中断的任务

### 场景
用户昨天开始创作，做到一半离开了，今天回来继续。

### 你应该做

#### Step 1: 检测未完成任务
```python
# 检查.draft/目录下是否有未完成任务
list_dir("/data/workspace/.draft/")

# 查找最近的日期目录
# 读取context.json
read_file("/data/workspace/.draft/2026-02-24/context.json")
```

#### Step 2: 提示用户
```markdown
👋 **欢迎回来！**

检测到未完成的任务：

**任务**：内容创作
**选题**：BMAD-METHOD：用大模型自动调试代码
**当前进度**：阶段3 - 内容创作
**上次活动**：2026-02-24 15:30

**是否继续？**
- 回复"继续"从上次进度继续
- 回复"重新开始"放弃当前进度，开始新任务
- 回复"查看详情"了解更多
```

#### Step 3: 根据用户选择
- 用户回复"继续" → 读取context.json，从当前阶段继续
- 用户回复"重新开始" → 备份旧任务到`.draft/incomplete_日期/`，开始新任务
- 用户回复"查看详情" → 展示详细进度和已完成的工作

---

## 📖 实践建议

### 1. 先读文档，再动手
**顺序**：
1. 读完本文档（5分钟）
2. 读完WORKFLOW_SOP.md（20分钟）
3. 读完DECISION_TREE.md（10分钟）
4. 读EXAMPLE_CONVERSATION.md（10分钟）
5. 然后开始执行任务

**为什么**：
理解了整体流程和规则，执行起来会更准确高效。

---

### 2. 遇到不确定的情况，问用户
**不要**：猜测或假设用户意图  
**而是**：明确询问

**示例**：
```markdown
💡 你提到"写一篇关于xxx的文章"

我理解你想创作关于：**[你的理解]**

**建议设定**：
- 类型：科普/工具/编程/创业
- 字数：xxxx-xxxx

请确认或提供更多细节。
```

---

### 3. 善用notify
notify是你和用户沟通的主要方式（除了对话）。

**何时用**：
- ✅ 关键节点完成
- ✅ 需要用户决策
- ✅ 出现错误
- ✅ 任务完成

**何时不用**：
- ❌ 正常的对话回复（用文字回复）
- ❌ 中间步骤的进度更新（除非特别重要）

---

### 4. 保持上下文
创作是一个长时间的过程（可能跨多天），保持上下文很重要。

**方法**：
- 每个阶段结束时保存`context.json`
- 包含当前阶段、已完成步骤、用户选择等
- 用户回来时读取`context.json`恢复

---

### 5. 注意AnyDev开发机限制
你运行在AnyDev开发机上，有一些限制：

**无法做的事情**：
- ❌ 直接访问需要鉴权的办公网web系统（如km.woa.com）
- ❌ 访问用户本地电脑的文件
- ❌ 使用headed浏览器（有UI的浏览器操作）

**可以做的事情**：
- ✅ 运行Python脚本
- ✅ 使用terminal命令
- ✅ 访问公网（GitHub、搜索引擎等）
- ✅ 使用MCP/Skill（如果有）

**遇到限制时**：
明确告诉用户原因，提供替代方案。

---

## ❓ FAQ

### Q1: 用户说"执行AIContentFlow"，但没说具体要做什么？
**A**: 默认理解为"执行AIContentFlow热点监控任务"，然后执行监控流程。

---

### Q2: 用户中途改变主意，想写别的主题？
**A**: 
1. 保存当前进度到`.draft/incomplete_日期/`
2. 询问用户："是否放弃当前任务？已完成的内容会保存到xxx"
3. 用户确认后，开始新任务

---

### Q3: 用户说"跳过审校"？
**A**:
1. 不推荐，先告诉用户跳过审校的风险
2. 如果用户坚持，要求二次确认："确认跳过审校？"
3. 用户确认后才跳过

---

### Q4: 脚本执行失败了？
**A**:
1. 查看错误信息
2. 检查环境变量（如BRAVE_API_KEY）
3. 尝试重试（最多2次）
4. 如果仍失败，notify通知用户："执行失败，请手动检查"

---

### Q5: 用户问"AIContentFlow能做什么？"
**A**:
展示项目能力：
```markdown
## 🚀 AIContentFlow 能力清单

### 1. 热点监控
每天自动采集AI行业热点，生成Top 5推荐选题

### 2. 内容创作
通过八段式流程创作高质量文章（3000-10000字）：
- 深度调研（≥15个信息源）
- 三遍审校（事实核查、降AI味、排版润色）
- 生成20个标题方案

### 3. 配图设计
制作专业的赛博朋克风格配图（SVG格式）

### 4. 发布推广
生成9个平台的发布包和发布指南

### 5. 内容归档
自动归档到AI-Content-Archive，便于管理

---
**告诉我你想做什么，我来帮你！**
```

---

## 🎯 最后的建议

### 给新AI Agent的3个建议

1. **慢即是快**
   - 不要急着一口气做完所有步骤
   - 每个阶段结束后等待用户确认
   - 这样才能确保质量和用户满意度

2. **多沟通**
   - 不确定时问用户
   - 关键节点notify用户
   - 让用户了解你在做什么

3. **保存一切**
   - 所有中间结果都保存到文件
   - 便于用户查看和恢复
   - 也便于你自己调试

---

## 🔗 相关资源

### 项目文档
- [WORKFLOW_SOP.md](./WORKFLOW_SOP.md) - 工作流详细步骤
- [DECISION_TREE.md](./DECISION_TREE.md) - 决策逻辑
- [PROMPT_TEMPLATES.md](./PROMPT_TEMPLATES.md) - Prompt模板
- [EXAMPLE_CONVERSATION.md](./EXAMPLE_CONVERSATION.md) - 示例对话

### GitHub仓库
https://github.com/cosysun/AIContentFlow

### 用户信息
- **用户名**：cosysun
- **工作目录**：`/data/workspace/`
- **时区**：东八区（北京时间）

---

## ✅ 准备好了吗？

如果你已经读完本文档，建议：

1. **立即行动**：
   - [ ] 读完WORKFLOW_SOP.md
   - [ ] 读完DECISION_TREE.md
   - [ ] 浏览PROMPT_TEMPLATES.md
   - [ ] 看一遍EXAMPLE_CONVERSATION.md

2. **开始第一个任务**：
   - 等待用户说"执行AIContentFlow热点监控任务"
   - 按SOP执行
   - 记住：每个关键节点用notify，每个阶段等待确认

3. **遇到问题**：
   - 回来重新看文档
   - 或者直接问用户

---

**祝你顺利！让我们一起创作高质量的AI内容吧！** 🚀

---

**文档版本**：v1.0  
**最后更新**：2026-02-24  
**维护者**：cosysun