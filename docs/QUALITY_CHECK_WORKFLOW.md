# AIContentFlow 全方位质检工作流

> **重要说明**：本文档定义了文章发布前的全方位质检流程，确保内容质量达到A级标准。

---

## 📋 目录

1. [质检概述](#1-质检概述)
2. [质检触发时机](#2-质检触发时机)
3. [十维度质检标准](#3-十维度质检标准)
4. [质检执行流程](#4-质检执行流程)
5. [质检报告模板](#5-质检报告模板)
6. [问题分级与处理](#6-问题分级与处理)

---

## 1. 质检概述

### 🎯 质检目标

确保每篇文章在发布前达到以下标准：
- **技术准确性**：所有事实、数据、代码无误
- **内容质量**：逻辑清晰、深度充分、实用性强
- **语言风格**：专业但易懂、无AI腔
- **格式规范**：Markdown语法正确、排版美观
- **传播价值**：标题吸引、SEO友好

### 📊 评分体系

| 维度 | 权重 | 及格线 | 优秀线 |
|------|------|--------|--------|
| 技术准确性 | 15% | 8分 | 9分 |
| 逻辑连贯性 | 10% | 8分 | 9分 |
| 内容完整性 | 10% | 7分 | 9分 |
| 代码质量 | 10% | 8分 | 9分 |
| 可读性 | 10% | 8分 | 9分 |
| 实用性 | 10% | 7分 | 9分 |
| 格式规范 | 10% | 8分 | 9分 |
| 降AI味处理 | 10% | 8分 | 9分 |
| SEO优化 | 10% | 7分 | 8分 |
| 创新性 | 5% | 7分 | 8分 |

**总分计算**：加权平均
- **A级（可发布）**：≥90分
- **B级（需优化）**：80-89分
- **C级（需重写）**：70-79分
- **D级（不合格）**：<70分

---

## 2. 质检触发时机

### ⏰ 自动触发

在以下节点**自动执行质检**：

1. **阶段8（最终审阅）之后**
   - 三遍审校完成
   - 标题已生成
   - 准备发布前

2. **用户手动请求**
   - 用户说"质检"、"检查质量"、"评估文章"
   - 用户说"全方位质检"

### 📝 手动触发

用户可以在任何阶段请求质检：
```
"帮我质检一下这篇文章"
"全方位评估文章质量"
"检查一下有没有问题"
```

---

## 3. 十维度质检标准

### 维度1：技术准确性 (10分)

**检查项**：

#### 1.1 数据准确性
- [ ] 版本号正确（如"Python 3.11"）
- [ ] 统计数据最新（如"GitHub 10K Stars"）
- [ ] 时间信息准确（如"2026年2月"）
- [ ] 引用来源可验证

**扣分规则**：
- 1个错误数据：-2分
- 1个过时数据（>6个月）：-1分
- 1个无来源的关键数据：-1分

#### 1.2 技术描述准确性
- [ ] API调用示例正确
- [ ] 配置参数说明准确
- [ ] 技术原理解释无误
- [ ] 概念定义权威

**扣分规则**：
- 1个技术错误：-2分
- 1个模糊描述：-0.5分

#### 1.3 代码可执行性
- [ ] 所有代码示例可运行
- [ ] 导入语句完整
- [ ] 依赖版本明确

**扣分规则**：
- 1个不可运行的代码：-3分
- 缺少依赖说明：-1分

**满分标准**：
- 所有数据已验证并注明来源
- 技术描述准确无误
- 代码示例全部可执行

---

### 维度2：逻辑连贯性 (10分)

**检查项**：

#### 2.1 章节结构
- [ ] 标题层级正确（h1 > h2 > h3）
- [ ] 章节顺序合理（引入→正文→总结）
- [ ] 无突兀跳跃

**扣分规则**：
- 章节顺序混乱：-2分
- 标题层级错误：-1分

#### 2.2 论证逻辑
- [ ] 观点有事实支撑
- [ ] 因果关系清晰
- [ ] 结论有依据

**扣分规则**：
- 1个无依据的结论：-2分
- 1处逻辑跳跃：-1分

#### 2.3 上下文衔接
- [ ] 段落之间过渡自然
- [ ] 前后呼应
- [ ] 无重复内容

**扣分规则**：
- 明显重复：-1分
- 衔接生硬：-0.5分

**满分标准**：
- 从Why→What→How完整递进
- 所有观点有充分论证
- 阅读流畅无卡顿

---

### 维度3：内容完整性 (10分)

**检查项**：

#### 3.1 核心内容覆盖
- [ ] 标题承诺的内容已交付
- [ ] 关键概念已解释
- [ ] 典型场景已覆盖

**扣分规则**：
- 标题承诺未兑现：-3分
- 缺少关键概念：-2分
- 场景覆盖不足：-1分

#### 3.2 深度与广度
- [ ] 至少3层深度（是什么→为什么→怎么做）
- [ ] 不只是罗列，有深入分析
- [ ] 提供可操作建议

**扣分规则**：
- 只有表面描述：-2分
- 缺少实操指导：-1分

#### 3.3 边界说明
- [ ] 适用场景清晰
- [ ] 局限性已说明
- [ ] 对比分析充分

**扣分规则**：
- 未说明局限性：-1分
- 缺少对比：-0.5分

**满分标准**：
- 内容完整覆盖主题
- 深度达到3层以上
- 提供完整的实操指南

---

### 维度4：代码质量 (10分)

**检查项**：

#### 4.1 代码规范性
- [ ] 命名规范（snake_case/PascalCase）
- [ ] 缩进统一（4空格）
- [ ] 有type hints（Python）

**扣分规则**：
- 命名不规范：-1分
- 缩进混乱：-1分
- 缺少类型注解：-0.5分

#### 4.2 代码完整性
- [ ] 导入语句完整
- [ ] 包含错误处理
- [ ] 有必要的注释

**扣分规则**：
- 缺少import：-2分
- 无错误处理：-1分
- 关键逻辑无注释：-0.5分

#### 4.3 代码实用性
- [ ] 可直接复制使用
- [ ] 有完整示例
- [ ] 复杂度适中

**扣分规则**：
- 代码过于简化：-1分
- 缺少使用示例：-1分

**满分标准**：
- 代码符合PEP 8等规范
- 包含完整的导入、错误处理、注释
- 可直接用于生产环境

---

### 维度5：可读性 (10分)

**检查项**：

#### 5.1 语言通俗性
- [ ] 无生僻词
- [ ] 有恰当类比
- [ ] 专业术语有解释

**扣分规则**：
- 1个未解释的术语：-1分
- 缺少类比：-0.5分

#### 5.2 段落结构
- [ ] 段落长度适中（≤5行）
- [ ] 一段一个中心思想
- [ ] 关键信息突出

**扣分规则**：
- 1个超长段落（>8行）：-0.5分
- 段落中心不明确：-0.5分

#### 5.3 视觉辅助
- [ ] 有表格对比
- [ ] 有图表说明
- [ ] 有代码示例

**扣分规则**：
- 纯文字超过500字无视觉元素：-1分

**满分标准**：
- 初学者也能理解80%内容
- 段落简洁清晰
- 视觉元素丰富

---

### 维度6：实用性 (10分)

**检查项**：

#### 6.1 实战案例
- [ ] 有完整案例
- [ ] 案例真实可行
- [ ] 涵盖典型场景

**扣分规则**：
- 无实战案例：-3分
- 案例过于简单：-1分

#### 6.2 可操作性
- [ ] 提供步骤清单
- [ ] 有配置示例
- [ ] 有避坑指南

**扣分规则**：
- 只有理论无实操：-2分
- 缺少配置示例：-1分

#### 6.3 资源链接
- [ ] 提供官方文档链接
- [ ] 提供示例代码仓库
- [ ] 提供延伸阅读

**扣分规则**：
- 无任何外部链接：-1分
- 链接失效：-0.5分/个

**满分标准**：
- 读者读完能立即上手
- 包含完整的实战案例
- 提供丰富的参考资源

---

### 维度7：格式规范 (10分)

**检查项**：

#### 7.1 Markdown语法
- [ ] 标题层级正确
- [ ] 代码块有语言标注
- [ ] 链接格式正确
- [ ] 列表缩进一致

**扣分规则**：
- 1处语法错误：-0.5分
- 代码块无语言标注：-0.5分/个

#### 7.2 排版规范
- [ ] 中英文间有空格
- [ ] 数字与单位间有空格（除%）
- [ ] 标点符号正确（中文全角/英文半角）
- [ ] 段落间有空行

**扣分规则**：
- 5处以上间距错误：-1分
- 标点符号混乱：-1分

#### 7.3 视觉美观
- [ ] emoji使用适度（≤1个/300字）
- [ ] 表格对齐
- [ ] 引用块使用恰当
- [ ] 加粗/斜体突出重点

**扣分规则**：
- emoji过多：-1分
- 表格不对齐：-0.5分

**满分标准**：
- Markdown语法完全正确
- 排版精美专业
- 视觉舒适易读

---

### 维度8：降AI味处理 (10分)

**检查项**：

#### 8.1 避免套话
检测以下表达并扣分：
- [ ] "在当今xxx的时代" (-1分)
- [ ] "随着xxx的发展" (-1分)
- [ ] "值得注意的是" (-0.5分)
- [ ] "需要指出的是" (-0.5分)
- [ ] "毫无疑问" (-0.5分)
- [ ] "显而易见" (-0.5分)
- [ ] "众所周知" (-0.5分)
- [ ] "综上所述" (-0.5分)

**扣分规则**：每出现1次扣对应分数

#### 8.2 过渡词密度
- [ ] "然而"出现≤3次/千字
- [ ] "此外"出现≤2次/千字
- [ ] "因此"出现≤3次/千字

**扣分规则**：
- 过渡词密度过高：-2分

#### 8.3 人性化表达
- [ ] 使用具体案例代替抽象描述
- [ ] 偶尔使用口语化表达
- [ ] 适当与读者互动（提问）

**加分项**：
- 5个以上生动案例：+1分
- 口语化自然流畅：+1分

**满分标准**：
- 零套话
- 过渡词使用克制
- 读起来像人写的

---

### 维度9：SEO优化 (10分)

**检查项**：

#### 9.1 关键词布局
- [ ] 核心关键词在标题中
- [ ] 关键词在前3段出现
- [ ] 关键词密度2-5%
- [ ] 有LSI关键词（相关词）

**扣分规则**：
- 标题无核心关键词：-2分
- 关键词密度<1%：-1分
- 关键词密度>8%（堆砌）：-2分

#### 9.2 标题层级
- [ ] H1有且仅有1个
- [ ] H2有3-10个
- [ ] H3合理分布
- [ ] 标题包含关键词

**扣分规则**：
- H1多于1个：-1分
- H2少于3个：-1分
- 标题无关键词：-1分

#### 9.3 Meta信息
- [ ] 文末有标签
- [ ] 有字数统计
- [ ] 有阅读时长
- [ ] 有更新日期

**扣分规则**：
- 缺少Meta信息：-1分

**满分标准**：
- 关键词布局科学
- 标题层级完美
- Meta信息完整

---

### 维度10：创新性 (10分)

**检查项**：

#### 10.1 视角独特
- [ ] 不是简单编译
- [ ] 有原创观点
- [ ] 有独特洞察

**评分标准**：
- 纯编译：5分
- 有个人理解：7分
- 有独特视角：9分
- 开创性观点：10分

#### 10.2 案例新颖
- [ ] 非网上常见案例
- [ ] 有真实项目经验
- [ ] 有创新应用

**评分标准**：
- 常见案例：6分
- 真实项目案例：8分
- 创新应用：10分

#### 10.3 方法论
- [ ] 提出新方法
- [ ] 总结新模式
- [ ] 建立新框架

**评分标准**：
- 无方法论：7分
- 总结已有方法：8分
- 提出新方法：10分

**满分标准**：
- 视角独特，非常见角度
- 案例新颖，有实战经验
- 提出新方法或框架

---

## 4. 质检执行流程

### 🔄 标准质检流程

#### Step 1: 读取文章

```bash
# 读取待质检文章
read_file /data/workspace/.draft/YYYY-MM-DD/article.md
```

**提取信息**：
- 文章字数
- 章节数量
- 代码块数量
- 图片数量
- 链接数量

#### Step 2: 十维度逐项检查

**按照第3节的标准，逐项检查并评分。**

**检查方法**：

1. **技术准确性**：
   - 提取所有数据（版本号、统计数据、时间）
   - 使用`web_search`验证最新信息
   - 标记可疑数据

2. **逻辑连贯性**：
   - 绘制文章结构图
   - 检查论证逻辑
   - 标记跳跃点

3. **内容完整性**：
   - 对比标题与内容
   - 检查承诺兑现情况
   - 评估深度层次

4. **代码质量**：
   - 提取所有代码块
   - 检查语法规范
   - 验证可执行性

5. **可读性**：
   - 统计段落长度
   - 检查专业术语
   - 评估类比使用

6. **实用性**：
   - 检查案例数量
   - 评估可操作性
   - 验证链接有效性

7. **格式规范**：
   - 使用正则检查Markdown语法
   - 统计间距错误
   - 检查排版美观度

8. **降AI味**：
   - 搜索套话关键词
   - 统计过渡词密度
   - 评估语言自然度

9. **SEO优化**：
   - 提取关键词并统计密度
   - 检查标题层级
   - 验证Meta信息

10. **创新性**：
    - 评估视角独特性
    - 评估案例新颖度
    - 检查是否有方法论

#### Step 3: 计算总分

```python
# 计算加权总分
total_score = (
    tech_accuracy * 0.15 +
    logic * 0.10 +
    completeness * 0.10 +
    code_quality * 0.10 +
    readability * 0.10 +
    practicality * 0.10 +
    format * 0.10 +
    no_ai_style * 0.10 +
    seo * 0.10 +
    innovation * 0.05
)

# 评级
if total_score >= 90:
    grade = "A级（可发布）"
elif total_score >= 80:
    grade = "B级（需优化）"
elif total_score >= 70:
    grade = "C级（需重写）"
else:
    grade = "D级（不合格）"
```

#### Step 4: 生成质检报告

**使用第5节的模板生成详细报告。**

#### Step 5: 分级处理

**根据评级执行不同操作**：

##### A级（≥90分）：可发布
```markdown
🎉 **质检通过！文章已达A级标准，可以发布。**

**总分**：{score}/100
**评级**：A级（优秀）

**亮点**：
1. [亮点1]
2. [亮点2]
3. [亮点3]

**小建议**（可选优化）：
1. [建议1]
2. [建议2]

请回复：
- "确认发布" - 进入发布流程
- "继续优化" - 应用小建议后再发布
```

##### B级（80-89分）：需优化
```markdown
⚠️ **质检结果：B级，建议优化后发布。**

**总分**：{score}/100
**评级**：B级（良好）

**主要问题**（必须修复）：
1. 🔴 [问题1] - 扣分影响：-X分
2. 🔴 [问题2] - 扣分影响：-X分

**改进建议**：
1. [具体改进方案1]
2. [具体改进方案2]

请回复：
- "应用建议" - 我帮你修复
- "手动修改" - 自己修改后重新质检
- "忽略发布" - 直接发布（不推荐）
```

##### C级（70-79分）：需重写
```markdown
❌ **质检结果：C级，建议重写部分内容。**

**总分**：{score}/100
**评级**：C级（需重写）

**严重问题**：
1. 🔴 [问题1] - 扣分：-X分
2. 🔴 [问题2] - 扣分：-X分
3. 🟡 [问题3] - 扣分：-X分

**重写建议**：
1. [章节X] 需要重写：[原因]
2. [章节Y] 需要补充：[内容]

请回复：
- "重写[章节]" - 指定重写部分
- "全部重写" - 从阶段3重新开始
- "详细说明" - 查看更多问题细节
```

##### D级（<70分）：不合格
```markdown
🚫 **质检失败：D级，不建议发布。**

**总分**：{score}/100
**评级**：D级（不合格）

**核心问题**：
1. ❌ [致命问题1]
2. ❌ [致命问题2]
3. ❌ [致命问题3]

**建议**：
- 重新选题或调整创作方向
- 补充深度调研
- 从阶段2重新开始

请回复：
- "重新创作" - 从头开始
- "放弃选题" - 选择其他话题
- "详细诊断" - 查看完整问题清单
```

#### Step 6: 保存质检报告

```bash
# 保存到.draft目录
/data/workspace/.draft/YYYY-MM-DD/quality_check_report.md
```

#### Step 7: 通知用户

使用`notify`工具推送质检结果：

```json
{
  "title": "📋 质检完成 - {评级}",
  "message": "{质检结果摘要}\n\n总分：{score}/100\n主要问题：[问题清单]\n\n详细报告：/data/workspace/.draft/YYYY-MM-DD/quality_check_report.md"
}
```

---

## 5. 质检报告模板

```markdown
# 文章质检报告

**文章标题**：{title}
**质检时间**：{date}
**质检标准**：A级技术内容标准

---

## 📊 质检结果总览

| 项目 | 结果 |
|------|------|
| **综合评分** | {score}/100 |
| **评级** | {grade} |
| **质检结论** | {通过/需优化/需重写/不合格} |
| **推荐发布** | {是/否} |

---

## 🎯 十大维度详细评分

### 1. 技术准确性：{score1}/10 {stars}

**检查项统计**：
- 数据点：{count}个
- 已验证：{verified}个
- 错误：{errors}个
- 过时：{outdated}个

**发现问题**：
{如果有问题，列出}

**改进建议**：
{具体建议}

---

### 2. 逻辑连贯性：{score2}/10 {stars}

**章节结构**：
- H1：{count}个
- H2：{count}个
- H3：{count}个

**发现问题**：
{如果有问题，列出}

**改进建议**：
{具体建议}

---

### 3. 内容完整性：{score3}/10 {stars}

**内容统计**：
- 字数：{count}字
- 深度层次：{layers}层
- 案例数量：{count}个

**发现问题**：
{如果有问题，列出}

**改进建议**：
{具体建议}

---

### 4. 代码质量：{score4}/10 {stars}

**代码统计**：
- 代码块：{count}个
- 语言类型：{languages}
- 可执行性：{percentage}%

**发现问题**：
{如果有问题，列出}

**改进建议**：
{具体建议}

---

### 5. 可读性：{score5}/10 {stars}

**可读性指标**：
- 平均段落长度：{lines}行
- 术语解释率：{percentage}%
- 类比使用：{count}个

**发现问题**：
{如果有问题，列出}

**改进建议**：
{具体建议}

---

### 6. 实用性：{score6}/10 {stars}

**实用性指标**：
- 实战案例：{count}个
- 配置示例：{count}个
- 外部链接：{count}个

**发现问题**：
{如果有问题，列出}

**改进建议**：
{具体建议}

---

### 7. 格式规范：{score7}/10 {stars}

**格式检查**：
- Markdown语法错误：{count}处
- 排版问题：{count}处
- 代码块无标注：{count}个

**发现问题**：
{如果有问题，列出}

**改进建议**：
{具体建议}

---

### 8. 降AI味处理：{score8}/10 {stars}

**AI腔检测**：
- 套话出现：{count}次
- 过渡词密度：{density}次/千字
- 语言自然度：{score}分

**发现问题**：
{如果有问题，列出套话}

**改进建议**：
{具体建议}

---

### 9. SEO优化：{score9}/10 {stars}

**SEO指标**：
- 核心关键词：{keyword}
- 关键词密度：{percentage}%
- H2数量：{count}个
- Meta信息：{完整/不完整}

**发现问题**：
{如果有问题，列出}

**改进建议**：
{具体建议}

---

### 10. 创新性：{score10}/10 {stars}

**创新度评估**：
- 视角独特性：{score}/10
- 案例新颖度：{score}/10
- 方法论创新：{score}/10

**亮点**：
{列出创新点}

**建议**：
{如何提升创新性}

---

## ✅ 核心优势（保持）

1. **{优势1标题}**：{详细说明}
2. **{优势2标题}**：{详细说明}
3. **{优势3标题}**：{详细说明}

---

## ⚠️ 改进建议

### 🔴 高优先级（必须修复）

**问题1**：{问题描述}
- **位置**：第X章节
- **扣分影响**：-X分
- **修复方案**：{具体方案}

**问题2**：{问题描述}
- **位置**：第X章节
- **扣分影响**：-X分
- **修复方案**：{具体方案}

---

### 🟡 中优先级（建议修复）

**问题1**：{问题描述}
- **位置**：第X章节
- **扣分影响**：-X分
- **修复方案**：{具体方案}

---

### 🟢 低优先级（可选优化）

**建议1**：{优化建议}
**建议2**：{优化建议}

---

## 🔍 细节检查

### 1. 链接有效性

| 链接 | 状态 |
|------|------|
| {url1} | ✅/❌ |
| {url2} | ✅/❌ |

---

### 2. 术语一致性

| 术语 | 使用情况 |
|------|----------|
| {term1} | ✅ 始终使用 / ❌ 有混用 |
| {term2} | ✅ 始终使用 / ❌ 有混用 |

---

### 3. 代码风格统一

✅/❌ Python代码符合PEP 8
✅/❌ 使用type hints
✅/❌ 包含docstring
✅/❌ 变量命名规范

---

## 📈 传播潜力评估

### 技术社区（掘金/CSDN）{stars}

**预期表现**：
- 阅读量：{min}-{max}
- 收藏数：{min}-{max}
- 评论数：{min}-{max}

**传播优势**：
- ✅ {优势1}
- ✅ {优势2}

**建议优化**：
- {建议1}
- {建议2}

---

### 知识平台（知乎）{stars}

**预期表现**：
- 阅读量：{min}-{max}
- 赞同数：{min}-{max}
- 收藏数：{min}-{max}

**建议优化**：
- {建议1}
- {建议2}

---

## 📝 修改优先级总结

### 🔴 高优先级（建议修复）
1. {问题1}
2. {问题2}

### 🟡 中优先级（建议补充）
1. {建议1}
2. {建议2}

### 🟢 低优先级（可选优化）
1. {建议1}
2. {建议2}

---

## 🎉 最终评价

### 总体结论：{stars} {评价}

**核心优势**：
1. ✅ {优势1}
2. ✅ {优势2}
3. ✅ {优势3}

**适用场景**：
- ✅ {场景1}
- ✅ {场景2}
- ✅ {场景3}

**建议行动**：
1. {行动1}
2. {行动2}
3. {行动3}

---

**质检人**：AI质检系统
**质检标准**：A级技术内容标准
**质检结果**：{通过/不通过} {✅/❌}
**推荐发布**：{是/否} {✅/❌}
```

---

## 6. 问题分级与处理

### 🔴 高优先级问题（必须修复）

**定义**：影响文章准确性、可信度的严重问题

**类型**：
1. **事实错误**：数据错误、技术描述错误
2. **代码不可运行**：关键代码示例无法执行
3. **逻辑严重混乱**：论证逻辑不通
4. **标题党**：标题与内容严重不符

**处理方式**：
- **B级文章**：必须修复后才能发布
- **C/D级文章**：必须修复后重新质检

**修复时限**：立即修复

---

### 🟡 中优先级问题（建议修复）

**定义**：影响文章质量但不影响准确性的问题

**类型**：
1. **内容不完整**：缺少关键章节
2. **案例不足**：理论多实践少
3. **AI腔严重**：套话过多
4. **格式问题**：Markdown语法错误

**处理方式**：
- **A级文章**：可发布，建议优化
- **B级文章**：建议修复后发布
- **C/D级文章**：必须修复

**修复时限**：1小时内

---

### 🟢 低优先级问题（可选优化）

**定义**：锦上添花的优化点

**类型**：
1. **SEO优化**：关键词密度、Meta信息
2. **视觉美化**：emoji使用、表格美化
3. **创新性提升**：增加独特视角
4. **传播优化**：标题微调

**处理方式**：
- 所有等级文章：可选优化
- 不影响发布决策

**修复时限**：无

---

## 📋 附录：质检工具脚本

### quality_checker.py

```python
#!/usr/bin/env python3
"""
AIContentFlow 文章质检脚本
自动检查文章质量并生成质检报告
"""

import re
from typing import Dict, List, Tuple

class QualityChecker:
    """文章质检器"""
    
    def __init__(self, article_path: str):
        self.article_path = article_path
        with open(article_path, 'r', encoding='utf-8') as f:
            self.content = f.read()
    
    def check_all(self) -> Dict:
        """执行全部质检"""
        results = {
            'tech_accuracy': self.check_tech_accuracy(),
            'logic': self.check_logic(),
            'completeness': self.check_completeness(),
            'code_quality': self.check_code_quality(),
            'readability': self.check_readability(),
            'practicality': self.check_practicality(),
            'format': self.check_format(),
            'no_ai_style': self.check_ai_style(),
            'seo': self.check_seo(),
            'innovation': self.check_innovation()
        }
        
        # 计算总分
        weights = {
            'tech_accuracy': 0.15,
            'logic': 0.10,
            'completeness': 0.10,
            'code_quality': 0.10,
            'readability': 0.10,
            'practicality': 0.10,
            'format': 0.10,
            'no_ai_style': 0.10,
            'seo': 0.10,
            'innovation': 0.05
        }
        
        total = sum(results[k] * weights[k] for k in results)
        results['total_score'] = round(total, 1)
        results['grade'] = self.get_grade(total)
        
        return results
    
    def check_tech_accuracy(self) -> float:
        """检查技术准确性"""
        score = 10.0
        
        # 检查未标注来源的数据
        numbers = re.findall(r'\d+[KkMm]?\+?\s*(?:Stars?|Forks?|下载)', self.content)
        citations = len(re.findall(r'\[.*?\]\(.*?\)', self.content))
        if len(numbers) > citations:
            score -= 1
        
        return max(0, score)
    
    def check_logic(self) -> float:
        """检查逻辑连贯性"""
        score = 10.0
        
        # 检查标题层级
        h1_count = len(re.findall(r'^# [^#]', self.content, re.MULTILINE))
        if h1_count != 1:
            score -= 1
        
        return max(0, score)
    
    def check_completeness(self) -> float:
        """检查内容完整性"""
        score = 10.0
        
        # 检查字数
        word_count = len(self.content)
        if word_count < 3000:
            score -= 2
        
        return max(0, score)
    
    def check_code_quality(self) -> float:
        """检查代码质量"""
        score = 10.0
        
        # 检查代码块标注
        code_blocks = re.findall(r'```(\w*)', self.content)
        no_lang = sum(1 for lang in code_blocks if not lang)
        score -= no_lang * 0.5
        
        return max(0, score)
    
    def check_readability(self) -> float:
        """检查可读性"""
        score = 10.0
        
        # 检查超长段落
        paragraphs = self.content.split('\n\n')
        long_paras = sum(1 for p in paragraphs if p.count('\n') > 8)
        score -= long_paras * 0.5
        
        return max(0, score)
    
    def check_practicality(self) -> float:
        """检查实用性"""
        score = 10.0
        
        # 检查案例数量
        case_keywords = ['例如', '示例', '案例', 'Example', 'Case']
        cases = sum(self.content.count(kw) for kw in case_keywords)
        if cases < 3:
            score -= 2
        
        return max(0, score)
    
    def check_format(self) -> float:
        """检查格式规范"""
        score = 10.0
        
        # 检查中英文间距
        no_space = len(re.findall(r'[\u4e00-\u9fa5][a-zA-Z]|[a-zA-Z][\u4e00-\u9fa5]', self.content))
        if no_space > 10:
            score -= 1
        
        return max(0, score)
    
    def check_ai_style(self) -> float:
        """检查AI腔"""
        score = 10.0
        
        # 检测套话
        cliches = [
            '在当今', '随着', '值得注意的是', '需要指出的是',
            '毫无疑问', '显而易见', '众所周知', '综上所述'
        ]
        
        for cliche in cliches:
            count = self.content.count(cliche)
            if count > 0:
                score -= count * 0.5
        
        return max(0, score)
    
    def check_seo(self) -> float:
        """检查SEO优化"""
        score = 10.0
        
        # 检查H2数量
        h2_count = len(re.findall(r'^## [^#]', self.content, re.MULTILINE))
        if h2_count < 3:
            score -= 1
        elif h2_count > 10:
            score -= 0.5
        
        return max(0, score)
    
    def check_innovation(self) -> float:
        """检查创新性（主观评分，默认7分）"""
        return 7.0
    
    def get_grade(self, score: float) -> str:
        """获取评级"""
        if score >= 90:
            return "A级（可发布）"
        elif score >= 80:
            return "B级（需优化）"
        elif score >= 70:
            return "C级（需重写）"
        else:
            return "D级（不合格）"


if __name__ == '__main__':
    import sys
    
    if len(sys.argv) < 2:
        print("使用方法: python3 quality_checker.py <文章路径>")
        sys.exit(1)
    
    checker = QualityChecker(sys.argv[1])
    results = checker.check_all()
    
    print(f"\n📊 质检结果")
    print(f"总分：{results['total_score']}/100")
    print(f"评级：{results['grade']}")
    print(f"\n各维度得分：")
    for key, value in results.items():
        if key not in ['total_score', 'grade']:
            print(f"  {key}: {value}/10")
```

---

**文档版本**：v1.0
**创建时间**：2026-02-25
**维护者**：cosysun
**相关文档**：[WORKFLOW_SOP.md](./WORKFLOW_SOP.md)
