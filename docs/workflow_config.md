# 内容自动化工作流配置说明

## 📋 配置方案：方案A - 最小干预

**配置时间**: 2026-02-21 13:16  
**配置目标**: 在关键节点增加人工确认，保持工作流高度自动化

---

## 🕐 每日时间线

```
09:00 → AI热点日报自动推送（3个推荐主题）
        ↓
09:01 → 你收到企业微信通知「📊 今日AI热点推荐 - 请选择主题」
        ↓
09:15 → 【人工确认窗口1】回复数字(1/2/3)或关键词选择主题
        ↓（15分钟等待）
09:30 → 如未回复，自动选择评分最高主题
        ↓
10:00 → 开始内容自动生成（八段式工作流）
        ↓（约30分钟）
10:30 → 内容生成完成，暂存到草稿区
        ↓
10:31 → 你收到企业微信通知「📝 内容已完成 - 请确认发布」
        ↓
10:45 → 【人工确认窗口2】回复"确认发布"或"需要修改"
        ↓（15分钟等待）
11:00 → 如未回复，自动发布到GitHub
        ↓
11:01 → 你收到企业微信通知「✅ 内容已发布到GitHub」
```

---

## ✅ 人工确认环节详解

### **确认点1：选题确认（09:01）**

#### 通知内容示例
```
标题：📊 今日AI热点推荐 - 请选择主题

内容：
【AI科普线】主题1：Gemini Deep Think审稿革命
- 评分：24/25分
- 推荐理由：7天内热点、3+数据源验证、传播潜力9分
- 预估字数：4000字

【AI工具线】主题2：Cursor新版代码补全功能
- 评分：22/25分
- 推荐理由：开发者关注度高、实用性强
- 预估字数：5000字

【AI编程线】主题3：LangChain 0.3架构升级
- 评分：21/25分
- 推荐理由：技术深度佳、适合专业影响力
- 预估字数：7000字

⏰ 请回复数字(1/2/3)确认选题，或回复关键词指定其他主题
   15分钟内未回复将自动选择主题1
```

#### 你的操作选项
| 操作 | 示例回复 | 结果 |
|------|----------|------|
| **选择推荐主题** | `1` 或 `2` 或 `3` | 使用对应主题创作 |
| **自定义主题** | `OpenAI Sora发布` | 使用你指定的主题 |
| **不回复** | 沉默15分钟 | 自动选择评分最高主题 |

---

### **确认点2：发布前确认（10:31）**

#### 通知内容示例
```
标题：📝 内容已完成 - 请确认发布

内容：
📄 文章信息
- 标题：AI进入象牙塔：Gemini Deep Think如何改写学术审稿规则？
- 副标题：Google DeepMind最新研究揭示，AI审稿准确率达93.7%
- 字数：9,847字
- AI味评分：22%（目标<30%）✅

✨ 核心亮点
1. 15个权威信息源交叉验证
2. 8个数据表+7个流程图
3. 包含3个独家深度访谈
4. 事实核查通过率100%
5. 标题点击预估CTR：8.2%

📊 质量评分：8.8/10
- 信息源质量：9/10
- 内容深度：9/10
- 可读性：8/10
- 数据支撑：9/10

📁 暂存位置：/data/workspace/.draft/2026-02-21/

⏰ 请回复"确认发布"或"需要修改"
   15分钟内未回复将自动发布到GitHub
```

#### 你的操作选项
| 操作 | 示例回复 | 结果 |
|------|----------|------|
| **确认发布** | `确认发布` 或 `发布` 或 `OK` | 立即发布到GitHub |
| **需要修改** | `需要修改` 或 `等等` | 暂停发布，文件保留在草稿区 |
| **不回复** | 沉默15分钟 | 自动发布到GitHub |

---

## 📂 文件路径说明

### **临时文件（用于确认流程）**
```
/data/workspace/.daily_topic_choice.txt    # 存储你选择的主题
/data/workspace/.draft/YYYY-MM-DD/         # 内容暂存草稿区
```

### **正式归档（发布后）**
```
/data/workspace/AI-Content-Archive/output/YYYY-MM-DD/
├── article.md              # 正式文章
├── research_report.md      # 调研报告
├── review_report.md        # 审校报告
├── titles.md              # 标题方案
├── metadata.json          # 元数据
└── publish_plan.md        # 发布计划
```

---

## 🔄 工作流程图

```
┌─────────────────────────────────────────────────────────┐
│  09:00 AI热点日报（自动）                                │
│  - 抓取9个数据源                                         │
│  - 筛选3个推荐主题                                       │
│  - 推送企业微信通知                                      │
└────────────────┬────────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────────┐
│  09:01-09:30 人工确认窗口1【选题】                       │
│  - 你回复数字或关键词                                    │
│  - 或15分钟后自动选择                                    │
└────────────────┬────────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────────┐
│  10:00-10:30 内容自动生成（自动）                        │
│  - 八段式工作流执行                                      │
│  - 15+信息源调研                                         │
│  - 三遍审校降AI味                                        │
│  - 暂存到草稿区                                          │
└────────────────┬────────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────────┐
│  10:31-10:45 人工确认窗口2【发布】                       │
│  - 你回复"确认发布"或"需要修改"                          │
│  - 或15分钟后自动发布                                    │
└────────────────┬────────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────────┐
│  11:00 自动发布到GitHub（自动）                          │
│  - 移动文件到正式目录                                    │
│  - Git提交并推送                                         │
│  - 清理临时文件                                          │
│  - 推送成功通知                                          │
└─────────────────────────────────────────────────────────┘
```

---

## 🎯 核心优势

### **1. 最小干预，最大效率**
- 只需2次人工确认（选题 + 发布）
- 总干预时间：<2分钟/天
- 自动化率：95%

### **2. 智能兜底机制**
- 15分钟无响应自动执行
- 避免流程中断
- 保证每日产出

### **3. 灵活可控**
- 任意时间点可手动接管
- 支持自定义选题
- 支持延迟发布

---

## 🛠️ 管理指令

### **查看定时任务**
直接问我："定时任务有哪些"

### **暂停任务**
```
暂停AI热点日报任务
暂停内容生成任务
```

### **恢复任务**
```
恢复AI热点日报任务
恢复内容生成任务
```

### **修改时间**
```
把热点日报改到早上8点
把内容生成改到下午2点
```

### **查看草稿**
```
查看今天的草稿内容
打开草稿目录
```

### **手动发布草稿**
```
发布今天的草稿到GitHub
```

---

## 📊 监控指标

系统会自动跟踪以下指标：

| 指标 | 监控内容 | 告警阈值 |
|------|----------|----------|
| **选题确认率** | 你主动选题的比例 | <30%提示 |
| **发布确认率** | 你主动确认发布的比例 | <30%提示 |
| **平均响应时间** | 从通知到回复的时间 | >10分钟提示 |
| **自动兜底次数** | 自动选择/发布的次数 | >5次/周提示 |
| **任务失败率** | 定时任务执行失败比例 | >10%告警 |

---

## ⚙️ 高级配置（可选）

### **调整确认窗口时间**
```python
# 当前：15分钟
# 可改为：5分钟（快速模式）或 30分钟（宽松模式）
```

### **增加第三个确认点**
可在以下位置增加：
- 调研报告完成后（10:15）
- 标题方案完成后（10:20）

### **关键词快捷回复**
支持以下快捷词：
- `1` = 选择主题1
- `OK` = 确认发布
- `跳过` = 使用默认选项
- `等等` = 暂停自动流程

---

## 🎓 最佳实践建议

### **场景1：工作日早晨**
- 09:01 收到通知后立即选题（1分钟）
- 10:31 收到通知后快速确认（30秒）
- 总计：90秒完成人工确认

### **场景2：开会或忙碌**
- 不用管，系统自动兜底
- 会后查看发布结果即可

### **场景3：想要精细控制**
- 09:01 选择主题
- 10:31 选择"需要修改"
- 手动审阅草稿后再发布

---

## 📮 通知渠道说明

所有通知通过**企业微信「Knot消息通知」机器人**发送，原因是企业微信消息推送限制。

**确保手机企业微信已开启通知权限！**

---

## 🆘 常见问题

### Q1: 如果错过了确认窗口怎么办？
**A**: 系统会自动执行，但你随时可以：
- 查看草稿目录手动修改
- 撤回GitHub提交后重新发布

### Q2: 可以中途暂停自动流程吗？
**A**: 可以，发送"暂停内容生成任务"指令

### Q3: 如何查看历史选题和发布记录？
**A**: 直接问我："查看本周发布记录"

### Q4: 可以一次生成多篇内容吗？
**A**: 当前每天1篇，如需多篇可临时增加任务

---

## 📝 更新日志

**v1.0 - 2026-02-21**
- ✅ 初始配置完成
- ✅ 两个人工确认点
- ✅ 15分钟自动兜底机制
- ✅ 企业微信通知推送

---

**配置完成！明天09:00开始执行！** 🎉