# AIContentFlow å†³ç­–æ ‘ä¸ç”¨æˆ·äº¤äº’é€»è¾‘

> **ç”¨é€”**ï¼šæœ¬æ–‡æ¡£å®šä¹‰AI Agentåœ¨ä¸åŒç”¨æˆ·è¾“å…¥ä¸‹çš„å†³ç­–é€»è¾‘ï¼Œç¡®ä¿äº¤äº’æµç•…ä¸”ç¬¦åˆé¢„æœŸã€‚

---

## ğŸ“‹ ç›®å½•

1. [çƒ­ç‚¹ç›‘æ§åçš„ç”¨æˆ·å›å¤å¤„ç†](#1-çƒ­ç‚¹ç›‘æ§åçš„ç”¨æˆ·å›å¤å¤„ç†)
2. [åˆ›ä½œæµç¨‹ä¸­çš„ç¡®è®¤ç‚¹](#2-åˆ›ä½œæµç¨‹ä¸­çš„ç¡®è®¤ç‚¹)
3. [å¼‚å¸¸è¾“å…¥å¤„ç†](#3-å¼‚å¸¸è¾“å…¥å¤„ç†)
4. [å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç†](#4-å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç†)

---

## 1. çƒ­ç‚¹ç›‘æ§åçš„ç”¨æˆ·å›å¤å¤„ç†

### åœºæ™¯
çƒ­ç‚¹ç›‘æ§å®Œæˆåï¼Œé€šè¿‡`notify`æ¨é€Top 5é€‰é¢˜ï¼Œç­‰å¾…ç”¨æˆ·å›å¤ã€‚

### å†³ç­–æ ‘

```mermaid
graph TD
    A[æ”¶åˆ°ç”¨æˆ·å›å¤] --> B{å›å¤å†…å®¹ç±»å‹?}
    
    B -->|æ•°å­—1-5| C[æå–å¯¹åº”é€‰é¢˜]
    B -->|"ç­‰æ˜å¤©"| D[è·³è¿‡ä»Šæ—¥åˆ›ä½œ]
    B -->|"é‡æ–°ç›‘æ§"| E[é‡æ–°æ‰§è¡Œç›‘æ§è„šæœ¬]
    B -->|å…¶ä»–æ–‡æœ¬| F[è¯¢é—®æ¾„æ¸…]
    
    C --> C1[ä¿å­˜é€‰é¢˜åˆ°ä¸´æ—¶æ–‡ä»¶]
    C1 --> C2[å¯åŠ¨å…«æ®µå¼åˆ›ä½œæµç¨‹]
    C2 --> C3[ä»é˜¶æ®µ1å¼€å§‹]
    
    D --> D1[notifyç¡®è®¤è·³è¿‡]
    D1 --> D2[ç­‰å¾…æ˜å¤©07:00è‡ªåŠ¨è§¦å‘]
    
    E --> E1[é‡æ–°è¿è¡Œmonitorè„šæœ¬]
    E1 --> E2[æ¨é€æ–°çš„Top 5]
    
    F --> F1[è¯¢é—®ç”¨æˆ·æ„å›¾]
    F1 --> A
```

### ä»£ç é€»è¾‘

```python
def handle_user_reply_after_monitor(user_input):
    """
    å¤„ç†çƒ­ç‚¹ç›‘æ§åçš„ç”¨æˆ·å›å¤
    """
    # å»é™¤é¦–å°¾ç©ºæ ¼å¹¶è½¬å°å†™
    user_input_clean = user_input.strip().lower()
    
    # åˆ¤æ–­æ˜¯å¦ä¸ºæ•°å­—1-5
    if user_input_clean in ["1", "2", "3", "4", "5"]:
        topic_number = int(user_input_clean)
        return {
            "action": "start_creation",
            "topic_number": topic_number,
            "next_step": "extract_topic_and_confirm"
        }
    
    # åˆ¤æ–­æ˜¯å¦ä¸º"ç­‰æ˜å¤©"åŠå…¶å˜ä½“
    elif user_input_clean in ["ç­‰æ˜å¤©", "æ˜å¤©", "è·³è¿‡", "ä¸å†™äº†"]:
        return {
            "action": "skip_today",
            "next_step": "notify_and_wait_tomorrow"
        }
    
    # åˆ¤æ–­æ˜¯å¦ä¸º"é‡æ–°ç›‘æ§"åŠå…¶å˜ä½“
    elif any(keyword in user_input_clean for keyword in ["é‡æ–°ç›‘æ§", "åˆ·æ–°", "é‡æ–°", "å†æ¥ä¸€æ¬¡"]):
        return {
            "action": "re_monitor",
            "next_step": "run_monitor_script_again"
        }
    
    # åˆ¤æ–­æ˜¯å¦ä¸ºç›´æ¥æä¾›çš„åˆ›ä½œä¸»é¢˜
    elif len(user_input) > 10 and any(keyword in user_input for keyword in ["å†™", "åˆ›ä½œ", "æ–‡ç« ", "ä»‹ç»"]):
        return {
            "action": "custom_topic",
            "custom_topic": user_input,
            "next_step": "confirm_custom_topic"
        }
    
    # å…¶ä»–æƒ…å†µï¼šè¯¢é—®æ¾„æ¸…
    else:
        return {
            "action": "ask_clarification",
            "next_step": "wait_for_clear_instruction"
        }
```

### å›å¤æ¨¡æ¿

#### æƒ…å†µ1ï¼šç”¨æˆ·å›å¤æ•°å­—1-5
```markdown
âœ… **é€‰é¢˜å·²ç¡®è®¤ï¼š{topic_title}**

**ä¸»é¢˜**ï¼š{topic_description}
**ç±»å‹**ï¼š{content_type}ï¼ˆç§‘æ™®/å·¥å…·/ç¼–ç¨‹/åˆ›ä¸šï¼‰
**ç›®æ ‡å­—æ•°**ï¼š{word_count_range}
**ç›®æ ‡è¯»è€…**ï¼šAIä»ä¸šè€…ã€å¼€å‘è€…ã€æŠ€æœ¯çˆ±å¥½è€…

**å³å°†å¼€å§‹å…«æ®µå¼åˆ›ä½œæµç¨‹**ï¼š
1. ç¡®è®¤é€‰é¢˜å’Œåˆ›ä½œç›®æ ‡
2. æ·±åº¦è°ƒç ”ï¼ˆâ‰¥15ä¸ªä¿¡æ¯æºï¼‰
3. å†…å®¹åˆ›ä½œï¼ˆ{word_count_range}å­—ï¼‰
4. ä¸‰éå®¡æ ¡ï¼ˆäº‹å®æ ¸æŸ¥ã€é™AIå‘³ã€æ’ç‰ˆæ¶¦è‰²ï¼‰
5. ç”Ÿæˆ20ä¸ªæ ‡é¢˜æ–¹æ¡ˆ
6. æœ€ç»ˆå®¡é˜…ä¸æš‚å­˜
7. åˆ¶ä½œé…å›¾
8. å‘å¸ƒæ¨å¹¿

ğŸ“‹ **è¯·å›å¤"ç¡®è®¤"å¼€å§‹åˆ›ä½œï¼Œæˆ–æå‡ºä¿®æ”¹å»ºè®®ã€‚**
```

#### æƒ…å†µ2ï¼šç”¨æˆ·å›å¤"ç­‰æ˜å¤©"
```markdown
âœ… **å·²è·³è¿‡ä»Šæ—¥åˆ›ä½œä»»åŠ¡**

æ˜å¤© 07:00 å°†è‡ªåŠ¨æ‰§è¡Œçƒ­ç‚¹ç›‘æ§ï¼Œå±Šæ—¶å†æ¬¡æ¨é€é€‰é¢˜ã€‚

ğŸŒ™ ä»Šå¤©å¥½å¥½ä¼‘æ¯ï¼

---
ğŸ’¡ å¦‚æœä¸´æ—¶æ”¹å˜ä¸»æ„ï¼Œéšæ—¶å¯ä»¥è¯´"æ‰§è¡ŒAIContentFlowçƒ­ç‚¹ç›‘æ§ä»»åŠ¡"é‡æ–°å¼€å§‹ã€‚
```

#### æƒ…å†µ3ï¼šç”¨æˆ·å›å¤"é‡æ–°ç›‘æ§"
```markdown
ğŸ”„ **æ­£åœ¨é‡æ–°æ‰§è¡Œçƒ­ç‚¹ç›‘æ§...**

ï¼ˆç­‰å¾…è„šæœ¬æ‰§è¡Œï¼‰

---
ğŸ“Š **çƒ­ç‚¹ç›‘æ§å®Œæˆ - æ–°çš„Top 5é€‰é¢˜**

{new_top5_topics}

è¯·å›å¤é€‰é¢˜ç¼–å·ï¼ˆ1-5ï¼‰ç¡®è®¤åˆ›ä½œï¼Œæˆ–å›å¤'ç­‰æ˜å¤©'è·³è¿‡ã€‚
```

#### æƒ…å†µ4ï¼šç”¨æˆ·æä¾›è‡ªå®šä¹‰ä¸»é¢˜
```markdown
ğŸ’¡ **æ”¶åˆ°è‡ªå®šä¹‰åˆ›ä½œä¸»é¢˜**

ä½ æåˆ°ï¼š"{user_input}"

æˆ‘ç†è§£ä½ æƒ³åˆ›ä½œå…³äºï¼š**{extracted_topic}**

**å»ºè®®è®¾å®š**ï¼š
- ç±»å‹ï¼š{suggested_type}
- ç›®æ ‡å­—æ•°ï¼š{word_count_range}
- å†…å®¹çº¿ï¼š{suggested_content_line}

ğŸ“‹ **å›å¤"ç¡®è®¤"å¼€å§‹åˆ›ä½œï¼Œæˆ–æä¾›æ›´å¤šç»†èŠ‚è°ƒæ•´æ–¹å‘ã€‚**
```

#### æƒ…å†µ5ï¼šæ— æ³•ç†è§£çš„å›å¤
```markdown
â“ **æŠ±æ­‰ï¼Œæˆ‘æ²¡ç†è§£ä½ çš„æ„æ€**

è¯·ï¼š
- å›å¤ **1-5** é€‰æ‹©å¯¹åº”çš„é€‰é¢˜
- å›å¤ **"ç­‰æ˜å¤©"** è·³è¿‡ä»Šæ—¥åˆ›ä½œ
- å›å¤ **"é‡æ–°ç›‘æ§"** åˆ·æ–°é€‰é¢˜åˆ—è¡¨
- æˆ–è€…ç›´æ¥å‘Šè¯‰æˆ‘ä½ æƒ³åˆ›ä½œçš„ä¸»é¢˜ï¼ˆå¦‚"å†™ä¸€ç¯‡å…³äºxxxçš„æ–‡ç« "ï¼‰

---
ğŸ’¡ å¦‚æœæœ‰ç–‘é—®ï¼Œå¯ä»¥é—®æˆ‘"AIContentFlowèƒ½åšä»€ä¹ˆï¼Ÿ"
```

---

## 2. åˆ›ä½œæµç¨‹ä¸­çš„ç¡®è®¤ç‚¹

### é˜¶æ®µ1ï¼šç¡®è®¤é€‰é¢˜å’Œåˆ›ä½œç›®æ ‡

**ç­‰å¾…ç”¨æˆ·è¾“å…¥**ï¼šç”¨æˆ·å›å¤"ç¡®è®¤"æˆ–æå‡ºä¿®æ”¹

#### å†³ç­–é€»è¾‘ï¼š
```python
def handle_stage1_confirmation(user_input):
    user_input_clean = user_input.strip().lower()
    
    if user_input_clean in ["ç¡®è®¤", "å¼€å§‹", "å¥½", "ok", "ç»§ç»­"]:
        return {"action": "proceed_to_stage2"}
    
    elif any(keyword in user_input for keyword in ["ä¿®æ”¹", "è°ƒæ•´", "æ”¹æˆ"]):
        return {
            "action": "adjust_goal",
            "adjustment_request": user_input
        }
    
    else:
        return {"action": "ask_clarification"}
```

#### å›å¤æ¨¡æ¿ï¼š
**ç¡®è®¤å**ï¼š
```markdown
âœ… **å¼€å§‹é˜¶æ®µ2ï¼šæ·±åº¦è°ƒç ”**

æ­£åœ¨æ£€ç´¢ç›¸å…³èµ„æ–™...
ç›®æ ‡ï¼šæ”¶é›†â‰¥15ä¸ªé«˜è´¨é‡ä¿¡æ¯æº

ï¼ˆæ‰§è¡Œæ£€ç´¢ï¼‰
```

**ä¿®æ”¹è¯·æ±‚**ï¼š
```markdown
ğŸ’¡ **æ”¶åˆ°è°ƒæ•´éœ€æ±‚ï¼š{user_input}**

æˆ‘å°†è°ƒæ•´ä¸ºï¼š
- {adjustment_detail_1}
- {adjustment_detail_2}

è°ƒæ•´åçš„è®¾å®šæ˜¯å¦OKï¼Ÿå›å¤"ç¡®è®¤"ç»§ç»­ã€‚
```

---

### é˜¶æ®µ2ï¼šæ·±åº¦è°ƒç ”å®Œæˆ

**ç­‰å¾…ç”¨æˆ·è¾“å…¥**ï¼šç”¨æˆ·å›å¤"ç»§ç»­"æˆ–"è¡¥å……è°ƒç ”"

#### å†³ç­–é€»è¾‘ï¼š
```python
def handle_stage2_confirmation(user_input):
    user_input_clean = user_input.strip().lower()
    
    if user_input_clean in ["ç»§ç»­", "å¼€å§‹å†™", "è¿›å…¥åˆ›ä½œ"]:
        return {"action": "proceed_to_stage3"}
    
    elif any(keyword in user_input for keyword in ["è¡¥å……", "ä¸å¤Ÿ", "å†æŸ¥"]):
        return {
            "action": "supplement_research",
            "supplement_request": user_input
        }
    
    else:
        return {"action": "ask_clarification"}
```

---

### é˜¶æ®µ3ï¼šå†…å®¹åˆ›ä½œå®Œæˆ

**ç­‰å¾…ç”¨æˆ·è¾“å…¥**ï¼šç”¨æˆ·å›å¤"ç»§ç»­"æˆ–"é‡å†™æŸéƒ¨åˆ†"

#### å†³ç­–é€»è¾‘ï¼š
```python
def handle_stage3_confirmation(user_input):
    user_input_clean = user_input.strip().lower()
    
    if user_input_clean in ["ç»§ç»­", "å®¡æ ¡", "å¼€å§‹å®¡æ ¡"]:
        return {"action": "proceed_to_stage4"}
    
    elif any(keyword in user_input for keyword in ["é‡å†™", "ä¿®æ”¹"]):
        # æå–è¦ä¿®æ”¹çš„éƒ¨åˆ†
        if "å¼•å­" in user_input or "å¼€å¤´" in user_input:
            section = "introduction"
        elif "æ ¸å¿ƒ" in user_input or "æ¦‚å¿µ" in user_input:
            section = "core_concept"
        elif "æŠ€æœ¯" in user_input or "å®ç°" in user_input:
            section = "technical_implementation"
        # ... å…¶ä»–éƒ¨åˆ†
        else:
            section = "unknown"
        
        return {
            "action": "rewrite_section",
            "section": section,
            "rewrite_request": user_input
        }
    
    else:
        return {"action": "ask_clarification"}
```

---

### é˜¶æ®µ4-6ï¼šä¸‰éå®¡æ ¡

æ¯éå®¡æ ¡åéƒ½ç­‰å¾…ç”¨æˆ·ç¡®è®¤ï¼Œå†³ç­–é€»è¾‘ç±»ä¼¼ï¼š
- "ç»§ç»­" â†’ è¿›å…¥ä¸‹ä¸€éå®¡æ ¡
- "å†å®¡æŸéƒ¨åˆ†" â†’ é‡æ–°å®¡æ ¡æŒ‡å®šéƒ¨åˆ†
- "è·³è¿‡" â†’ ç›´æ¥è¿›å…¥ä¸‹ä¸€é˜¶æ®µï¼ˆä¸æ¨èï¼Œéœ€äºŒæ¬¡ç¡®è®¤ï¼‰

---

### é˜¶æ®µ7ï¼šæ ‡é¢˜åˆ›ä½œå®Œæˆ

**ç­‰å¾…ç”¨æˆ·è¾“å…¥**ï¼šç”¨æˆ·é€‰æ‹©æ ‡é¢˜ç¼–å·æˆ–æå‡ºä¿®æ”¹

#### å†³ç­–é€»è¾‘ï¼š
```python
def handle_stage7_confirmation(user_input):
    user_input_clean = user_input.strip()
    
    # æ£€æŸ¥æ˜¯å¦ä¸ºæ•°å­—1-20
    if user_input_clean.isdigit() and 1 <= int(user_input_clean) <= 20:
        title_number = int(user_input_clean)
        return {
            "action": "select_title",
            "title_number": title_number
        }
    
    # æ£€æŸ¥æ˜¯å¦ä¸ºä¿®æ”¹è¯·æ±‚
    elif any(keyword in user_input for keyword in ["ä¿®æ”¹", "æ”¹", "ä¸å¥½"]):
        return {
            "action": "modify_title",
            "modification_request": user_input
        }
    
    # æ£€æŸ¥æ˜¯å¦ä¸ºå¹³å°å®šåˆ¶è¯·æ±‚
    elif any(platform in user_input for platform in ["æ˜é‡‘", "çŸ¥ä¹", "V2EX", "å¾®ä¿¡"]):
        return {
            "action": "platform_specific_title",
            "platform_request": user_input
        }
    
    else:
        return {"action": "ask_clarification"}
```

#### å›å¤æ¨¡æ¿ï¼š
**é€‰æ‹©æ ‡é¢˜å**ï¼š
```markdown
âœ… **æ ‡é¢˜å·²ç¡®å®šï¼š{selected_title}**

ç°åœ¨è¿›å…¥é˜¶æ®µ8ï¼šæœ€ç»ˆå®¡é˜…ä¸æš‚å­˜

æ­£åœ¨ä¿å­˜æ‰€æœ‰æ–‡ä»¶åˆ°ï¼š`/data/workspace/.draft/2026-02-24/`

ï¼ˆæ‰§è¡Œä¿å­˜æ“ä½œï¼‰
```

**ä¿®æ”¹æ ‡é¢˜**ï¼š
```markdown
ğŸ’¡ **æ”¶åˆ°æ ‡é¢˜ä¿®æ”¹éœ€æ±‚ï¼š{user_input}**

æˆ‘å°†ç”Ÿæˆ3ä¸ªæ–°æ ‡é¢˜ï¼š
1. {new_title_1}
2. {new_title_2}
3. {new_title_3}

è¯·é€‰æ‹©ç¼–å·æˆ–ç»§ç»­æå‡ºä¿®æ”¹å»ºè®®ã€‚
```

---

## 3. å¼‚å¸¸è¾“å…¥å¤„ç†

### 3.1 å®Œå…¨æ— æ³•ç†è§£çš„è¾“å…¥

**è§¦å‘æ¡ä»¶**ï¼š
- ç”¨æˆ·è¾“å…¥è¿‡çŸ­ï¼ˆ<3ä¸ªå­—ç¬¦ï¼‰
- ç”¨æˆ·è¾“å…¥åŒ…å«å¤§é‡ç¬¦å·æˆ–ä¹±ç 
- ç”¨æˆ·è¾“å…¥ä¸å½“å‰ä¸Šä¸‹æ–‡å®Œå…¨æ— å…³

**å¤„ç†ç­–ç•¥**ï¼š
```markdown
â“ **æŠ±æ­‰ï¼Œæˆ‘æ²¡ç†è§£ä½ çš„æ„æ€**

å½“å‰æˆ‘ä»¬åœ¨ï¼š**{current_stage_name}**

å¯ä»¥ï¼š
- {option_1}
- {option_2}
- {option_3}

æˆ–è€…å‘Šè¯‰æˆ‘ï¼š"ä»å¤´å¼€å§‹"ã€"å–æ¶ˆä»»åŠ¡"ã€"æŸ¥çœ‹è¿›åº¦"

---
ğŸ’¡ å¦‚éœ€å¸®åŠ©ï¼Œé—®æˆ‘"ç°åœ¨åœ¨åšä»€ä¹ˆï¼Ÿ"
```

---

### 3.2 ä¸­é€”å–æ¶ˆä»»åŠ¡

**è§¦å‘è¯**ï¼š"å–æ¶ˆ"ã€"åœæ­¢"ã€"ä¸å†™äº†"ã€"ç®—äº†"

**å¤„ç†ç­–ç•¥**ï¼š
```markdown
âš ï¸ **ç¡®è®¤å–æ¶ˆä»»åŠ¡ï¼Ÿ**

å½“å‰è¿›åº¦ï¼š**{current_stage}**
å·²å®Œæˆï¼š{completed_stages}
å·²ä¿å­˜ï¼š{saved_files}

å¦‚æœå–æ¶ˆï¼š
- å·²å®Œæˆçš„å†…å®¹ä¼šä¿å­˜åˆ° `/data/workspace/.draft/incomplete_{date}/`
- ä¸‹æ¬¡å¯ä»¥ç»§ç»­ï¼ˆå›å¤"ç»§ç»­æœªå®Œæˆä»»åŠ¡"ï¼‰
- ä¹Ÿå¯ä»¥å½»åº•åˆ é™¤ï¼ˆå›å¤"åˆ é™¤è‰ç¨¿"ï¼‰

**å›å¤"ç¡®è®¤å–æ¶ˆ"ç»§ç»­ï¼Œæˆ–"ç»§ç»­ä»»åŠ¡"è¿”å›åˆ›ä½œã€‚**
```

---

### 3.3 æŸ¥çœ‹å½“å‰è¿›åº¦

**è§¦å‘è¯**ï¼š"è¿›åº¦"ã€"åˆ°å“ªäº†"ã€"ç°åœ¨åœ¨åšä»€ä¹ˆ"ã€"çŠ¶æ€"

**å¤„ç†ç­–ç•¥**ï¼š
```markdown
## ğŸ“Š å½“å‰ä»»åŠ¡è¿›åº¦

**ä»»åŠ¡**ï¼š{task_name}
**é€‰é¢˜**ï¼š{topic_title}

### âœ… å·²å®Œæˆ
- [x] é˜¶æ®µ1ï¼šç¡®è®¤é€‰é¢˜å’Œåˆ›ä½œç›®æ ‡
- [x] é˜¶æ®µ2ï¼šæ·±åº¦è°ƒç ”ï¼ˆ15ä¸ªä¿¡æ¯æºï¼‰
- [x] é˜¶æ®µ3ï¼šå†…å®¹åˆ›ä½œï¼ˆ5800å­—ï¼‰

### ğŸ”„ è¿›è¡Œä¸­
- [ ] **é˜¶æ®µ4ï¼šç¬¬ä¸€éå®¡æ ¡ - äº‹å®æ ¸æŸ¥** â† å½“å‰

### â³ å¾…å®Œæˆ
- [ ] é˜¶æ®µ5ï¼šç¬¬äºŒéå®¡æ ¡ - é™AIå‘³
- [ ] é˜¶æ®µ6ï¼šç¬¬ä¸‰éå®¡æ ¡ - æ’ç‰ˆæ¶¦è‰²
- [ ] é˜¶æ®µ7ï¼šæ ‡é¢˜åˆ›ä½œï¼ˆ20ä¸ªæ–¹æ¡ˆï¼‰
- [ ] é˜¶æ®µ8ï¼šæœ€ç»ˆå®¡é˜…ä¸æš‚å­˜

---
**ä¸‹ä¸€æ­¥**ï¼šå®Œæˆäº‹å®æ ¸æŸ¥åï¼Œå›å¤"ç»§ç»­"è¿›å…¥é˜¶æ®µ5ã€‚
```

---

### 3.4 è·³è¿‡æŸä¸ªé˜¶æ®µ

**è§¦å‘è¯**ï¼š"è·³è¿‡"ã€"ç›´æ¥åˆ°xxx"

**å¤„ç†ç­–ç•¥**ï¼ˆä¸æ¨èè·³è¿‡ï¼Œéœ€äºŒæ¬¡ç¡®è®¤ï¼‰ï¼š
```markdown
âš ï¸ **ä¸æ¨èè·³è¿‡å®¡æ ¡é˜¶æ®µ**

ä½ æƒ³è·³è¿‡ï¼š**{stage_to_skip}**

è·³è¿‡æ­¤é˜¶æ®µå¯èƒ½å¯¼è‡´ï¼š
- æ–‡ç« è´¨é‡ä¸‹é™
- å‡ºç°äº‹å®é”™è¯¯
- AIè…”ä¸¥é‡
- æ’ç‰ˆä¸è§„èŒƒ

**å¦‚æœç¡®å®è¦è·³è¿‡**ï¼Œå›å¤"ç¡®è®¤è·³è¿‡"ã€‚
**å»ºè®®ç»§ç»­å®Œæˆ**ï¼Œå›å¤"ç»§ç»­å®¡æ ¡"ã€‚
```

---

## 4. å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç†

### 4.1 ä¸Šä¸‹æ–‡ä¿¡æ¯å­˜å‚¨

**ä¸´æ—¶æ–‡ä»¶**ï¼ˆä¿å­˜åœ¨å†…å­˜æˆ–ä¸´æ—¶æ–‡ä»¶ï¼‰ï¼š
```json
{
  "current_workflow": "content_creation",
  "current_stage": 4,
  "stage_name": "ç¬¬ä¸€éå®¡æ ¡ - äº‹å®æ ¸æŸ¥",
  "topic": {
    "number": 2,
    "title": "BMAD-METHODï¼šç”¨å¤§æ¨¡å‹è‡ªåŠ¨è°ƒè¯•ä»£ç ",
    "type": "ç¼–ç¨‹",
    "word_count_target": "6000-8000"
  },
  "completed_stages": [1, 2, 3],
  "saved_files": [
    "/data/workspace/.draft/2026-02-24/article_draft.md",
    "/data/workspace/.draft/2026-02-24/research_notes.md"
  ],
  "waiting_for": "user_confirmation",
  "last_user_input": "ç»§ç»­",
  "last_agent_output": "é˜¶æ®µ3åˆ›ä½œå®Œæˆé€šçŸ¥"
}
```

### 4.2 ä¸Šä¸‹æ–‡æ¢å¤

**åœºæ™¯**ï¼šç”¨æˆ·ä¸­é€”ç¦»å¼€ï¼Œè¿‡å‡ å°æ—¶åå›æ¥

**æ£€æµ‹æ–¹æ³•**ï¼š
- æ£€æŸ¥æ˜¯å¦å­˜åœ¨ `/data/workspace/.draft/latest/` ç›®å½•
- è¯»å– `context.json` æ–‡ä»¶

**æ¢å¤æç¤º**ï¼š
```markdown
ğŸ‘‹ **æ¬¢è¿å›æ¥ï¼**

æ£€æµ‹åˆ°æœªå®Œæˆçš„ä»»åŠ¡ï¼š

**ä»»åŠ¡**ï¼š{task_name}
**é€‰é¢˜**ï¼š{topic_title}
**å½“å‰è¿›åº¦**ï¼š{current_stage_name}
**ä¸Šæ¬¡æ´»åŠ¨**ï¼š{last_activity_time}

**æ˜¯å¦ç»§ç»­ï¼Ÿ**
- å›å¤"ç»§ç»­"ä»ä¸Šæ¬¡è¿›åº¦ç»§ç»­
- å›å¤"é‡æ–°å¼€å§‹"æ”¾å¼ƒå½“å‰è¿›åº¦ï¼Œå¼€å§‹æ–°ä»»åŠ¡
- å›å¤"æŸ¥çœ‹è¯¦æƒ…"äº†è§£æ›´å¤š
```

---

### 4.3 ä¸Šä¸‹æ–‡åˆ‡æ¢

**åœºæ™¯**ï¼šç”¨æˆ·åœ¨åˆ›ä½œä»»åŠ¡è¿›è¡Œä¸­ï¼Œçªç„¶è¦æ±‚æ‰§è¡Œå…¶ä»–æ“ä½œï¼ˆå¦‚"æŸ¥çœ‹GitHubä»“åº“"ï¼‰

**å¤„ç†ç­–ç•¥**ï¼š
```markdown
ğŸ’¡ **æ”¶åˆ°æ–°è¯·æ±‚ï¼š{new_request}**

å½“å‰æœ‰è¿›è¡Œä¸­çš„ä»»åŠ¡ï¼š**{current_task_name}**ï¼ˆé˜¶æ®µ{current_stage}ï¼‰

**é€‰é¡¹**ï¼š
1. **æš‚åœå½“å‰ä»»åŠ¡ï¼Œå¤„ç†æ–°è¯·æ±‚**ï¼ˆæ¨èï¼‰
   - å½“å‰è¿›åº¦ä¼šè‡ªåŠ¨ä¿å­˜
   - å¤„ç†å®Œæ–°è¯·æ±‚åå¯ç»§ç»­

2. **å–æ¶ˆå½“å‰ä»»åŠ¡**
   - å·²å®Œæˆçš„å†…å®¹ä¼šä¿å­˜åˆ°è‰ç¨¿
   - å¼€å§‹æ–°ä»»åŠ¡

3. **ç»§ç»­å½“å‰ä»»åŠ¡ï¼Œç¨åå¤„ç†æ–°è¯·æ±‚**
   - å…ˆå®Œæˆå½“å‰é˜¶æ®µ
   - ç¨åæé†’ä½ å¤„ç†æ–°è¯·æ±‚

**è¯·å›å¤æ•°å­—1ã€2æˆ–3ã€‚**
```

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [å·¥ä½œæµæ ‡å‡†æ“ä½œæµç¨‹](./WORKFLOW_SOP.md)
- [Promptæ¨¡æ¿åº“](./PROMPT_TEMPLATES.md)
- [ç¤ºä¾‹å¯¹è¯](./EXAMPLE_CONVERSATION.md)

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0  
**æœ€åæ›´æ–°**ï¼š2026-02-24  
**ç»´æŠ¤è€…**ï¼šcosysun