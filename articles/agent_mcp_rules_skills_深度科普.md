# AI Agentç”Ÿæ€çš„å››å¤§åŸºçŸ³ï¼šæ·±å…¥ç†è§£Agentã€MCPã€Rulesä¸Skills

> **å¯¼è¯»**ï¼šåœ¨AIåº”ç”¨ä»"å¯¹è¯å·¥å…·"å‘"è‡ªä¸»æ™ºèƒ½ä½“"æ¼”è¿›çš„è¿‡ç¨‹ä¸­ï¼ŒAgentã€MCPã€Rulesã€Skillså››ä¸ªæ¦‚å¿µé¢‘ç¹å‡ºç°å´å¸¸è¢«æ··æ·†ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æè¿™å››è€…çš„æœ¬è´¨ã€å…³ç³»ä¸å®è·µï¼Œå¸®åŠ©å¼€å‘è€…æ„å»ºæ›´å¼ºå¤§çš„AIåº”ç”¨ã€‚

---

## ğŸ“– ç›®å½•

1. [ä»å•ä¸€æ¨¡å‹åˆ°æ™ºèƒ½ç”Ÿæ€ï¼šAI Agentçš„æ¼”è¿›ä¹‹è·¯](#chapter1)
2. [Agentï¼šä¼šæ€è€ƒã€èƒ½è¡ŒåŠ¨çš„AIæ™ºèƒ½ä½“](#chapter2)
3. [MCPï¼šè¿æ¥AIä¸å¤–éƒ¨ä¸–ç•Œçš„æ ‡å‡†åè®®](#chapter3)
4. [Rulesï¼šè®©AIè¾“å‡ºç¬¦åˆä½ çš„è§„èŒƒ](#chapter4)
5. [Skillsï¼šå¯å¤ç”¨çš„å·¥ä½œæµçŸ¥è¯†åŒ…](#chapter5)
6. [å››è€…ååŒï¼šæ„å»ºå®Œæ•´AI Agentç”Ÿæ€](#chapter6)
7. [å®æˆ˜æŒ‡å—ï¼šä»é›¶æ­å»ºä½ çš„ç¬¬ä¸€ä¸ªAgentç³»ç»Ÿ](#chapter7)
8. [æœ€ä½³å®è·µä¸é¿å‘æŒ‡å—](#chapter8)

---

<a name="chapter1"></a>
## ä¸€ã€ä»å•ä¸€æ¨¡å‹åˆ°æ™ºèƒ½ç”Ÿæ€ï¼šAI Agentçš„æ¼”è¿›ä¹‹è·¯

### 1.1 AIåº”ç”¨çš„ä¸‰ä¸ªå‘å±•é˜¶æ®µ

**é˜¶æ®µ1ï¼šé—®ç­”å‹AIï¼ˆ2022-2023ï¼‰**

```plaintext
ç”¨æˆ· â†’ ChatGPT â†’ å›ç­”
```

ç‰¹ç‚¹ï¼š
- çº¯æ–‡æœ¬è¾“å…¥è¾“å‡º
- ä¾èµ–æ¨¡å‹è®­ç»ƒæ•°æ®
- æ— æ³•æ‰§è¡Œå®é™…æ“ä½œ
- çŸ¥è¯†æˆªæ­¢æ—¥æœŸå›ºå®š

**é˜¶æ®µ2ï¼šå·¥å…·å¢å¼ºå‹AIï¼ˆ2023-2024ï¼‰**

```plaintext
ç”¨æˆ· â†’ AI + Function Calling â†’ è°ƒç”¨å¤–éƒ¨API â†’ è¿”å›ç»“æœ
```

ç‰¹ç‚¹ï¼š
- èƒ½è°ƒç”¨æœç´¢ã€è®¡ç®—å™¨ç­‰å·¥å…·
- å¯è®¿é—®å®æ—¶æ•°æ®
- ä»éœ€äººå·¥è®¾è®¡å·¥å…·é›†
- ç¼ºä¹ç»Ÿä¸€æ ‡å‡†

**é˜¶æ®µ3ï¼šè‡ªä¸»æ™ºèƒ½ä½“ç”Ÿæ€ï¼ˆ2024-ç°åœ¨ï¼‰**

```plaintext
ç”¨æˆ·æ„å›¾
   â†“
Agentï¼ˆè§„åˆ’+æ‰§è¡Œï¼‰
   â†“
MCPåè®® â† è¿æ¥ â†’ æ•°ç™¾ç§å·¥å…·/æ•°æ®æº
   â†“
SkillsåŠ¨æ€åŠ è½½ â† æŒ‰éœ€ â†’ ä¸“ä¸šå·¥ä½œæµ
   â†“
Rulesçº¦æŸ â† ä¿è¯ â†’ è¾“å‡ºè´¨é‡
```

ç‰¹ç‚¹ï¼š
- è‡ªä¸»è§„åˆ’ä»»åŠ¡æµç¨‹
- æ ‡å‡†åŒ–å·¥å…·æ¥å…¥
- å¯å¤ç”¨çš„ä¸“ä¸šèƒ½åŠ›
- è¾“å‡ºè´¨é‡å¯æ§

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦Agentç”Ÿæ€ï¼Ÿ

**ç—›ç‚¹1ï¼šä¼ ç»ŸAIåº”ç”¨çš„"ä¿¡æ¯å­¤å²›"**

```python
# ä¼ ç»Ÿæ–¹å¼ï¼šæ¯ä¸ªåº”ç”¨é‡å¤å¯¹æ¥å·¥å…·
class MyAIApp:
    def __init__(self):
        self.github_api = GitHubClient()
        self.jira_api = JiraClient()
        self.slack_api = SlackClient()
        # æ¯ä¸ªåº”ç”¨éƒ½è¦å†™ä¸€é...
```

**è§£å†³æ–¹æ¡ˆï¼šMCPç»Ÿä¸€æ¥å£**

```python
# MCPæ–¹å¼ï¼šä¸€æ¬¡å¼€å‘ï¼Œå¤„å¤„å¯ç”¨
mcp_server = MCPServer()
mcp_server.register_tool("github", github_handler)
# æ‰€æœ‰æ”¯æŒMCPçš„AIåº”ç”¨éƒ½èƒ½è‡ªåŠ¨ä½¿ç”¨
```

**ç—›ç‚¹2ï¼šAIè¾“å‡ºè´¨é‡ä¸ç¨³å®š**

```plaintext
âŒ é—®é¢˜åœºæ™¯ï¼š
ç”¨æˆ·ï¼š"å¸®æˆ‘å†™ä¸€ä¸ªPythonå‡½æ•°"
AIè¾“å‡ºï¼š
- æ²¡æœ‰ç±»å‹æ³¨è§£
- ç¼ºå°‘æ–‡æ¡£å­—ç¬¦ä¸²
- å‘½åé£æ ¼æ··ä¹±
- ä¸ç¬¦åˆPEP 8è§„èŒƒ
```

**è§£å†³æ–¹æ¡ˆï¼šRulesé¢„è®¾è§„èŒƒ**

```markdown
# Pythonç¼–ç Rules
1. å¿…é¡»ä½¿ç”¨ç±»å‹æ³¨è§£ï¼ˆType Hintsï¼‰
2. å‡½æ•°å¿…é¡»åŒ…å«Docstring
3. å˜é‡å‘½åéµå¾ªsnake_case
4. æ¯ä¸ªå‡½æ•°ä¸è¶…è¿‡50è¡Œ
```

**ç—›ç‚¹3ï¼šå¤æ‚å·¥ä½œæµéš¾ä»¥å¤ç”¨**

```plaintext
âŒ æ¯æ¬¡éƒ½è¦é‡å¤æŒ‡å¯¼ï¼š
"å…ˆè°ƒç ”ç«å“ â†’ æ•´ç†æˆè¡¨æ ¼ â†’ ç”ŸæˆSWOTåˆ†æ â†’ è¾“å‡ºPPTæ ¼å¼"
```

**è§£å†³æ–¹æ¡ˆï¼šSkillså°è£…æµç¨‹**

```markdown
# competitive-analysis.skill
name: competitive-analysis
description: ç«å“åˆ†æå·¥ä½œæµ

## æ‰§è¡Œæ­¥éª¤
1. ä½¿ç”¨web_searchæœç´¢ç«å“ä¿¡æ¯
2. æå–å…³é”®æŒ‡æ ‡å¹¶åˆ¶è¡¨
3. ç”ŸæˆSWOTåˆ†æçŸ©é˜µ
4. è¾“å‡ºMarkdownæ ¼å¼æŠ¥å‘Š
```

---

<a name="chapter2"></a>
## äºŒã€Agentï¼šä¼šæ€è€ƒã€èƒ½è¡ŒåŠ¨çš„AIæ™ºèƒ½ä½“

### 2.1 ä»€ä¹ˆæ˜¯AI Agentï¼Ÿ

**æ ¸å¿ƒå®šä¹‰**ï¼š
> AI Agent = å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰+ è§„åˆ’èƒ½åŠ› + å·¥å…·è°ƒç”¨ + è®°å¿†ç³»ç»Ÿ

ç”¨ä¸€ä¸ªç±»æ¯”ç†è§£ï¼š

```plaintext
ä¼ ç»ŸAI â‰ˆ å›¾ä¹¦é¦†ç®¡ç†å‘˜
- åªèƒ½å›ç­”"ä¹¦åœ¨å“ªé‡Œ"
- éœ€è¦ä½ è‡ªå·±å»æ‰¾ä¹¦

AI Agent â‰ˆ ä¸ªäººåŠ©ç†
- ç†è§£ä½ çš„éœ€æ±‚ï¼ˆ"æˆ‘éœ€è¦ç ”ç©¶é‡å­è®¡ç®—"ï¼‰
- è‡ªä¸»è§„åˆ’ï¼ˆå…ˆæ‰¾ç»¼è¿°è®ºæ–‡ â†’ å†æ‰¾æœ€æ–°ç ”ç©¶ â†’ æ•´ç†æˆæŠ¥å‘Šï¼‰
- æ‰§è¡Œæ“ä½œï¼ˆæœç´¢ã€ä¸‹è½½ã€æ•´ç†ã€å†™ä½œï¼‰
- ä¸»åŠ¨æ±‡æŠ¥è¿›å±•
```

### 2.2 Agentçš„æ ¸å¿ƒèƒ½åŠ›

#### èƒ½åŠ›1ï¼šè‡ªä¸»è§„åˆ’ï¼ˆPlanningï¼‰

**ç¤ºä¾‹ï¼šç”¨æˆ·è¯·æ±‚åˆ†è§£**

```python
# ç”¨æˆ·è¾“å…¥
"å¸®æˆ‘åˆ†æGitHubä¸Šæœ€çƒ­é—¨çš„AI Agenté¡¹ç›®"

# Agentå†…éƒ¨è§„åˆ’ï¼ˆReActæ€ç»´é“¾ï¼‰
Thought 1: éœ€è¦è®¿é—®GitHubæœç´¢API
Action 1: è°ƒç”¨MCPå·¥å…· github.search_repos(topic="ai-agent", sort="stars")
Observation 1: è·å¾—Top 10é¡¹ç›®åˆ—è¡¨

Thought 2: éœ€è¦åˆ†ææ¯ä¸ªé¡¹ç›®çš„æŠ€æœ¯æ ˆ
Action 2: å¯¹æ¯ä¸ªé¡¹ç›®è°ƒç”¨ github.get_repo_details()
Observation 2: è·å–READMEã€æŠ€æœ¯æ ˆã€Starè¶‹åŠ¿

Thought 3: æ•´ç†æˆç»“æ„åŒ–æŠ¥å‘Š
Action 3: ç”ŸæˆMarkdownè¡¨æ ¼ + å¯è§†åŒ–å›¾è¡¨
Final Answer: [è¾“å‡ºå®Œæ•´åˆ†ææŠ¥å‘Š]
```

#### èƒ½åŠ›2ï¼šå·¥å…·è°ƒç”¨ï¼ˆTool Useï¼‰

**å·¥å…·ç±»å‹åˆ†ç±»**ï¼š

| å·¥å…·ç±»å‹ | ç¤ºä¾‹ | å®ç°æ–¹å¼ |
|---------|------|---------|
| æ•°æ®æŸ¥è¯¢ | æœç´¢å¼•æ“ã€æ•°æ®åº“ | MCP Server |
| å†…å®¹åˆ›ä½œ | ç”»å›¾ã€è§†é¢‘ç”Ÿæˆ | ä¸“ç”¨API |
| ä»£ç æ‰§è¡Œ | Pythonè§£é‡Šå™¨ | æ²™ç›’ç¯å¢ƒ |
| åŠå…¬åä½œ | Jiraã€Slack | MCP Server |
| æ–‡ä»¶æ“ä½œ | è¯»å†™æ–‡ä»¶ã€Gitæ“ä½œ | æœ¬åœ°å·¥å…· |

**è°ƒç”¨æµç¨‹**ï¼š

```mermaid
graph LR
    A[ç”¨æˆ·è¯·æ±‚] --> B{Agentåˆ†æ}
    B --> C[é€‰æ‹©å·¥å…·]
    C --> D[MCPåè®®]
    D --> E[å·¥å…·æ‰§è¡Œ]
    E --> F[è¿”å›ç»“æœ]
    F --> B
    B --> G[æœ€ç»ˆå›ç­”]
```

#### èƒ½åŠ›3ï¼šé•¿æœŸè®°å¿†ï¼ˆMemoryï¼‰

```python
class AgentMemory:
    def __init__(self):
        self.short_term = []  # å½“å‰å¯¹è¯ä¸Šä¸‹æ–‡
        self.long_term = {}   # æŒä¹…åŒ–çŸ¥è¯†
        self.episodic = []    # å†å²ä»»åŠ¡è®°å½•
    
    def remember_preference(self, key, value):
        """è®°ä½ç”¨æˆ·åå¥½"""
        self.long_term[f"preference.{key}"] = value
    
    def recall_similar_task(self, current_task):
        """æ£€ç´¢ç›¸ä¼¼å†å²ä»»åŠ¡"""
        # å‘é‡ç›¸ä¼¼åº¦æœç´¢
        return self.episodic.search(current_task)
```

**å®é™…åº”ç”¨**ï¼š

```plaintext
ç¬¬1æ¬¡å¯¹è¯ï¼š
ç”¨æˆ·ï¼š"å¸®æˆ‘å†™Pythonä»£ç ï¼Œæˆ‘å–œæ¬¢ç”¨type hints"
Agentï¼š[ç”Ÿæˆå¸¦ç±»å‹æ³¨è§£çš„ä»£ç ] + è®°ä½åå¥½

ç¬¬100æ¬¡å¯¹è¯ï¼š
ç”¨æˆ·ï¼š"å¸®æˆ‘å†™ä¸€ä¸ªæ’åºå‡½æ•°"
Agentï¼š[è‡ªåŠ¨ä½¿ç”¨type hints] âœ¨ å› ä¸ºè®°ä½äº†ä½ çš„ä¹ æƒ¯
```

### 2.3 Agentçš„ä¸¤ç§æ¶æ„æ¨¡å¼

#### æ¨¡å¼1ï¼šReActï¼ˆæ¨ç†+è¡ŒåŠ¨ï¼‰

```python
while not task_completed:
    # æ€è€ƒï¼ˆReasoningï¼‰
    thought = llm.generate(f"å½“å‰çŠ¶æ€: {state}, ä¸‹ä¸€æ­¥è¯¥åšä»€ä¹ˆ?")
    
    # è¡ŒåŠ¨ï¼ˆActingï¼‰
    if "éœ€è¦è°ƒç”¨å·¥å…·" in thought:
        action = parse_action(thought)
        observation = execute_tool(action)
        state.update(observation)
    else:
        final_answer = thought
        break
```

**ä¼˜ç‚¹**ï¼šé€æ˜å¯è§£é‡Šã€æ˜“è°ƒè¯•  
**ç¼ºç‚¹**ï¼šé€Ÿåº¦è¾ƒæ…¢ï¼ˆæ¯æ­¥éƒ½è¦è°ƒç”¨LLMï¼‰

#### æ¨¡å¼2ï¼šPlan-and-Executeï¼ˆè§„åˆ’æ‰§è¡Œï¼‰

```python
# é˜¶æ®µ1ï¼šä¸€æ¬¡æ€§è§„åˆ’
plan = llm.generate(f"ä»»åŠ¡: {task}, è¯·ç”Ÿæˆå®Œæ•´æ‰§è¡Œè®¡åˆ’")
# è¾“å‡ºï¼š["æ­¥éª¤1: æœç´¢èµ„æ–™", "æ­¥éª¤2: æ•°æ®åˆ†æ", "æ­¥éª¤3: ç”ŸæˆæŠ¥å‘Š"]

# é˜¶æ®µ2ï¼šæ‰¹é‡æ‰§è¡Œ
for step in plan:
    result = execute_step(step)
    if result.failed:
        replan()  # å¤±è´¥æ—¶é‡æ–°è§„åˆ’
```

**ä¼˜ç‚¹**ï¼šæ•ˆç‡é«˜ã€æ”¯æŒå¹¶è¡Œ  
**ç¼ºç‚¹**ï¼šçµæ´»æ€§ç¨å·®

---

<a name="chapter3"></a>
## ä¸‰ã€MCPï¼šè¿æ¥AIä¸å¤–éƒ¨ä¸–ç•Œçš„æ ‡å‡†åè®®

### 3.1 MCPçš„è¯ç”ŸèƒŒæ™¯

**é—®é¢˜ï¼šAIå·¥å…·é›†æˆçš„"ç¢ç‰‡åŒ–"**

```plaintext
2023å¹´ä»¥å‰çš„å›°å¢ƒï¼š
- OpenAIæœ‰è‡ªå·±çš„Pluginæ ‡å‡†
- Googleæœ‰è‡ªå·±çš„Extensionæ ‡å‡†
- å¾®è½¯æœ‰Copilot Pluginæ ‡å‡†
- æ¯ä¸ªå¹³å°éƒ½è¦é‡æ–°å¼€å‘ä¸€éå·¥å…· ğŸ˜«
```

**Anthropicçš„è§£å†³æ–¹æ¡ˆï¼šModel Context Protocol (MCP)**

> MCPæ˜¯ä¸€ä¸ªå¼€æ”¾åè®®ï¼Œå®šä¹‰äº†AIæ¨¡å‹ä¸å¤–éƒ¨å·¥å…·/æ•°æ®æºçš„æ ‡å‡†åŒ–äº¤äº’æ–¹å¼ã€‚

**ç±»æ¯”ç†è§£**ï¼š

```plaintext
MCP â‰ˆ USBåè®®
- USBå‡ºç°å‰ï¼šæ¯ä¸ªè®¾å¤‡éƒ½æœ‰ä¸“ç”¨æ¥å£ï¼ˆå¹¶å£ã€ä¸²å£ã€PS/2...ï¼‰
- USBå‡ºç°åï¼šä¸€ä¸ªæ¥å£æ¥å…¥æ‰€æœ‰è®¾å¤‡

MCPå‡ºç°å‰ï¼šæ¯ä¸ªAIåº”ç”¨å¯¹æ¥å·¥å…·éƒ½è¦å†™ä¸“ç”¨ä»£ç 
MCPå‡ºç°åï¼šå¼€å‘ä¸€æ¬¡ï¼Œæ‰€æœ‰MCPå…¼å®¹çš„AIåº”ç”¨éƒ½èƒ½ç”¨
```

### 3.2 MCPåè®®çš„æ ¸å¿ƒæ¦‚å¿µ

#### æ¦‚å¿µ1ï¼šMCP Serverï¼ˆå·¥å…·æä¾›æ–¹ï¼‰

**æ ‡å‡†æ¥å£å®šä¹‰**ï¼š

```python
from mcp import Server, Tool

class GitHubMCPServer(Server):
    def list_tools(self) -> List[Tool]:
        """å£°æ˜æ­¤Serveræä¾›çš„æ‰€æœ‰å·¥å…·"""
        return [
            Tool(
                name="search_repos",
                description="æœç´¢GitHubä»“åº“",
                input_schema={
                    "type": "object",
                    "properties": {
                        "query": {"type": "string"},
                        "sort": {"type": "string", "enum": ["stars", "forks"]}
                    }
                }
            ),
            Tool(name="get_repo_info", ...),
            Tool(name="create_issue", ...)
        ]
    
    def call_tool(self, name: str, arguments: dict):
        """æ‰§è¡Œå…·ä½“å·¥å…·è°ƒç”¨"""
        if name == "search_repos":
            return self.github_api.search(**arguments)
```

#### æ¦‚å¿µ2ï¼šMCP Clientï¼ˆAIåº”ç”¨æ–¹ï¼‰

```python
class AgentWithMCP:
    def __init__(self):
        self.mcp_client = MCPClient()
        # è¿æ¥å¤šä¸ªMCP Server
        self.mcp_client.connect("github", "http://mcp.example.com/github")
        self.mcp_client.connect("jira", "http://mcp.example.com/jira")
    
    def execute_task(self, user_query):
        # 1. LLMå†³ç­–è¦è°ƒç”¨å“ªä¸ªå·¥å…·
        decision = self.llm.plan(user_query, available_tools=self.mcp_client.list_all_tools())
        
        # 2. é€šè¿‡MCPåè®®è°ƒç”¨å·¥å…·
        result = self.mcp_client.call_tool(
            server="github",
            tool="search_repos",
            arguments={"query": "ai-agent", "sort": "stars"}
        )
        
        # 3. å°†ç»“æœè¿”å›ç»™LLMå¤„ç†
        return self.llm.synthesize(result)
```

#### æ¦‚å¿µ3ï¼šä¼ è¾“æ–¹å¼

MCPæ”¯æŒä¸‰ç§ä¼ è¾“åè®®ï¼š

| ä¼ è¾“æ–¹å¼ | ä½¿ç”¨åœºæ™¯ | ç¤ºä¾‹ |
|---------|---------|------|
| **STDIO** | æœ¬åœ°è¿›ç¨‹é€šä¿¡ | `node mcp-server.js` |
| **SSE** (Server-Sent Events) | è¿œç¨‹HTTPæœåŠ¡ | `http://mcp.example.com/sse` |
| **Streamable HTTP** | é«˜æ€§èƒ½è¿œç¨‹è°ƒç”¨ | `http://mcp.example.com/stream` |

**MCPé…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "mcpServers": {
    "local-tool": {
      "command": "python",
      "args": ["-m", "my_mcp_server"],
      "transportType": "stdio"
    },
    "remote-github": {
      "url": "https://mcp.woa.com/github/sse",
      "transportType": "sse",
      "headers": {
        "Authorization": "Bearer <token>"
      }
    }
  }
}
```

### 3.3 MCPçš„æ•°æ®æµ

**å®Œæ•´è°ƒç”¨æµç¨‹**ï¼š

```plaintext
[AI Agent] 
   â†“ (1) å‘èµ·è¯·æ±‚
   â†“ {"method": "tools/list"}
[MCP Client]
   â†“ (2) è½¬å‘è¯·æ±‚
   â†“ HTTP/SSE/STDIO
[MCP Server]
   â†“ (3) è¿”å›å·¥å…·åˆ—è¡¨
   â†“ [{"name": "search", ...}]
[MCP Client]
   â†“ (4) è§£æå¹¶ç¼“å­˜
[AI Agent]
   â†“ (5) LLMå†³ç­–è°ƒç”¨search
   â†“ {"method": "tools/call", "params": {"name": "search", "arguments": {...}}}
[MCP Client]
   â†“ (6) æ‰§è¡Œè°ƒç”¨
[MCP Server]
   â†“ (7) æ‰§è¡Œå®é™…æ“ä½œ
   â†“ {"result": [...]}
[MCP Client]
   â†“ (8) è¿”å›ç»“æœ
[AI Agent]
   â†“ (9) ç”Ÿæˆæœ€ç»ˆå›ç­”
```

**åè®®æ¶ˆæ¯ç¤ºä¾‹**ï¼š

```json
// 1. åˆå§‹åŒ–è¿æ¥
{
  "jsonrpc": "2.0",
  "method": "initialize",
  "params": {
    "protocolVersion": "2024-11-05",
    "capabilities": {}
  }
}

// 2. åˆ—å‡ºå·¥å…·
{
  "jsonrpc": "2.0",
  "method": "tools/list",
  "id": 1
}

// 3. Serverå“åº”
{
  "jsonrpc": "2.0",
  "id": 1,
  "result": {
    "tools": [
      {
        "name": "github_search",
        "description": "æœç´¢GitHubä»“åº“",
        "inputSchema": {
          "type": "object",
          "properties": {
            "query": {"type": "string"}
          },
          "required": ["query"]
        }
      }
    ]
  }
}

// 4. è°ƒç”¨å·¥å…·
{
  "jsonrpc": "2.0",
  "method": "tools/call",
  "id": 2,
  "params": {
    "name": "github_search",
    "arguments": {
      "query": "ai-agent"
    }
  }
}
```

### 3.4 MCPçš„å®æˆ˜ä»·å€¼

#### ä»·å€¼1ï¼šä¸€æ¬¡å¼€å‘ï¼Œå¤šå¤„ä½¿ç”¨

```python
# å¼€å‘ä¸€ä¸ªJira MCP Server
class JiraMCPServer(Server):
    def list_tools(self):
        return [
            Tool("create_issue", ...),
            Tool("list_projects", ...),
            Tool("update_status", ...)
        ]

# ç«‹å³å¯ç”¨äºï¼š
âœ… Claude Desktop
âœ… è‡ªç ”AIåº”ç”¨
âœ… ä»»ä½•æ”¯æŒMCPçš„å¹³å°
```

#### ä»·å€¼2ï¼šå®‰å…¨æ€§

```python
# MCP Serverè¿è¡Œåœ¨æœ¬åœ°/å†…ç½‘
# æ•æ„Ÿæ•°æ®ä¸ç»è¿‡ç¬¬ä¸‰æ–¹AIå¹³å°

[AIåº”ç”¨] <--ä»…ä¼ è¾“å·¥å…·è°ƒç”¨æŒ‡ä»¤--> [æœ¬åœ°MCP Server]
                                        â†“
                                   [è®¿é—®å†…ç½‘æ•°æ®åº“]
```

#### ä»·å€¼3ï¼šå¯ç»„åˆæ€§

```json
{
  "agent": "å…¨èƒ½åŠ©æ‰‹",
  "mcp_servers": [
    "github",      // ä»£ç ç®¡ç†
    "jira",        // é¡¹ç›®ç®¡ç†
    "slack",       // æ²Ÿé€šåä½œ
    "notion",      // æ–‡æ¡£ç®¡ç†
    "database"     // æ•°æ®æŸ¥è¯¢
  ]
}
// Agentå¯è‡ªä¸»ç»„åˆè¿™äº›å·¥å…·å®Œæˆå¤æ‚ä»»åŠ¡
```

---


<a name="chapter4"></a>
## å››ã€Rulesï¼šè®©AIè¾“å‡ºç¬¦åˆä½ çš„è§„èŒƒ

### 4.1 ä¸ºä»€ä¹ˆéœ€è¦Rulesï¼Ÿ

**é—®é¢˜åœºæ™¯**ï¼š

```plaintext
âŒ æ— Rulesçš„æ··ä¹±ç°çŠ¶

ç”¨æˆ·1ï¼š"å¸®æˆ‘å†™Pythonä»£ç "
AIï¼š[ç”Ÿæˆæ²¡æœ‰ç±»å‹æ³¨è§£çš„ä»£ç ]

ç”¨æˆ·2ï¼š"å¸®æˆ‘å†™Pythonä»£ç "  
AIï¼š[ç”Ÿæˆæœ‰ç±»å‹æ³¨è§£ä½†æ²¡æœ‰æ–‡æ¡£çš„ä»£ç ]

ç”¨æˆ·3ï¼š"å¸®æˆ‘å†™Pythonä»£ç "
AIï¼š[ç”Ÿæˆé£æ ¼å®Œå…¨ä¸åŒçš„ä»£ç ]

ç»“æœï¼šå›¢é˜Ÿä»£ç é£æ ¼æ··ä¹±ï¼Œç»´æŠ¤æˆæœ¬é«˜
```

```plaintext
âœ… ä½¿ç”¨Rulesåçš„ä¸€è‡´æ€§

æ‰€æœ‰ç”¨æˆ· + Pythonç¼–ç Rules
AIï¼š[ç»Ÿä¸€ç”Ÿæˆç¬¦åˆè§„èŒƒçš„ä»£ç ]
- å¿…æœ‰ç±»å‹æ³¨è§£
- å¿…æœ‰Docstring
- ç»Ÿä¸€å‘½åé£æ ¼
- ç»Ÿä¸€ç¼©è¿›è§„åˆ™
```

### 4.2 Rulesçš„æœ¬è´¨

**æ ¸å¿ƒå®šä¹‰**ï¼š
> Rules = ç”¨æˆ·è‡ªå®šä¹‰çš„çº¦æŸæ¡ä»¶ï¼Œç”¨äºè§„èŒƒAIçš„è¾“å‡ºè¡Œä¸º

**ä¸Promptçš„åŒºåˆ«**ï¼š

| ç»´åº¦ | System Prompt | Rules |
|------|---------------|-------|
| **ä½œç”¨åŸŸ** | å…¨å±€ç”Ÿæ•ˆ | æŒ‰éœ€åŠ è½½ |
| **ä¿®æ”¹æƒé™** | Agentåˆ›å»ºè€… | Agentä½¿ç”¨è€… |
| **å…¸å‹å†…å®¹** | è§’è‰²å®šä¹‰ã€åŸºæœ¬èƒ½åŠ› | å…·ä½“è§„èŒƒã€åå¥½è®¾ç½® |
| **ç¤ºä¾‹** | "ä½ æ˜¯ä¸€ä¸ªPythonä¸“å®¶" | "ä»£ç å¿…é¡»ç¬¦åˆPEP 8" |

**ç±»æ¯”ç†è§£**ï¼š

```plaintext
System Prompt = å…¬å¸è§„ç« åˆ¶åº¦ï¼ˆæ‰€æœ‰å‘˜å·¥éµå®ˆï¼‰
Rules = éƒ¨é—¨å·¥ä½œæ‰‹å†Œï¼ˆæœ¬éƒ¨é—¨ç‰¹æœ‰è§„èŒƒï¼‰

ç¤ºä¾‹ï¼š
System Prompt: "ä½ æ˜¯ä¸€ä¸ªç¼–ç¨‹åŠ©æ‰‹ï¼Œå¸®ç”¨æˆ·å†™ä»£ç "
Pythonå›¢é˜ŸRules: "å¿…é¡»ä½¿ç”¨type hints + blackæ ¼å¼åŒ–"
å‰ç«¯å›¢é˜ŸRules: "å¿…é¡»ä½¿ç”¨ESLint + Prettier"
```

### 4.3 Rulesçš„åº”ç”¨åœºæ™¯

#### åœºæ™¯1ï¼šç¼–ç è§„èŒƒç»Ÿä¸€

```markdown
# Pythonç¼–ç Rules

## 1. ç±»å‹æ³¨è§£
æ‰€æœ‰å‡½æ•°å¿…é¡»åŒ…å«å‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹æ³¨è§£

## 2. æ–‡æ¡£å­—ç¬¦ä¸²
æ ¼å¼ï¼šGoogle Style Docstring
å¿…é¡»åŒ…å«ï¼šç®€ä»‹ã€å‚æ•°è¯´æ˜ã€è¿”å›å€¼è¯´æ˜ã€å¼‚å¸¸è¯´æ˜

## 3. å‘½åè§„èŒƒ
- å˜é‡/å‡½æ•°ï¼šsnake_case
- ç±»åï¼šPascalCase
- å¸¸é‡ï¼šUPPER_SNAKE_CASE
- ç§æœ‰æˆå‘˜ï¼š_leading_underscore

## 4. ä»£ç ç»„ç»‡
- æ¯ä¸ªå‡½æ•°ä¸è¶…è¿‡50è¡Œ
- æ¯ä¸ªæ–‡ä»¶ä¸è¶…è¿‡500è¡Œ
- å¯¼å…¥è¯­å¥æŒ‰stdlib â†’ ç¬¬ä¸‰æ–¹ â†’ æœ¬åœ°é¡ºåºæ’åˆ—

## 5. ç¦æ­¢äº‹é¡¹
âŒ ä¸ä½¿ç”¨eval()ã€exec()
âŒ ä¸ä½¿ç”¨å¯å˜é»˜è®¤å‚æ•°
âŒ ä¸ä½¿ç”¨from module import *

## 6. ç¤ºä¾‹
âœ… æ­£ç¡®ç¤ºä¾‹ï¼š
```python
def calculate_average(numbers: List[float]) -> float:
    """è®¡ç®—æ•°å­—åˆ—è¡¨çš„å¹³å‡å€¼ã€‚
    
    Args:
        numbers: æ•°å­—åˆ—è¡¨ï¼Œå¿…é¡»éç©º
        
    Returns:
        å¹³å‡å€¼
        
    Raises:
        ValueError: å½“åˆ—è¡¨ä¸ºç©ºæ—¶
    """
    if not numbers:
        raise ValueError("åˆ—è¡¨ä¸èƒ½ä¸ºç©º")
    return sum(numbers) / len(numbers)
```

âŒ é”™è¯¯ç¤ºä¾‹ï¼š
```python
def calc(nums):  # ç¼ºå°‘ç±»å‹æ³¨è§£å’Œæ–‡æ¡£
    return sum(nums)/len(nums)  # æ²¡æœ‰å¼‚å¸¸å¤„ç†
```

#### åœºæ™¯2ï¼šå†…å®¹ç”Ÿæˆè§„èŒƒ

```markdown
# æŠ€æœ¯åšå®¢å†™ä½œRules

## ç»“æ„è¦æ±‚
1. å¿…é¡»åŒ…å«ï¼šæ ‡é¢˜ã€å¯¼è¯»ã€ç›®å½•ã€æ­£æ–‡ã€æ€»ç»“
2. æ¯ä¸ªç« èŠ‚å¿…é¡»æœ‰2-3çº§å­æ ‡é¢˜
3. æ–‡ç« é•¿åº¦ï¼š3000-5000å­—

## è¯­è¨€é£æ ¼
- ä½¿ç”¨ç¬¬äºŒäººç§°ï¼ˆ"ä½ "ï¼‰æ‹‰è¿‘è·ç¦»
- é¿å…è¿‡åº¦ä½¿ç”¨ä¸“ä¸šæœ¯è¯­
- æ¯ä¸ªæŠ€æœ¯æ¦‚å¿µå¿…é¡»é…æœ‰é€šä¿—æ¯”å–»
- ç¦æ­¢ä½¿ç”¨"æ˜¾è€Œæ˜“è§"ã€"ä¼—æ‰€å‘¨çŸ¥"ç­‰è¡¨è¾¾

## æ ¼å¼è§„èŒƒ
- ä»£ç å—å¿…é¡»æ ‡æ³¨è¯­è¨€ç±»å‹
- é‡è¦æ¦‚å¿µä½¿ç”¨**åŠ ç²—**
- å…³é”®å‘½ä»¤ä½¿ç”¨`ä»£ç æ ‡è®°`
- æ¯ä¸ªç« èŠ‚è‡³å°‘åŒ…å«ä¸€ä¸ªç¤ºä¾‹

## é™AIå‘³è¦æ±‚
âŒ é¿å…ä½¿ç”¨ï¼š
- "åœ¨å½“ä»Šç¤¾ä¼š"ã€"éšç€...çš„å‘å±•"
- "å€¼å¾—æ³¨æ„çš„æ˜¯"ã€"éœ€è¦å¼ºè°ƒçš„æ˜¯"
- "ç»¼ä¸Šæ‰€è¿°"ã€"æ€»è€Œè¨€ä¹‹"
- è¿‡åº¦ä½¿ç”¨emoji

âœ… æ¨èä½¿ç”¨ï¼š
- ç›´æ¥é™ˆè¿°äº‹å®
- å…·ä½“æ•°æ®æ”¯æ’‘è§‚ç‚¹
- çœŸå®æ¡ˆä¾‹è¯´æ˜
- è‡ªç„¶çš„å£è¯­åŒ–è¡¨è¾¾

## ç¤ºä¾‹å¯¹æ¯”
âŒ AIå‘³æµ“é‡ï¼š
"éšç€äººå·¥æ™ºèƒ½æŠ€æœ¯çš„é£é€Ÿå‘å±•ï¼ŒAI Agentå·²ç»æˆä¸ºå½“ä¸‹æœ€çƒ­é—¨çš„æŠ€æœ¯è¶‹åŠ¿ä¹‹ä¸€ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ
MCPåè®®çš„å‡ºç°ï¼Œä¸ºAIç”Ÿæ€ç³»ç»Ÿå¸¦æ¥äº†é©å‘½æ€§çš„å˜åŒ–ã€‚ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®º..."

âœ… è‡ªç„¶è¡¨è¾¾ï¼š
"2024å¹´ï¼ŒAI Agentä»æ¦‚å¿µå˜æˆäº†å®é™…äº§å“ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºMCPè§£å†³äº†å·¥å…·æ¥å…¥æ··ä¹±çš„é—®é¢˜â€”â€”
å°±åƒUSBç»Ÿä¸€äº†ç”µè„‘æ¥å£ä¸€æ ·ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•åšåˆ°çš„..."
```

#### åœºæ™¯3ï¼šä¸šåŠ¡æµç¨‹è§„èŒƒ

```markdown
# å®¢æœå¯¹è¯Rules

## å›å¤æ¨¡æ¿
1. é—®å€™ï¼šç§°å‘¼ç”¨æˆ·æ˜µç§°
2. ç†è§£ç¡®è®¤ï¼šå¤è¿°ç”¨æˆ·é—®é¢˜
3. è§£å†³æ–¹æ¡ˆï¼šæä¾›2-3ä¸ªé€‰é¡¹
4. ç»“æŸè¯­ï¼šè¯¢é—®æ˜¯å¦è¿˜æœ‰å…¶ä»–é—®é¢˜

## ç¦æ­¢è¡Œä¸º
âŒ ç›´æ¥è¯´"ä¸èƒ½"ã€"ä¸å¯ä»¥"
âœ… æ”¹ä¸º"ç›®å‰æˆ‘ä»¬æ”¯æŒ...ï¼Œæ‚¨ä¹Ÿå¯ä»¥å°è¯•..."

âŒ ä½¿ç”¨ä¸“ä¸šæœ¯è¯­
âœ… ç”¨é€šä¿—è¯­è¨€è§£é‡Š

âŒ å†·å†°å†°çš„å®˜æ–¹å›å¤
âœ… æ·»åŠ é€‚å½“emojiï¼Œå±•ç°äº²å’ŒåŠ›

## å¼‚å¸¸å¤„ç†
- æ— æ³•è§£ç­”æ—¶ï¼šå¼•å¯¼è½¬äººå·¥å®¢æœ
- ç”¨æˆ·æƒ…ç»ªæ¿€åŠ¨ï¼šå…ˆå®‰æŠšæƒ…ç»ªå†è§£å†³é—®é¢˜
- æ¶‰åŠæ•æ„Ÿä¿¡æ¯ï¼šä¸¥æ ¼æŒ‰éšç§æ”¿ç­–æ‰§è¡Œ

## ç¤ºä¾‹
ç”¨æˆ·ï¼š"ä¸ºä»€ä¹ˆæˆ‘çš„è®¢å•è¿˜æ²¡å‘è´§ï¼Ÿ"

âŒ é”™è¯¯å›å¤ï¼š
"æ‚¨çš„è®¢å•æ­£åœ¨å¤„ç†ä¸­ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚"

âœ… æ­£ç¡®å›å¤ï¼š
"æå…ˆç”Ÿï¼Œæ‚¨å¥½ï¼æˆ‘çœ‹åˆ°æ‚¨çš„è®¢å•123456ç¡®å®è¿˜æœªå‘è´§ğŸ˜Š

ç›®å‰æƒ…å†µæ˜¯ï¼š
1ï¸âƒ£ æ‚¨çš„å•†å“å·²é€šè¿‡è´¨æ£€
2ï¸âƒ£ é¢„è®¡ä»Šå¤©ä¸‹åˆ3ç‚¹å‰æ‰“åŒ…å®Œæˆ
3ï¸âƒ£ æ˜å¤©ä¸Šåˆ10ç‚¹å‰ä¼šé€åˆ°æ‚¨æ‰‹ä¸Š

æˆ‘å·²å¸®æ‚¨åŠ æ€¥å¤‡æ³¨ï¼Œå¦‚æœæ˜å¤©ä¸­åˆå‰è¿˜æœªæ”¶åˆ°ï¼Œè¯·ç›´æ¥è”ç³»æˆ‘å“¦ï¼

è¿˜æœ‰å…¶ä»–é—®é¢˜å—ï¼Ÿ"
```

### 4.4 Rulesçš„æŠ€æœ¯å®ç°

#### Rulesé…ç½®ç¤ºä¾‹

```json
{
  "agent_id": "code_assistant",
  "rules": [
    {
      "id": "python_standards",
      "content": "[ä¸Šè¿°Pythonç¼–ç è§„èŒƒ]",
      "enabled": true,
      "priority": 2
    },
    {
      "id": "security_check",
      "content": "ç¦æ­¢ç”ŸæˆåŒ…å«ç¡¬ç¼–ç å¯†é’¥çš„ä»£ç ",
      "enabled": true,
      "priority": 1
    }
  ]
}
```

#### Rulesçš„ä¼˜å…ˆçº§

```plaintext
ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š
1. ç”¨æˆ·å½“å‰å¯¹è¯çš„ä¸´æ—¶æŒ‡ä»¤
2. Rulesï¼ˆç”¨æˆ·è‡ªå®šä¹‰è§„èŒƒï¼‰
3. System Promptï¼ˆAgentåŸºç¡€è®¾å®šï¼‰
4. æ¨¡å‹é»˜è®¤è¡Œä¸º
```

**ç¤ºä¾‹å†²çªå¤„ç†**ï¼š

```plaintext
System Prompt: "å°½é‡ç®€æ´å›ç­”"
Rules: "æ¯ä¸ªå‡½æ•°å¿…é¡»åŒ…å«è¯¦ç»†æ–‡æ¡£"
ç”¨æˆ·æŒ‡ä»¤: "å†™ä¸€ä¸ªæ’åºå‡½æ•°"

æœ€ç»ˆç»“æœï¼š
âœ… å‡½æ•°æœ¬èº«ç®€æ´ï¼ˆéµå¾ªSystem Promptï¼‰
âœ… ä½†åŒ…å«å®Œæ•´æ–‡æ¡£ï¼ˆéµå¾ªRulesï¼‰
âœ… é’ˆå¯¹ç”¨æˆ·å…·ä½“éœ€æ±‚ï¼ˆéµå¾ªç”¨æˆ·æŒ‡ä»¤ï¼‰
```

### 4.5 ç¼–å†™é«˜è´¨é‡Rulesçš„æŠ€å·§

#### æŠ€å·§1ï¼šä½¿ç”¨æ­£åç¤ºä¾‹

```markdown
âŒ æ¨¡ç³Šè§„åˆ™ï¼š
"ä»£ç è¦æ¸…æ™°æ˜“è¯»"

âœ… å…·ä½“è§„åˆ™ï¼š
"ç¦æ­¢åµŒå¥—è¶…è¿‡3å±‚çš„ifè¯­å¥"

## ç¤ºä¾‹
âŒ éš¾ä»¥ç»´æŠ¤çš„ä»£ç ï¼š
if condition1:
    if condition2:
        if condition3:
            if condition4:
                return "å¤ªæ·±äº†ï¼"

âœ… é‡æ„åçš„ä»£ç ï¼š
def check_conditions():
    if not condition1:
        return False
    if not condition2:
        return False
    if not condition3:
        return False
    return condition4
```

#### æŠ€å·§2ï¼šåˆ†å±‚ç»„ç»‡Rules

```markdown
# Ruleså±‚çº§ç»“æ„

## ğŸ”´ å¼ºåˆ¶è§„åˆ™ï¼ˆMandatoryï¼‰
è¿ååˆ™è¾“å‡ºæ— æ•ˆ
- å¿…é¡»åŒ…å«ç±»å‹æ³¨è§£
- ç¦æ­¢ä½¿ç”¨eval()

## ğŸŸ¡ æ¨èè§„åˆ™ï¼ˆRecommendedï¼‰
å°½é‡éµå®ˆ
- å‡½æ•°é•¿åº¦æ§åˆ¶åœ¨50è¡Œå†…
- ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼æ›¿ä»£ç®€å•å¾ªç¯

## ğŸŸ¢ é£æ ¼è§„åˆ™ï¼ˆStylisticï¼‰
å¯çµæ´»è°ƒæ•´
- å•å¼•å· vs åŒå¼•å·
- è¡Œæœ«æ˜¯å¦åŠ é€—å·
```

#### æŠ€å·§3ï¼šRuleså¯ç»´æŠ¤æ€§

```markdown
# Rulesç‰ˆæœ¬ç®¡ç†

## Version 1.0 (2024-01-01)
- åˆå§‹ç‰ˆæœ¬

## Version 1.1 (2024-02-01)
### Added
- æ–°å¢å¼‚å¸¸å¤„ç†è§„èŒƒ

### Changed
- å‡½æ•°é•¿åº¦é™åˆ¶ä»100è¡Œæ”¹ä¸º50è¡Œ

### Deprecated
- ä¸å†æ¨èä½¿ç”¨ç±»å‹æ³¨é‡Šåœ¨æ³¨é‡Šä¸­ï¼ˆæ”¹ç”¨type hintsï¼‰
```

---

<a name="chapter5"></a>
## äº”ã€Skillsï¼šå¯å¤ç”¨çš„å·¥ä½œæµçŸ¥è¯†åŒ…

### 5.1 ä»€ä¹ˆæ˜¯Skillsï¼Ÿ

**æ ¸å¿ƒå®šä¹‰**ï¼š
> Skills = ç‰¹å®šé¢†åŸŸçš„ä¸“ä¸šå·¥ä½œæµç¨‹ + æ”¯æŒæ–‡ä»¶ï¼ˆè„šæœ¬/æ¨¡æ¿ï¼‰ + ä½¿ç”¨è¯´æ˜

**ç±»æ¯”ç†è§£**ï¼š

```plaintext
Skills â‰ˆ æ‰‹æœºAPP
- ä¸€ä¸ªAPPè§£å†³ä¸€ç±»é—®é¢˜ï¼ˆä¿®å›¾/å¯¼èˆª/æ”¯ä»˜ï¼‰
- ç”¨æ—¶æ‰æ‰“å¼€ï¼Œä¸å ç”¨åå°èµ„æº
- å¯ä»¥ç»„åˆä½¿ç”¨å¤šä¸ªAPPå®Œæˆå¤æ‚ä»»åŠ¡

ä¼ ç»ŸAI â‰ˆ åŠŸèƒ½æœº
- æ‰€æœ‰åŠŸèƒ½å¡åœ¨ç³»ç»Ÿé‡Œ
- å¼€æœºå°±åŠ è½½å…¨éƒ¨åŠŸèƒ½ï¼ˆæµªè´¹èµ„æºï¼‰
- æ— æ³•æ‰©å±•æ–°åŠŸèƒ½
```

### 5.2 Skillsçš„æ ¸å¿ƒä»·å€¼

#### ä»·å€¼1ï¼šæŒ‰éœ€åŠ è½½ï¼Œä¸å¢åŠ ä¸Šä¸‹æ–‡è´Ÿæ‹…

**é—®é¢˜èƒŒæ™¯**ï¼š

```plaintext
AIçš„"æ³¨æ„åŠ›"æœ‰é™ï¼ˆå—ä¸Šä¸‹æ–‡çª—å£é™åˆ¶ï¼‰

å¦‚æœæŠŠæ‰€æœ‰èƒ½åŠ›éƒ½å†™åœ¨System Prompté‡Œï¼š
- 80K tokenä¸Šä¸‹æ–‡çª—å£
- å„ç§ä¸“ä¸šèƒ½åŠ›è¯´æ˜å ç”¨ 50K tokens
- åªå‰©30K tokenså¤„ç†å®é™…ä»»åŠ¡
- è€Œä¸”90%çš„èƒ½åŠ›å½“å‰ä»»åŠ¡ç”¨ä¸åˆ° âŒ
```

**Skillsè§£å†³æ–¹æ¡ˆ**ï¼š

```plaintext
System Promptï¼ˆç²¾ç®€ï¼‰ï¼š5K tokens
   â†“
ç”¨æˆ·æé—®ï¼š"å¸®æˆ‘åšPDFå¤„ç†"
   â†“
Agentè‡ªåŠ¨è¯†åˆ«éœ€è¦PDFæŠ€èƒ½
   â†“
åŠ¨æ€åŠ è½½ pdf.skillï¼ˆ15K tokensï¼‰
   â†“
æ‰§è¡Œä»»åŠ¡ï¼ˆå‰©ä½™60K tokenså¯ç”¨ï¼‰ âœ…
```

#### ä»·å€¼2ï¼šä¸“ä¸šçŸ¥è¯†å°è£…

**ç¤ºä¾‹ï¼šç«å“åˆ†æSkill**

```markdown
---
name: competitive-analysis
description: ç³»ç»ŸåŒ–æ‰§è¡Œç«å“åˆ†æï¼Œè¾“å‡ºä¸“ä¸šåˆ†ææŠ¥å‘Š
---

# ç«å“åˆ†æå·¥ä½œæµ

## æ‰§è¡Œæ­¥éª¤

### é˜¶æ®µ1ï¼šç¡®è®¤åˆ†æç›®æ ‡
è¯¢é—®ç”¨æˆ·ï¼š
1. ä½ çš„äº§å“æ˜¯ä»€ä¹ˆï¼Ÿ
2. ä¸»è¦ç«å“æœ‰å“ªäº›ï¼Ÿï¼ˆå¦‚ä¸æ¸…æ¥šï¼Œæˆ‘æ¥å¸®ä½ æ‰¾ï¼‰
3. é‡ç‚¹å…³æ³¨å“ªäº›ç»´åº¦ï¼Ÿï¼ˆåŠŸèƒ½/ä»·æ ¼/å¸‚åœº/æŠ€æœ¯ï¼‰

### é˜¶æ®µ2ï¼šæ•°æ®é‡‡é›†
ä½¿ç”¨å·¥å…·ï¼š
- web_search: æœç´¢ç«å“å®˜ç½‘ã€äº§å“ä»‹ç»
- github_search: æŸ¥æ‰¾å¼€æºç«å“çš„æŠ€æœ¯æ ˆ
- app_store_api: è·å–ç§»åŠ¨åº”ç”¨çš„è¯„åˆ†å’Œè¯„è®º

é‡‡é›†å†…å®¹ï¼š
- äº§å“å®šä½å’Œslogan
- æ ¸å¿ƒåŠŸèƒ½åˆ—è¡¨
- å®šä»·ç­–ç•¥
- ç”¨æˆ·è¯„ä»·ï¼ˆæå–é«˜é¢‘è¯ï¼‰
- æŠ€æœ¯æ¶æ„ï¼ˆå¦‚å¼€æºï¼‰
- å›¢é˜ŸèƒŒæ™¯

### é˜¶æ®µ3ï¼šç»“æ„åŒ–æ•´ç†
ç”Ÿæˆå¯¹æ¯”è¡¨æ ¼ï¼š

| ç»´åº¦ | æˆ‘æ–¹äº§å“ | ç«å“A | ç«å“B | ç«å“C |
|------|---------|-------|-------|-------|
| ç›®æ ‡ç”¨æˆ· | | | | |
| æ ¸å¿ƒåŠŸèƒ½ | | | | |
| å®šä»· | | | | |
| æŠ€æœ¯æ ˆ | | | | |
| ä¼˜åŠ¿ | | | | |
| åŠ£åŠ¿ | | | | |

### é˜¶æ®µ4ï¼šSWOTåˆ†æ
åŸºäºå¯¹æ¯”è¡¨æ ¼ï¼Œç”ŸæˆSWOTçŸ©é˜µï¼š

**Strengthsï¼ˆä¼˜åŠ¿ï¼‰**
- [åˆ—å‡ºæˆ‘æ–¹äº§å“çš„ç‹¬ç‰¹ä¼˜åŠ¿]

**Weaknessesï¼ˆåŠ£åŠ¿ï¼‰**
- [åˆ—å‡ºç›¸æ¯”ç«å“çš„ä¸è¶³]

**Opportunitiesï¼ˆæœºä¼šï¼‰**
- [ç«å“æœªè¦†ç›–çš„å¸‚åœºç©ºç™½]
- [ç”¨æˆ·ç—›ç‚¹æœªè¢«æ»¡è¶³çš„åœ°æ–¹]

**Threatsï¼ˆå¨èƒï¼‰**
- [ç«å“çš„å¼ºåŠ¿é¢†åŸŸ]
- [å¸‚åœºå˜åŒ–è¶‹åŠ¿]

### é˜¶æ®µ5ï¼šç”ŸæˆæŠ¥å‘Š
è¾“å‡ºæ ¼å¼ï¼š

```markdown
# XXäº§å“ç«å“åˆ†ææŠ¥å‘Š

## æ‰§è¡Œæ‘˜è¦
[3-5å¥è¯æ€»ç»“æ ¸å¿ƒå‘ç°]

## å¸‚åœºæ¦‚è§ˆ
[è¡Œä¸šç°çŠ¶ã€å¸‚åœºè§„æ¨¡ã€å¢é•¿è¶‹åŠ¿]

## ç«å“å¯¹æ¯”
[å¯¹æ¯”è¡¨æ ¼]

## SWOTåˆ†æ
[è¯¦ç»†åˆ†æçŸ©é˜µ]

## æˆ˜ç•¥å»ºè®®
1. çŸ­æœŸè¡ŒåŠ¨ï¼ˆ0-3ä¸ªæœˆï¼‰
2. ä¸­æœŸè§„åˆ’ï¼ˆ3-12ä¸ªæœˆï¼‰
3. é•¿æœŸæ„¿æ™¯ï¼ˆ1-3å¹´ï¼‰

## é™„å½•
- æ•°æ®æ¥æº
- è¯¦ç»†åŠŸèƒ½å¯¹æ¯”
```

## æ³¨æ„äº‹é¡¹
1. æ•°æ®é‡‡é›†å¤±è´¥æ—¶ï¼Œæç¤ºç”¨æˆ·æ‰‹åŠ¨æä¾›
2. å¦‚æœç«å“è¶…è¿‡5ä¸ªï¼Œå»ºè®®èšç„¦Top 3
3. æŠ¥å‘Šç”Ÿæˆåè¯¢é—®æ˜¯å¦éœ€è¦å¯¼å‡ºä¸ºPPTæ ¼å¼
```

#### ä»·å€¼3ï¼šå›¢é˜Ÿåä½œä¸å¤ç”¨

```plaintext
åœºæ™¯ï¼šæŸå…¬å¸çš„AIä½¿ç”¨è§„èŒƒ

1. äº§å“å›¢é˜Ÿåˆ›å»º "äº§å“PRDæ’°å†™" Skill
2. å¼€å‘å›¢é˜Ÿåˆ›å»º "ä»£ç å®¡æŸ¥" Skill
3. è¿è¥å›¢é˜Ÿåˆ›å»º "æ•°æ®åˆ†ææŠ¥å‘Š" Skill

å…±äº«æ–¹å¼ï¼š
- ä¸Šä¼ åˆ°GitHubç­‰ä»£ç ä»“åº“
- å‘å¸ƒåˆ°Skillå¸‚åœºï¼ˆå¦‚Claude Skillsï¼‰
- å›¢é˜Ÿæˆå‘˜é€šè¿‡é…ç½®æ–‡ä»¶å¯¼å…¥
- ä¿è¯å…¨å…¬å¸çš„AIè¾“å‡ºæ ‡å‡†ç»Ÿä¸€
```

### 5.3 Skillsçš„æ–‡ä»¶ç»“æ„

```plaintext
competitive-analysis/
â”œâ”€â”€ SKILL.md              # ä¸»æ–‡ä»¶ï¼ˆå¿…é¡»ï¼‰
â”œâ”€â”€ template.md           # æŠ¥å‘Šæ¨¡æ¿ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ data_sources.json     # æ•°æ®æºé…ç½®ï¼ˆå¯é€‰ï¼‰
â””â”€â”€ scripts/              # è¾…åŠ©è„šæœ¬ï¼ˆå¯é€‰ï¼‰
    â””â”€â”€ parse_reviews.py
```

**SKILL.mdè§„èŒƒï¼ˆFrontmatterï¼‰**ï¼š

```markdown
---
name: competitive-analysis
description: ç³»ç»ŸåŒ–æ‰§è¡Œç«å“åˆ†æï¼Œé€‚ç”¨äºäº§å“ç»ç†å’Œå¸‚åœºäººå‘˜
license: MIT
metadata:
  author: your-company
  version: "2.0"
  category: business-analysis
compatibility: éœ€è¦web_searchå’Œgithub_searchå·¥å…·
allowed-tools: web_search github_search
---

[åç»­æ˜¯å·¥ä½œæµè¯¦ç»†è¯´æ˜]
```

### 5.4 Skills vs MCP vs Rules å¯¹æ¯”

| ç»´åº¦ | Skills | MCP | Rules |
|------|--------|-----|-------|
| **æ ¸å¿ƒä½œç”¨** | å·¥ä½œæµå°è£… | å·¥å…·æ¥å…¥ | è¾“å‡ºè§„èŒƒ |
| **åŠ è½½æ—¶æœº** | ä»»åŠ¡éœ€è¦æ—¶ | å¯åŠ¨æ—¶è¿æ¥ | æ¯æ¬¡ç”Ÿæˆæ—¶åº”ç”¨ |
| **åŒ…å«å†…å®¹** | æµç¨‹è¯´æ˜+æ–‡ä»¶ | APIæ¥å£å®šä¹‰ | çº¦æŸæ¡ä»¶ |
| **å…¸å‹ç¤ºä¾‹** | "ç«å“åˆ†ææµç¨‹" | "GitHub API" | "ä»£ç å¿…é¡»æœ‰æ³¨è§£" |
| **ä¿®æ”¹éš¾åº¦** | ç®€å•ï¼ˆçº¯æ–‡æœ¬ï¼‰ | ä¸­ç­‰ï¼ˆéœ€å†™ä»£ç ï¼‰ | ç®€å•ï¼ˆçº¯æ–‡æœ¬ï¼‰ |
| **å¤ç”¨æ€§** | è·¨åœºæ™¯å¤ç”¨æµç¨‹ | è·¨åº”ç”¨å¤ç”¨å·¥å…· | è·¨é¡¹ç›®å¤ç”¨è§„èŒƒ |

**ååŒå·¥ä½œç¤ºä¾‹**ï¼š

```plaintext
ä»»åŠ¡ï¼š"åˆ†æGitHubä¸Šçš„AI Agenté¡¹ç›®å¹¶ç”ŸæˆæŠ¥å‘Š"

1. Agentè¯†åˆ«éœ€è¦ "é¡¹ç›®åˆ†æ" Skill â† Skills
2. Skillè°ƒç”¨ github_search å·¥å…· â† é€šè¿‡MCP
3. ç”Ÿæˆçš„æŠ¥å‘Šå¿…é¡»ç¬¦åˆå…¬å¸æ¨¡æ¿ â† Rulesçº¦æŸ
```


### 5.5 åˆ›å»ºè‡ªå®šä¹‰Skillå®æˆ˜

**ç¤ºä¾‹ï¼šåˆ›å»º"ä»£ç å®¡æŸ¥"Skill**

```markdown
---
name: code-review
description: æ‰§è¡Œä¸“ä¸šä»£ç å®¡æŸ¥ï¼Œæ£€æŸ¥è´¨é‡ã€å®‰å…¨ã€æ€§èƒ½é—®é¢˜
version: "1.0"
allowed-tools: read_file grep_search
---

# ä»£ç å®¡æŸ¥Skill

## å®¡æŸ¥æµç¨‹

### æ­¥éª¤1ï¼šç†è§£ä¸Šä¸‹æ–‡
è¯¢é—®ç”¨æˆ·ï¼š
- è¦å®¡æŸ¥çš„æ–‡ä»¶/ç›®å½•è·¯å¾„
- ç¼–ç¨‹è¯­è¨€
- é‡ç‚¹å…³æ³¨çš„æ–¹é¢ï¼ˆæ€§èƒ½/å®‰å…¨/å¯ç»´æŠ¤æ€§ï¼‰

### æ­¥éª¤2ï¼šä»£ç æ‰«æ
ä½¿ç”¨å·¥å…·ï¼š
- read_file: è¯»å–ä»£ç æ–‡ä»¶
- grep_search: æœç´¢æ½œåœ¨é—®é¢˜æ¨¡å¼

æ£€æŸ¥é¡¹ï¼š
1. âš ï¸ å®‰å…¨æ¼æ´
   - SQLæ³¨å…¥é£é™©ï¼ˆæ‹¼æ¥SQLè¯­å¥ï¼‰
   - XSSé£é™©ï¼ˆæœªè½¬ä¹‰çš„ç”¨æˆ·è¾“å…¥ï¼‰
   - ç¡¬ç¼–ç å¯†é’¥
   - ä¸å®‰å…¨çš„éšæœºæ•°ç”Ÿæˆ

2. ğŸ› Bugéšæ‚£
   - ç©ºæŒ‡é’ˆå¼•ç”¨
   - æ•°ç»„è¶Šç•Œ
   - èµ„æºæœªé‡Šæ”¾
   - å¼‚å¸¸æœªå¤„ç†

3. âš¡ æ€§èƒ½é—®é¢˜
   - N+1æŸ¥è¯¢
   - å¾ªç¯ä¸­çš„é‡å¤è®¡ç®—
   - ä¸å¿…è¦çš„æ·±æ‹·è´
   - é˜»å¡IOæ“ä½œ

4. ğŸ“– å¯ç»´æŠ¤æ€§
   - å‡½æ•°è¿‡é•¿ï¼ˆ>50è¡Œï¼‰
   - åµŒå¥—è¿‡æ·±ï¼ˆ>3å±‚ï¼‰
   - é‡å¤ä»£ç 
   - ç¼ºå°‘æ³¨é‡Š

### æ­¥éª¤3ï¼šç”ŸæˆæŠ¥å‘Š

```markdown
# ä»£ç å®¡æŸ¥æŠ¥å‘Š

## å®¡æŸ¥æ¦‚è¦
- æ–‡ä»¶æ•°é‡ï¼šXä¸ª
- ä»£ç è¡Œæ•°ï¼šYè¡Œ
- å‘ç°é—®é¢˜ï¼šZä¸ªï¼ˆğŸ”´ä¸¥é‡ Aä¸ª / ğŸŸ¡ä¸­ç­‰ Bä¸ª / ğŸŸ¢è½»å¾® Cä¸ªï¼‰

## é—®é¢˜è¯¦æƒ…

### ğŸ”´ ä¸¥é‡é—®é¢˜ï¼ˆå¿…é¡»ä¿®å¤ï¼‰

#### é—®é¢˜1ï¼šSQLæ³¨å…¥é£é™©
**ä½ç½®**ï¼š`user_service.py:45`
**ä»£ç **ï¼š
```python
query = f"SELECT * FROM users WHERE id = {user_id}"  # âŒ
```
**é£é™©**ï¼šæ”»å‡»è€…å¯æ„é€ æ¶æ„user_idæ‰§è¡Œä»»æ„SQL
**ä¿®å¤å»ºè®®**ï¼š
```python
query = "SELECT * FROM users WHERE id = ?"
cursor.execute(query, (user_id,))  # âœ…
```

### ğŸŸ¡ ä¸­ç­‰é—®é¢˜ï¼ˆå»ºè®®ä¿®å¤ï¼‰

#### é—®é¢˜2ï¼šæ€§èƒ½é—®é¢˜ - N+1æŸ¥è¯¢
**ä½ç½®**ï¼š`order_controller.py:78-82`
**ä»£ç **ï¼š
```python
for order in orders:
    order.user = User.query.get(order.user_id)  # âŒ æ¯æ¬¡éƒ½æŸ¥åº“
```
**å½±å“**ï¼š100ä¸ªè®¢å•ä¼šäº§ç”Ÿ101æ¬¡æ•°æ®åº“æŸ¥è¯¢
**ä¿®å¤å»ºè®®**ï¼š
```python
user_ids = [o.user_id for o in orders]
users = User.query.filter(User.id.in_(user_ids)).all()  # âœ… ä¸€æ¬¡æŸ¥è¯¢
```

### ğŸŸ¢ è½»å¾®é—®é¢˜ï¼ˆå¯é€‰ä¼˜åŒ–ï¼‰

[...]

## ç»Ÿè®¡æ•°æ®
- å¹³å‡å‡½æ•°é•¿åº¦ï¼š35è¡Œ âœ…
- æœ€å¤§åµŒå¥—æ·±åº¦ï¼š4å±‚ âš ï¸ (å»ºè®®â‰¤3)
- ä»£ç å¤æ‚åº¦ï¼šä¸­ç­‰
- æµ‹è¯•è¦†ç›–ç‡ï¼š[å¦‚å¯è·å–]

## æ”¹è¿›å»ºè®®
1. ã€é«˜ä¼˜å…ˆçº§ã€‘ä¿®å¤æ‰€æœ‰ğŸ”´ä¸¥é‡é—®é¢˜
2. ã€ä¸­ä¼˜å…ˆçº§ã€‘ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
3. ã€ä½ä¼˜å…ˆçº§ã€‘æ·»åŠ å•å…ƒæµ‹è¯•è¦†ç›–è¾¹ç•Œæƒ…å†µ
```

### æ­¥éª¤4ï¼šäº¤äº’å¼ä¿®å¤ï¼ˆå¯é€‰ï¼‰
è¯¢é—®ç”¨æˆ·ï¼š"æ˜¯å¦éœ€è¦æˆ‘å¸®ä½ ä¿®å¤è¿™äº›é—®é¢˜ï¼Ÿ"
- å¦‚æœæ˜¯ï¼šé€ä¸ªé—®é¢˜ç”Ÿæˆä¿®å¤ä»£ç 
- å¦‚æœå¦ï¼šç»“æŸå®¡æŸ¥

## é…ç½®é€‰é¡¹
å¯é€šè¿‡æ–‡ä»¶ `.code-review-config.json` è‡ªå®šä¹‰è§„åˆ™ï¼š
```json
{
  "max_function_length": 50,
  "max_nesting_depth": 3,
  "enforce_type_hints": true,
  "severity_levels": {
    "security": "critical",
    "performance": "warning",
    "style": "info"
  }
}
```
```

**ä½¿ç”¨æ–¹å¼**ï¼š

```bash
# 1. åˆ›å»ºSkillæ–‡ä»¶å¹¶é…ç½®
# 2. åœ¨AIåº”ç”¨ä¸­å¯¼å…¥æ­¤Skill
# 3. å¯¹è¯æ—¶AIä¼šè‡ªåŠ¨è¯†åˆ«å¹¶ä½¿ç”¨

ç”¨æˆ·ï¼š"å¸®æˆ‘å®¡æŸ¥ä¸€ä¸‹ user_service.py"
AIï¼š[è‡ªåŠ¨åŠ è½½code-review skill] â†’ [æ‰§è¡Œå®¡æŸ¥æµç¨‹] â†’ [ç”ŸæˆæŠ¥å‘Š]
```

---

<a name="chapter6"></a>
## å…­ã€å››è€…ååŒï¼šæ„å»ºå®Œæ•´AI Agentç”Ÿæ€

### 6.1 æ¶æ„å…¨æ™¯å›¾

```plaintext
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   ç”¨æˆ·è¯·æ±‚   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â†“
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚          AI Agent             â”‚
           â”‚  (è§„åˆ’ + å†³ç­– + æ‰§è¡Œ)         â”‚
           â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚        â”‚        â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”˜        â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â†“                â†“                  â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Skills â”‚      â”‚   MCP    â”‚      â”‚  Rules   â”‚
  â”‚æŒ‰éœ€åŠ è½½â”‚      â”‚å·¥å…·è°ƒç”¨  â”‚      â”‚è¾“å‡ºçº¦æŸ  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“                â†“                  â†“
  ä¸“ä¸šå·¥ä½œæµ        å¤–éƒ¨èƒ½åŠ›            è´¨é‡ä¿è¯
```

### 6.2 ååŒå·¥ä½œæµç¨‹

**å®Œæ•´æ¡ˆä¾‹ï¼šAIé©±åŠ¨çš„ä»£ç è´¨é‡æ£€æŸ¥ç³»ç»Ÿ**

```plaintext
ã€åœºæ™¯ã€‘ç”¨æˆ·ï¼š"å¸®æˆ‘æ£€æŸ¥è¿™ä¸ªé¡¹ç›®çš„ä»£ç è´¨é‡å¹¶ç”ŸæˆæŠ¥å‘Š"

ã€æ­¥éª¤1ã€‘Agentåˆ†æä»»åŠ¡
è¾“å…¥ï¼šç”¨æˆ·è¯·æ±‚ + å½“å‰ä¸Šä¸‹æ–‡
å¤„ç†ï¼šè¯†åˆ«éœ€è¦ "code-review" Skill
è¾“å‡ºï¼šåŠ è½½Skillåˆ°ä¸Šä¸‹æ–‡

ã€æ­¥éª¤2ã€‘Skillå¼•å¯¼æ‰§è¡Œ
Skillå†…å®¹ï¼š"è¯¢é—®ç”¨æˆ·é¡¹ç›®è·¯å¾„å’Œç¼–ç¨‹è¯­è¨€"
Agentï¼š"è¯·æä¾›é¡¹ç›®è·¯å¾„å’Œä¸»è¦ç¼–ç¨‹è¯­è¨€"
ç”¨æˆ·ï¼š"/path/to/project, Python"

ã€æ­¥éª¤3ã€‘è°ƒç”¨MCPå·¥å…·
Skillè¦æ±‚ï¼š"ä½¿ç”¨ read_file å’Œ grep_search æ‰«æä»£ç "
Agenté€šè¿‡MCPè°ƒç”¨ï¼š
  - filesystem.list_files("/path/to/project")
  - filesystem.read_file("xxx.py")
  - grep.search_pattern("eval\(", recursive=True)  # æœç´¢å±é™©å‡½æ•°

ã€æ­¥éª¤4ã€‘åº”ç”¨Rulesçº¦æŸ
Rulesè¦æ±‚ï¼š"æŠ¥å‘Šå¿…é¡»åŒ…å«ä¸¥é‡/ä¸­ç­‰/è½»å¾®ä¸‰çº§åˆ†ç±»"
Agentç”ŸæˆæŠ¥å‘Šæ—¶è‡ªåŠ¨éµå¾ªæ­¤æ ¼å¼

ã€æ­¥éª¤5ã€‘è¿”å›ç»“æœ
è¾“å‡ºï¼šç¬¦åˆRulesè§„èŒƒçš„ä¸“ä¸šå®¡æŸ¥æŠ¥å‘Š
```

### 6.3 å››è€…çš„è¾¹ç•Œä¸åˆ†å·¥

#### Agentï¼šå¤§è„‘ï¼ˆå†³ç­–ä¸­æ¢ï¼‰

```python
class Agent:
    def process_request(self, user_input):
        # 1. ç†è§£æ„å›¾
        intent = self.llm.analyze(user_input)
        
        # 2. å†³ç­–ï¼šæ˜¯å¦éœ€è¦Skillï¼Ÿ
        if self.need_skill(intent):
            skill = self.load_skill(intent)  # åŠ¨æ€åŠ è½½
            plan = skill.get_workflow()
        else:
            plan = self.llm.plan(intent)
        
        # 3. æ‰§è¡Œè®¡åˆ’
        for step in plan:
            if step.requires_tool():
                result = self.mcp_client.call(step.tool)  # é€šè¿‡MCPè°ƒç”¨
            else:
                result = self.llm.generate(step.prompt)
            
            # 4. åº”ç”¨Rules
            result = self.apply_rules(result)
            
        return result
```

**èŒè´£**ï¼š
- âœ… ç†è§£ç”¨æˆ·æ„å›¾
- âœ… é€‰æ‹©åˆé€‚çš„Skill/å·¥å…·
- âœ… è§„åˆ’æ‰§è¡Œæµç¨‹
- âœ… å¤„ç†å¼‚å¸¸æƒ…å†µ
- âŒ ä¸åŒ…å«å…·ä½“å·¥ä½œæµï¼ˆç”±Skillæä¾›ï¼‰
- âŒ ä¸ç›´æ¥è°ƒç”¨APIï¼ˆé€šè¿‡MCPï¼‰

#### MCPï¼šæ‰‹è‡‚ï¼ˆæ‰§è¡Œå·¥å…·ï¼‰

```python
class MCPServer:
    def register_tool(self, name, handler):
        """æ³¨å†Œä¸€ä¸ªå·¥å…·"""
        self.tools[name] = {
            "handler": handler,
            "schema": extract_schema(handler)
        }
    
    def execute(self, tool_name, params):
        """æ‰§è¡Œå·¥å…·è°ƒç”¨"""
        return self.tools[tool_name]["handler"](**params)
```

**èŒè´£**ï¼š
- âœ… æä¾›æ ‡å‡†åŒ–å·¥å…·æ¥å£
- âœ… æ‰§è¡Œå®é™…æ“ä½œï¼ˆè¯»æ–‡ä»¶/è°ƒAPI/æŸ¥æ•°æ®åº“ï¼‰
- âœ… è¿”å›ç»“æ„åŒ–ç»“æœ
- âŒ ä¸å†³ç­–ä½•æ—¶è°ƒç”¨ï¼ˆç”±Agentå†³å®šï¼‰
- âŒ ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼ˆåªæä¾›åŸå­èƒ½åŠ›ï¼‰

#### Skillsï¼šå¤§è„‘çš®å±‚ï¼ˆä¸“ä¸šçŸ¥è¯†ï¼‰

```markdown
# Skill = ç»“æ„åŒ–çš„å·¥ä½œæµ + æœ€ä½³å®è·µ

## åŒ…å«å†…å®¹
1. æ‰§è¡Œæ­¥éª¤ï¼ˆå…ˆåšä»€ä¹ˆã€ååšä»€ä¹ˆï¼‰
2. å†³ç­–æ ‘ï¼ˆé‡åˆ°Xæƒ…å†µè¯¥å¦‚ä½•å¤„ç†ï¼‰
3. ç¤ºä¾‹æ¨¡æ¿ï¼ˆè¾“å‡ºåº”è¯¥é•¿ä»€ä¹ˆæ ·ï¼‰
4. æ³¨æ„äº‹é¡¹ï¼ˆå®¹æ˜“çŠ¯çš„é”™è¯¯ï¼‰
```

**èŒè´£**ï¼š
- âœ… å®šä¹‰é¢†åŸŸä¸“ä¸šæµç¨‹
- âœ… æä¾›æ‰§è¡Œæ¨¡æ¿
- âœ… åŒ…å«æœ€ä½³å®è·µ
- âŒ ä¸ç›´æ¥æ‰§è¡Œï¼ˆç”±AgentæŒ‰SkillæŒ‡å¼•æ‰§è¡Œï¼‰
- âŒ ä¸åŒ…å«å…·ä½“å·¥å…·å®ç°ï¼ˆè°ƒç”¨MCPï¼‰

#### Rulesï¼šå®ˆé—¨å‘˜ï¼ˆè´¨é‡æŠŠå…³ï¼‰

```python
class RulesEngine:
    def validate(self, content, rules):
        """éªŒè¯å†…å®¹æ˜¯å¦ç¬¦åˆè§„åˆ™"""
        for rule in rules:
            if rule.type == "must_contain":
                assert rule.pattern in content
            elif rule.type == "must_not_contain":
                assert rule.pattern not in content
            elif rule.type == "format":
                assert self.check_format(content, rule.schema)
        return True
```

**èŒè´£**ï¼š
- âœ… çº¦æŸè¾“å‡ºæ ¼å¼
- âœ… ä¿è¯è§„èŒƒéµå®ˆ
- âœ… ç»Ÿä¸€å›¢é˜Ÿæ ‡å‡†
- âŒ ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
- âŒ ä¸å½±å“æ‰§è¡Œæµç¨‹ï¼ˆåªå½±å“è¾“å‡ºï¼‰

### 6.4 å®æˆ˜æ¡ˆä¾‹ï¼šè‡ªåŠ¨åŒ–å†…å®¹åˆ›ä½œç³»ç»Ÿ

**åœºæ™¯**ï¼šæ¯å¤©ç›‘æ§æŠ€æœ¯çƒ­ç‚¹ï¼Œè‡ªåŠ¨ç”Ÿæˆé«˜è´¨é‡æŠ€æœ¯æ–‡ç« 

#### ç³»ç»Ÿæ¶æ„

```json
{
  "agent": {
    "name": "AIContentFlow",
    "model": "deepseek-v3.1",
    "system_prompt": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æŠ€æœ¯å†…å®¹åˆ›ä½œAI..."
  },
  
  "mcp_servers": [
    {
      "name": "brave_search",
      "url": "http://localhost:8080/search",
      "tools": ["web_search", "news_search"]
    },
    {
      "name": "github",
      "url": "http://localhost:8080/github",
      "tools": ["search_repos", "get_trending"]
    }
  ],
  
  "skills": [
    {
      "name": "hot-topic-monitor",
      "description": "ç›‘æ§æŠ€æœ¯çƒ­ç‚¹å¹¶ç”Ÿæˆé€‰é¢˜"
    },
    {
      "name": "deep-research",
      "description": "æ·±åº¦è°ƒç ”å¹¶æ•´ç†å‚è€ƒèµ„æ–™"
    },
    {
      "name": "eight-stage-writing",
      "description": "å…«æ®µå¼ä¸“ä¸šå†…å®¹åˆ›ä½œæµç¨‹"
    }
  ],
  
  "rules": [
    {
      "name": "writing-standards",
      "content": "æŠ€æœ¯åšå®¢å†™ä½œè§„èŒƒï¼ˆé™AIå‘³ã€3000-8000å­—ã€ä¸‰éå®¡æ ¡ï¼‰"
    },
    {
      "name": "seo-optimization",
      "content": "SEOä¼˜åŒ–è¦æ±‚ï¼ˆå…³é”®è¯å¯†åº¦ã€æ ‡é¢˜å±‚çº§ï¼‰"
    }
  ]
}
```

#### æ‰§è¡Œæµç¨‹

```plaintext
ã€ç¬¬1æ­¥ã€‘å®šæ—¶è§¦å‘ï¼ˆæ¯å¤©07:00ï¼‰
Cron â†’ Agent.execute("æ‰§è¡Œçƒ­ç‚¹ç›‘æ§ä»»åŠ¡")

ã€ç¬¬2æ­¥ã€‘åŠ è½½Skill
Agentè¯†åˆ«éœ€è¦ "hot-topic-monitor" Skill
â†’ åŠ è½½Skillå·¥ä½œæµï¼š
  1. è°ƒç”¨brave_searchæœç´¢HackerNewsçƒ­ç‚¹
  2. è°ƒç”¨github.get_trendingè·å–çƒ­é—¨é¡¹ç›®
  3. æå–Top 5é€‰é¢˜
  4. ä½¿ç”¨notifyæ¨é€ç»™ç”¨æˆ·

ã€ç¬¬3æ­¥ã€‘ç”¨æˆ·é€‰æ‹©é€‰é¢˜
ç”¨æˆ·å›å¤ï¼š"2"ï¼ˆé€‰æ‹©ç¬¬2ä¸ªé€‰é¢˜ï¼‰

ã€ç¬¬4æ­¥ã€‘åŠ è½½åˆ›ä½œSkill
AgentåŠ è½½ "eight-stage-writing" Skill
â†’ å·¥ä½œæµï¼š
  é˜¶æ®µ1ï¼šç¡®è®¤é€‰é¢˜å’Œç›®æ ‡è¯»è€…
  é˜¶æ®µ2ï¼šæ·±åº¦è°ƒç ”ï¼ˆè°ƒç”¨MCPå·¥å…·æœç´¢15+ä¿¡æ¯æºï¼‰
  é˜¶æ®µ3ï¼šå†…å®¹åˆ›ä½œï¼ˆæŒ‰Rulesè¦æ±‚ç”Ÿæˆ6000å­—æ–‡ç« ï¼‰
  é˜¶æ®µ4ï¼šä¸‰éå®¡æ ¡ï¼ˆäº‹å®æ ¸æŸ¥+é™AIå‘³+æ’ç‰ˆï¼‰
  é˜¶æ®µ5ï¼šæ‹Ÿå®š20ä¸ªæ ‡é¢˜æ–¹æ¡ˆ
  é˜¶æ®µ6ï¼šæœ€ç»ˆå®¡é˜…
  é˜¶æ®µ7ï¼šä¿å­˜è‰ç¨¿
  é˜¶æ®µ8ï¼šç”Ÿæˆå‘å¸ƒæ¨å¹¿è®¡åˆ’

ã€ç¬¬5æ­¥ã€‘åº”ç”¨Rulesçº¦æŸ
åœ¨æ¯ä¸ªç”Ÿæˆç¯èŠ‚åº”ç”¨ writing-standards Rulesï¼š
- å­—æ•°æ§åˆ¶ï¼š6000-8000å­— âœ…
- é™AIå‘³ï¼šé¿å…"ä¼—æ‰€å‘¨çŸ¥"ç­‰è¡¨è¾¾ âœ…
- æ ¼å¼è§„èŒƒï¼šä»£ç å—æ ‡æ³¨è¯­è¨€ âœ…
- SEOä¼˜åŒ–ï¼šåˆç†åˆ†å¸ƒå…³é”®è¯ âœ…

ã€ç¬¬6æ­¥ã€‘è¾“å‡ºæˆæœ
â†’ ç”Ÿæˆç¬¦åˆè§„èŒƒçš„ä¸“ä¸šæ–‡ç« 
â†’ æ¨é€å®Œæˆé€šçŸ¥
```

### 6.5 ä¸ºä»€ä¹ˆè¿™å¥—æ¶æ„å¦‚æ­¤å¼ºå¤§ï¼Ÿ

#### ä¼˜åŠ¿1ï¼šæ¨¡å—åŒ–ï¼ˆModularityï¼‰

```plaintext
ä¼ ç»Ÿæ–¹å¼ï¼š
ä¸€ä¸ªè¶…å¤§PromptåŒ…å«æ‰€æœ‰èƒ½åŠ› â†’ éš¾ä»¥ç»´æŠ¤ã€å®¹æ˜“å†²çª

æ–°æ¶æ„ï¼š
Agentï¼ˆæ ¸å¿ƒï¼‰ + MCPï¼ˆå·¥å…·é›†ï¼‰ + Skillsï¼ˆå·¥ä½œæµï¼‰ + Rulesï¼ˆè§„èŒƒï¼‰
â†’ æ¯éƒ¨åˆ†ç‹¬ç«‹è¿­ä»£ã€äº’ä¸å¹²æ‰°
```

#### ä¼˜åŠ¿2ï¼šå¯æ‰©å±•æ€§ï¼ˆScalabilityï¼‰

```plaintext
æ–°å¢èƒ½åŠ›æ—¶ï¼š
- æ–°å·¥å…·ï¼Ÿ â†’ å¼€å‘MCP Serverï¼ˆä¸€æ¬¡å¼€å‘ï¼Œå¤„å¤„å¯ç”¨ï¼‰
- æ–°æµç¨‹ï¼Ÿ â†’ ç¼–å†™Skillï¼ˆçº¯æ–‡æœ¬ï¼Œæ— éœ€ä»£ç ï¼‰
- æ–°è§„èŒƒï¼Ÿ â†’ æ·»åŠ Ruleï¼ˆå³æ—¶ç”Ÿæ•ˆï¼‰
- æ— éœ€ä¿®æ”¹Agentæ ¸å¿ƒä»£ç  âœ…
```

#### ä¼˜åŠ¿3ï¼šå›¢é˜Ÿåä½œï¼ˆCollaborationï¼‰

```plaintext
è§’è‰²åˆ†å·¥ï¼š
- AIå·¥ç¨‹å¸ˆï¼šå¼€å‘Agentæ ¸å¿ƒå’ŒMCP Server
- é¢†åŸŸä¸“å®¶ï¼šç¼–å†™Skillsï¼ˆå¦‚"åŒ»ç–—è¯Šæ–­æµç¨‹"ï¼‰
- è´¨é‡å›¢é˜Ÿï¼šç»´æŠ¤Rulesï¼ˆå¦‚"åˆè§„å®¡æŸ¥æ ‡å‡†"ï¼‰
- å„å¸å…¶èŒï¼Œå¹¶è¡Œå¼€å‘ âœ…
```

#### ä¼˜åŠ¿4ï¼šè´¨é‡å¯æ§ï¼ˆQuality Controlï¼‰

```plaintext
ä¼ ç»ŸAIï¼š
è¾“å‡ºè´¨é‡ = å®Œå…¨ä¾èµ–æ¨¡å‹èƒ½åŠ› âŒ

æ–°æ¶æ„ï¼š
è¾“å‡ºè´¨é‡ = æ¨¡å‹èƒ½åŠ› Ã— Skillä¸“ä¸šæ€§ Ã— Rulesçº¦æŸ
â†’ ä¸‰é‡ä¿éšœ âœ…
```

---

<a name="chapter7"></a>
## ä¸ƒã€å®æˆ˜æŒ‡å—ï¼šä»é›¶æ­å»ºä½ çš„ç¬¬ä¸€ä¸ªAgentç³»ç»Ÿ

### 7.1 åœºæ™¯é€‰æ‹©

**é€‚åˆå…¥é—¨çš„åœºæ™¯**ï¼š

| åœºæ™¯ | éš¾åº¦ | æ‰€éœ€æ—¶é—´ | æ ¸å¿ƒæ”¶ç›Š |
|------|------|---------|---------|
| æ–‡æ¡£åŠ©æ‰‹ | â­ | 2å°æ—¶ | ç†è§£MCPåŸºç¡€ |
| ä»£ç å®¡æŸ¥ | â­â­ | 4å°æ—¶ | å­¦ä¼šSkillç¼–å†™ |
| å†…å®¹åˆ›ä½œ | â­â­â­ | 1å¤© | å®Œæ•´å·¥ä½œæµå®è·µ |
| å®¢æœç³»ç»Ÿ | â­â­â­â­ | 3å¤© | ç”Ÿäº§ç¯å¢ƒéƒ¨ç½² |

**æœ¬èŠ‚ä»¥"æ–‡æ¡£åŠ©æ‰‹"ä¸ºä¾‹**

### 7.2 éœ€æ±‚åˆ†æ

**ç›®æ ‡**ï¼š
åˆ›å»ºä¸€ä¸ªAIåŠ©æ‰‹ï¼Œèƒ½å¤Ÿï¼š
1. é˜…è¯»æœ¬åœ°æ–‡æ¡£ï¼ˆMarkdown/PDFï¼‰
2. å›ç­”å…³äºæ–‡æ¡£çš„é—®é¢˜
3. ç”Ÿæˆæ–‡æ¡£æ‘˜è¦
4. æŒ‰å…¬å¸æ¨¡æ¿æ ¼å¼åŒ–è¾“å‡º


**æ‹†è§£ä¸ºå››ä¸ªç»„ä»¶**ï¼š

```plaintext
Agentï¼šæ–‡æ¡£åŠ©æ‰‹æ ¸å¿ƒ
  â†“
MCPï¼šfilesystemå·¥å…·ï¼ˆè¯»å–æ–‡ä»¶ï¼‰
  â†“
Skillï¼šæ–‡æ¡£åˆ†æå·¥ä½œæµ
  â†“
Rulesï¼šæ‘˜è¦æ ¼å¼è§„èŒƒ
```

### 7.3 æ­¥éª¤1ï¼šæ­å»ºMCP Server

**åˆ›å»º `filesystem_mcp.py`**ï¼š

```python
from mcp import Server, Tool
import os
from pathlib import Path

class FilesystemMCPServer(Server):
    def __init__(self, allowed_paths: list):
        super().__init__("filesystem")
        self.allowed_paths = [Path(p).resolve() for p in allowed_paths]
    
    def list_tools(self):
        return [
            Tool(
                name="read_file",
                description="è¯»å–æ–‡ä»¶å†…å®¹",
                input_schema={
                    "type": "object",
                    "properties": {
                        "path": {"type": "string", "description": "æ–‡ä»¶è·¯å¾„"}
                    },
                    "required": ["path"]
                }
            ),
            Tool(
                name="list_directory",
                description="åˆ—å‡ºç›®å½•å†…å®¹",
                input_schema={
                    "type": "object",
                    "properties": {
                        "path": {"type": "string"}
                    },
                    "required": ["path"]
                }
            )
        ]
    
    def call_tool(self, name: str, arguments: dict):
        file_path = Path(arguments["path"]).resolve()
        
        # å®‰å…¨æ£€æŸ¥ï¼šåªå…è®¸è®¿é—®æˆæƒç›®å½•
        if not any(file_path.is_relative_to(allowed) for allowed in self.allowed_paths):
            raise PermissionError(f"æ— æƒè®¿é—® {file_path}")
        
        if name == "read_file":
            if file_path.suffix == ".pdf":
                return self._read_pdf(file_path)
            else:
                return file_path.read_text(encoding="utf-8")
        
        elif name == "list_directory":
            return [str(p) for p in file_path.iterdir()]
    
    def _read_pdf(self, path):
        # ä½¿ç”¨PyPDF2æˆ–pdfplumberæå–æ–‡æœ¬
        import pdfplumber
        with pdfplumber.open(path) as pdf:
            return "\n\n".join(page.extract_text() for page in pdf.pages)

# å¯åŠ¨æœåŠ¡å™¨
if __name__ == "__main__":
    server = FilesystemMCPServer(allowed_paths=["/docs", "/workspace"])
    server.run(transport="sse", port=8080)  # SSEæ–¹å¼
```

**å¯åŠ¨MCP Server**ï¼š

```bash
python filesystem_mcp.py
# MCP Serverè¿è¡Œåœ¨ http://localhost:8080
```

### 7.4 æ­¥éª¤2ï¼šåˆ›å»ºSkill

**åˆ›å»º `document-analysis.skill/SKILL.md`**ï¼š

```markdown
---
name: document-analysis
description: åˆ†ææ–‡æ¡£å¹¶ç”Ÿæˆç»“æ„åŒ–æ‘˜è¦
allowed-tools: read_file list_directory
---

# æ–‡æ¡£åˆ†æSkill

## å·¥ä½œæµç¨‹

### é˜¶æ®µ1ï¼šå®šä½æ–‡æ¡£
è¯¢é—®ç”¨æˆ·ï¼š"è¯·æä¾›æ–‡æ¡£è·¯å¾„æˆ–å…³é”®è¯"

å¦‚æœç”¨æˆ·æä¾›å…³é”®è¯ï¼š
1. ä½¿ç”¨ list_directory åˆ—å‡ºå¯èƒ½çš„ç›®å½•
2. å±•ç¤ºå€™é€‰æ–‡æ¡£åˆ—è¡¨
3. è®©ç”¨æˆ·é€‰æ‹©

å¦‚æœç”¨æˆ·æä¾›è·¯å¾„ï¼š
1. ç›´æ¥è¿›å…¥é˜¶æ®µ2

### é˜¶æ®µ2ï¼šè¯»å–æ–‡æ¡£
ä½¿ç”¨ read_file å·¥å…·è¯»å–æ–‡æ¡£å†…å®¹

å¦‚æœæ–‡æ¡£>10000å­—ï¼š
- æç¤º"æ–‡æ¡£è¾ƒé•¿ï¼Œæ˜¯å¦éœ€è¦æˆ‘å…ˆç”Ÿæˆç« èŠ‚ç›®å½•ï¼Ÿ"

### é˜¶æ®µ3ï¼šåˆ†ææ–‡æ¡£
æ ¹æ®ç”¨æˆ·éœ€æ±‚æ‰§è¡Œï¼š
- **æ‘˜è¦**ï¼šæå–æ ¸å¿ƒè§‚ç‚¹ï¼ˆ300å­—ä»¥å†…ï¼‰
- **é—®ç­”**ï¼šåŸºäºæ–‡æ¡£å†…å®¹å›ç­”é—®é¢˜
- **æå–**ï¼šæŠ½å–å…³é”®ä¿¡æ¯ï¼ˆå¦‚æ‰€æœ‰APIæ¥å£ï¼‰

### é˜¶æ®µ4ï¼šç»“æ„åŒ–è¾“å‡º
æŒ‰ä»¥ä¸‹æ ¼å¼è¾“å‡ºï¼š

```markdown
# æ–‡æ¡£æ‘˜è¦ï¼š[æ–‡æ¡£æ ‡é¢˜]

## ğŸ“„ åŸºæœ¬ä¿¡æ¯
- æ–‡ä»¶åï¼šxxx
- å­—æ•°ï¼šxxx
- ä¸»é¢˜ï¼šxxx

## ğŸ¯ æ ¸å¿ƒå†…å®¹
[3-5ä¸ªè¦ç‚¹]

## ğŸ’¡ å…³é”®å‘ç°
[é‡è¦ä¿¡æ¯æå–]

## ğŸ”— ç›¸å…³æ–‡æ¡£
[å¦‚æœæ–‡æ¡£ä¸­æåˆ°å…¶ä»–æ–‡æ¡£]
```

## æ³¨æ„äº‹é¡¹
1. å¦‚æœæ–‡æ¡£æ˜¯ä»£ç ï¼Œè‡ªåŠ¨è¯†åˆ«ç¼–ç¨‹è¯­è¨€
2. å¦‚æœæ–‡æ¡£æ˜¯è¡¨æ ¼ï¼Œä¿ç•™è¡¨æ ¼æ ¼å¼
3. å¦‚æœè¯»å–å¤±è´¥ï¼Œæä¾›å‹å¥½é”™è¯¯æç¤º
```

**æ‰“åŒ…Skill**ï¼š

```bash
document-analysis.skill/
â””â”€â”€ SKILL.md

# å‹ç¼©
zip -r document-analysis.zip document-analysis.skill/
```

### 7.5 æ­¥éª¤3ï¼šç¼–å†™Rules

**åˆ›å»º `doc-summary-rules.md`**ï¼š

```markdown
# æ–‡æ¡£æ‘˜è¦Rules

## æ ¼å¼è¦æ±‚
1. å¿…é¡»åŒ…å«ï¼šåŸºæœ¬ä¿¡æ¯ + æ ¸å¿ƒå†…å®¹ + å…³é”®å‘ç°
2. æ ¸å¿ƒå†…å®¹ï¼š3-5ä¸ªè¦ç‚¹ï¼Œæ¯ä¸ªè¦ç‚¹ä¸è¶…è¿‡50å­—
3. ä½¿ç”¨emojiå¢å¼ºå¯è¯»æ€§ï¼ˆğŸ“„ ğŸ“Š ğŸ’¡ ğŸ”—ï¼‰

## è¯­è¨€é£æ ¼
- ä½¿ç”¨å®¢è§‚é™ˆè¿°ï¼Œé¿å…ä¸»è§‚è¯„ä»·
- ä¸“ä¸šæœ¯è¯­å¿…é¡»é™„å¸¦è§£é‡Š
- æ¯ä¸ªè¦ç‚¹ç‹¬ç«‹æˆå¥

## ç¦æ­¢è¡Œä¸º
âŒ ä¸è¦æ·»åŠ æ–‡æ¡£ä¸­æ²¡æœ‰çš„å†…å®¹
âŒ ä¸è¦ä½¿ç”¨"æ˜¾ç„¶"ã€"ä¼—æ‰€å‘¨çŸ¥"ç­‰è¡¨è¾¾
âŒ ä¸è¦é—æ¼å…³é”®æ•°æ®å’Œç»“è®º

## ç¤ºä¾‹

âœ… æ­£ç¡®ç¤ºä¾‹ï¼š
## ğŸ¯ æ ¸å¿ƒå†…å®¹
- APIæ”¯æŒRESTfulå’ŒGraphQLä¸¤ç§åè®®ï¼Œæ—¥å‡å¤„ç†è¯·æ±‚é‡1000ä¸‡æ¬¡
- é‰´æƒé‡‡ç”¨JWTä»¤ç‰Œæœºåˆ¶ï¼Œæœ‰æ•ˆæœŸ24å°æ—¶
- æ”¯æŒ5ç§ç¼–ç¨‹è¯­è¨€SDKï¼ˆPython/Java/Go/JavaScript/Rubyï¼‰

âŒ é”™è¯¯ç¤ºä¾‹ï¼š
## æ ¸å¿ƒå†…å®¹
- è¿™ä¸ªAPIå¾ˆå¼ºå¤§ï¼ŒåŠŸèƒ½å¾ˆå…¨é¢
- æ€§èƒ½éå¸¸å¥½
- ä½¿ç”¨å¾ˆæ–¹ä¾¿
```

### 7.6 æ­¥éª¤4ï¼šé…ç½®AI Agent

**Agenté…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "agent_name": "æ™ºèƒ½æ–‡æ¡£åŠ©æ‰‹",
  "model": "claude-3.5-sonnet",
  "system_prompt": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ–‡æ¡£åˆ†æåŠ©æ‰‹ï¼Œæ“…é•¿å¿«é€Ÿç†è§£å’Œæ€»ç»“æŠ€æœ¯æ–‡æ¡£ã€‚",
  
  "mcp_config": {
    "filesystem": {
      "command": "node",
      "args": ["/path/to/filesystem-server/index.js"],
      "env": {
        "ALLOWED_DIRS": "/docs"
      }
    }
  },
  
  "skills": ["document-analysis"],
  "rules": ["doc-summary-rules"]
}
```

### 7.7 æµ‹è¯•éªŒè¯

**æµ‹è¯•ç”¨ä¾‹1ï¼šåŸºæœ¬æ‘˜è¦**

```plaintext
ç”¨æˆ·ï¼š"å¸®æˆ‘æ€»ç»“ /docs/api-guide.md"

Agentæ‰§è¡Œæµç¨‹ï¼š
1. âœ… åŠ è½½ document-analysis Skill
2. âœ… è°ƒç”¨ read_file MCPå·¥å…·
3. âœ… åˆ†ææ–‡æ¡£å†…å®¹
4. âœ… åº”ç”¨ doc-summary-rules ç”Ÿæˆè§„èŒƒè¾“å‡º

è¾“å‡ºç¤ºä¾‹ï¼š
# æ–‡æ¡£æ‘˜è¦ï¼šAPIä½¿ç”¨æŒ‡å—

## ğŸ“„ åŸºæœ¬ä¿¡æ¯
- æ–‡ä»¶åï¼šapi-guide.md
- å­—æ•°ï¼š3500å­—
- ä¸»é¢˜ï¼šRESTful APIæ¥å£æ–‡æ¡£

## ğŸ¯ æ ¸å¿ƒå†…å®¹
- æä¾›ç”¨æˆ·ç®¡ç†ã€è®¢å•å¤„ç†ã€æ”¯ä»˜é›†æˆä¸‰å¤§æ¨¡å—API
- æ‰€æœ‰æ¥å£éœ€è¦åœ¨Headerä¸­æºå¸¦Authorizationä»¤ç‰Œ
- æ”¯æŒJSONå’ŒXMLä¸¤ç§æ•°æ®æ ¼å¼
- é™æµè§„åˆ™ï¼šæ¯IPæ¯åˆ†é’Ÿæœ€å¤š100æ¬¡è¯·æ±‚

## ğŸ’¡ å…³é”®å‘ç°
- æ•æ„Ÿæ“ä½œï¼ˆåˆ é™¤/ä¿®æ”¹ï¼‰éœ€è¦äºŒæ¬¡éªŒè¯
- Webhookå›è°ƒæ”¯æŒé‡è¯•æœºåˆ¶ï¼ˆæœ€å¤š3æ¬¡ï¼‰
- æä¾›æ²™ç›’ç¯å¢ƒç”¨äºæµ‹è¯•ï¼ˆsandbox.api.example.comï¼‰

## ğŸ”— ç›¸å…³æ–‡æ¡£
- é‰´æƒæœºåˆ¶è¯¦è§£ï¼š/docs/auth.md
- é”™è¯¯ç å¯¹ç…§è¡¨ï¼š/docs/error-codes.md
```

**æµ‹è¯•ç”¨ä¾‹2ï¼šé—®ç­”**

```plaintext
ç”¨æˆ·ï¼š"è¿™ä¸ªAPIæ”¯æŒå“ªäº›ç¼–ç¨‹è¯­è¨€ï¼Ÿ"

Agentï¼š[è¯»å–æ–‡æ¡£] â†’ [æå–ä¿¡æ¯] â†’ "æ”¯æŒ5ç§ç¼–ç¨‹è¯­è¨€SDK..."
```

### 7.8 éƒ¨ç½²ä¸Šçº¿

**é€‰æ‹©éƒ¨ç½²æ–¹å¼**ï¼š

```bash
# æ–¹å¼1ï¼šAPIè°ƒç”¨
curl -X POST https://knot.woa.com/api/v1/agents/{agent_id} \
  -H "x-knot-token: xxx" \
  -d '{"input": {"message": "æ€»ç»“è¿™ä¸ªæ–‡æ¡£"}}'

# æ–¹å¼2ï¼šåµŒå…¥ç½‘é¡µ
<div id="doc-assistant" data-agent-id="xxx"></div>

# æ–¹å¼3ï¼šä¼ä¸šå¾®ä¿¡
åœ¨ç¾¤èŠä¸­ @æ™ºèƒ½æ–‡æ¡£åŠ©æ‰‹ "æ€»ç»“xxxæ–‡æ¡£"
```

---

<a name="chapter8"></a>
## å…«ã€æœ€ä½³å®è·µä¸é¿å‘æŒ‡å—

### 8.1 Agentè®¾è®¡æœ€ä½³å®è·µ

#### å®è·µ1ï¼šæ¸…æ™°çš„System Prompt

```markdown
âŒ æ¨¡ç³Šçš„Promptï¼š
"ä½ æ˜¯ä¸€ä¸ªAIåŠ©æ‰‹"

âœ… æ˜ç¡®çš„Promptï¼š
"ä½ æ˜¯ä¸€ä¸ªä¸“æ³¨äºPythonä»£ç è´¨é‡æ£€æŸ¥çš„AIåŠ©æ‰‹ã€‚
ä½ çš„èŒè´£ï¼š
1. å®¡æŸ¥ä»£ç çš„å®‰å…¨æ€§ã€æ€§èƒ½ã€å¯ç»´æŠ¤æ€§
2. æä¾›å…·ä½“çš„æ”¹è¿›å»ºè®®å’Œä¿®å¤ä»£ç 
3. è§£é‡Šæ¯ä¸ªé—®é¢˜çš„æŠ€æœ¯åŸç†

ä½ çš„é™åˆ¶ï¼š
- ä¸ç¼–å†™å®Œæ•´é¡¹ç›®ï¼Œåªå®¡æŸ¥å’Œä¿®å¤
- ä¸è®¨è®ºä¸Pythonæ— å…³çš„è¯é¢˜
- é‡åˆ°ä¸ç¡®å®šçš„é—®é¢˜ï¼Œæ˜ç¡®å‘ŠçŸ¥è€ŒéçŒœæµ‹"
```

#### å®è·µ2ï¼šé”™è¯¯å¤„ç†

```python
class RobustAgent:
    def execute_with_retry(self, tool, params, max_retries=3):
        for attempt in range(max_retries):
            try:
                return self.mcp_client.call(tool, params)
            except TimeoutError:
                if attempt < max_retries - 1:
                    self.log(f"å·¥å…·è°ƒç”¨è¶…æ—¶ï¼Œé‡è¯• {attempt+1}/{max_retries}")
                    time.sleep(2 ** attempt)  # æŒ‡æ•°é€€é¿
                else:
                    return self.handle_tool_failure(tool)
            except PermissionError as e:
                # æƒé™é”™è¯¯ä¸é‡è¯•ï¼Œç›´æ¥è¿”å›å‹å¥½æç¤º
                return f"æŠ±æ­‰ï¼Œæˆ‘æ²¡æœ‰æƒé™æ‰§è¡Œæ­¤æ“ä½œï¼š{e}"
    
    def handle_tool_failure(self, tool):
        """å·¥å…·è°ƒç”¨å¤±è´¥æ—¶çš„é™çº§æ–¹æ¡ˆ"""
        return f"å·¥å…· {tool} æš‚æ—¶ä¸å¯ç”¨ï¼Œæˆ‘å°†å°è¯•ç”¨å…¶ä»–æ–¹å¼å®Œæˆä»»åŠ¡"
```

#### å®è·µ3ï¼šä¸Šä¸‹æ–‡ç®¡ç†

```python
class ContextAwareAgent:
    def __init__(self):
        self.context_window = 80000  # tokens
        self.reserved_for_output = 4000
        self.max_input_tokens = self.context_window - self.reserved_for_output
    
    def manage_context(self, conversation_history):
        """æ™ºèƒ½å‹ç¼©ä¸Šä¸‹æ–‡"""
        total_tokens = sum(count_tokens(msg) for msg in conversation_history)
        
        if total_tokens > self.max_input_tokens:
            # ç­–ç•¥1ï¼šä¿ç•™æœ€è¿‘çš„å¯¹è¯
            recent = conversation_history[-10:]
            
            # ç­–ç•¥2ï¼šæ€»ç»“æ—©æœŸå¯¹è¯
            early = conversation_history[:-10]
            summary = self.llm.summarize(early, max_tokens=500)
            
            return [summary] + recent
        
        return conversation_history
```

### 8.2 MCPå¼€å‘é¿å‘æŒ‡å—

#### é¿å‘1ï¼šTokenæ¶ˆè€—ä¼˜åŒ–

```python
âŒ è¿”å›è¿‡å¤šæ•°æ®ï¼š
def search_users(query):
    users = db.query(User).filter_by(name=query).all()
    return [user.to_dict() for user in users]  # å¯èƒ½è¿”å›100MBæ•°æ®

âœ… åˆ†é¡µ+å­—æ®µç­›é€‰ï¼š
def search_users(query, page=1, page_size=20, fields=None):
    users = db.query(User).filter_by(name=query).paginate(page, page_size)
    
    if fields:
        return [
            {k: getattr(u, k) for k in fields}
            for u in users.items
        ]
    
    return [{"id": u.id, "name": u.name} for u in users.items]
```

#### é¿å‘2ï¼šå®‰å…¨æ€§

```python
âœ… è¾“å…¥éªŒè¯ï¼š
def call_tool(self, name, arguments):
    # 1. éªŒè¯å·¥å…·å
    if name not in self.allowed_tools:
        raise ValueError(f"å·¥å…· {name} ä¸å­˜åœ¨")
    
    # 2. éªŒè¯å‚æ•°ç±»å‹
    schema = self.tools[name].input_schema
    validate_json(arguments, schema)
    
    # 3. æƒé™æ£€æŸ¥
    if not self.check_permission(name, self.current_user):
        raise PermissionError("æƒé™ä¸è¶³")
    
    # 4. å‚æ•°æ¸…ç†
    safe_args = sanitize_inputs(arguments)
    
    return self.tools[name].handler(**safe_args)
```

#### é¿å‘3ï¼šè¶…æ—¶æ§åˆ¶

```python
import signal
from contextlib import contextmanager

@contextmanager
def timeout(seconds):
    """å·¥å…·æ‰§è¡Œè¶…æ—¶æ§åˆ¶"""
    def timeout_handler(signum, frame):
        raise TimeoutError(f"æ“ä½œè¶…æ—¶ï¼ˆ{seconds}ç§’ï¼‰")
    
    signal.signal(signal.SIGALRM, timeout_handler)
    signal.alarm(seconds)
    try:
        yield
    finally:
        signal.alarm(0)

def call_tool_with_timeout(self, name, args, timeout_seconds=30):
    with timeout(timeout_seconds):
        return self.call_tool(name, args)
```

### 8.3 Skillsç¼–å†™æŠ€å·§

#### æŠ€å·§1ï¼šæ¨¡å—åŒ–æ­¥éª¤

```markdown
âŒ å†—é•¿çš„æµç¨‹ï¼š
## æ‰§è¡Œæ­¥éª¤
1. è¯»å–æ–‡ä»¶ï¼Œç„¶ååˆ†æå†…å®¹ï¼Œæ¥ç€ç”Ÿæˆæ‘˜è¦ï¼Œæœ€åæ ¼å¼åŒ–è¾“å‡º...
ï¼ˆä¸€ä¸ªæ­¥éª¤åŒ…å«å¤šä¸ªæ“ä½œï¼‰

âœ… æ¸…æ™°çš„æ­¥éª¤ï¼š
## æ‰§è¡Œæ­¥éª¤

### æ­¥éª¤1ï¼šè¯»å–æ–‡ä»¶
- å·¥å…·ï¼šread_file
- è¾“å…¥ï¼šæ–‡ä»¶è·¯å¾„
- è¾“å‡ºï¼šæ–‡ä»¶å†…å®¹

### æ­¥éª¤2ï¼šåˆ†æå†…å®¹
- æå–å…³é”®ä¿¡æ¯
- è¯†åˆ«æ–‡æ¡£ç±»å‹
- æ£€æµ‹è¯­è¨€

### æ­¥éª¤3ï¼šç”Ÿæˆæ‘˜è¦
- æŒ‰Rulesè§„èŒƒç»„ç»‡å†…å®¹
- åº”ç”¨è¾“å‡ºæ¨¡æ¿

### æ­¥éª¤4ï¼šè´¨é‡æ£€æŸ¥
- éªŒè¯å¿…å¡«å­—æ®µ
- æ£€æŸ¥æ ¼å¼è§„èŒƒ
```

#### æŠ€å·§2ï¼šå¼‚å¸¸åˆ†æ”¯å¤„ç†

```markdown
## å¼‚å¸¸å¤„ç†

### æƒ…å†µ1ï¼šæ–‡ä»¶ä¸å­˜åœ¨
**ç—‡çŠ¶**ï¼šread_fileè¿”å›é”™è¯¯
**å¤„ç†**ï¼š
1. æç¤ºç”¨æˆ·ï¼š"æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå¯èƒ½çš„åŸå› ï¼šè·¯å¾„é”™è¯¯/æ–‡ä»¶å·²åˆ é™¤"
2. è¯¢é—®ï¼š"æ˜¯å¦éœ€è¦æˆ‘åˆ—å‡ºè¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Ÿ"

### æƒ…å†µ2ï¼šæ–‡ä»¶è¿‡å¤§ï¼ˆ>10MBï¼‰
**ç—‡çŠ¶**ï¼šè¯»å–è¶…æ—¶
**å¤„ç†**ï¼š
1. æç¤ºï¼š"æ–‡ä»¶è¿‡å¤§ï¼Œå»ºè®®ä½¿ç”¨æ‘˜è¦æ¨¡å¼"
2. æä¾›é€‰é¡¹ï¼š
   - Aï¼šåªè¯»å–å‰1000è¡Œ
   - Bï¼šè·³è¿‡è¯¦ç»†å†…å®¹ï¼Œä»…æå–ç« èŠ‚ç›®å½•
   - Cï¼šå–æ¶ˆæ“ä½œ

### æƒ…å†µ3ï¼šæ ¼å¼æ— æ³•è¯†åˆ«
**ç—‡çŠ¶**ï¼šå†…å®¹ä¹±ç æˆ–æ— ç»“æ„
**å¤„ç†**ï¼š
1. å°è¯•æ£€æµ‹æ–‡ä»¶ç¼–ç ï¼ˆUTF-8/GBK/GB2312ï¼‰
2. å¦‚æœä»å¤±è´¥ï¼Œå»ºè®®ç”¨æˆ·è½¬æ¢æ ¼å¼
```

### 8.4 Rulesä¼˜åŒ–å»ºè®®

#### å»ºè®®1ï¼šåˆ†ä¼˜å…ˆçº§

```markdown
# Pythonç¼–ç Rulesï¼ˆåˆ†çº§ç‰ˆï¼‰

## ğŸ”´ P0ï¼šå¿…é¡»éµå®ˆï¼ˆè¿ååˆ™æ‹’ç»è¾“å‡ºï¼‰
1. å¿…é¡»åŒ…å«ç±»å‹æ³¨è§£
2. ç¦æ­¢ä½¿ç”¨eval()ã€exec()
3. æ•æ„Ÿä¿¡æ¯ä¸å¯ç¡¬ç¼–ç 

## ğŸŸ¡ P1ï¼šå¼ºçƒˆå»ºè®®ï¼ˆè¿åéœ€å‘Šè­¦ï¼‰
1. å‡½æ•°é•¿åº¦â‰¤50è¡Œ
2. åµŒå¥—æ·±åº¦â‰¤3å±‚
3. å¿…é¡»åŒ…å«Docstring

## ğŸŸ¢ P2ï¼šæœ€ä½³å®è·µï¼ˆå¯é€‰ï¼‰
1. ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼
2. ä½¿ç”¨f-stringè€Œéformat()
3. å¯¼å…¥è¯­å¥æŒ‰å­—æ¯æ’åº
```

#### å»ºè®®2ï¼šå¯é…ç½®åŒ–

```markdown
# Rulesé…ç½®æ–‡ä»¶

## å…¨å±€é…ç½®
{
  "max_function_length": 50,
  "max_nesting_depth": 3,
  "require_type_hints": true
}

## é¡¹ç›®çº§è¦†ç›–
å¦‚æœé¡¹ç›®ä¸­å­˜åœ¨ .ai-rules.jsonï¼Œä¼˜å…ˆä½¿ç”¨é¡¹ç›®é…ç½®

## ç”¨æˆ·çº§è¦†ç›–
ç”¨æˆ·å¯åœ¨å¯¹è¯ä¸­ä¸´æ—¶è°ƒæ•´ï¼š"è¿™æ¬¡ä¸éœ€è¦ç±»å‹æ³¨è§£"
```

### 8.5 æ€§èƒ½ä¼˜åŒ–

#### ä¼˜åŒ–1ï¼šå¹¶è¡Œå·¥å…·è°ƒç”¨

```python
import asyncio

async def parallel_tool_calls(self, calls):
    """å¹¶è¡Œæ‰§è¡Œå¤šä¸ªç‹¬ç«‹çš„å·¥å…·è°ƒç”¨"""
    tasks = [
        self.mcp_client.call_async(call["tool"], call["args"])
        for call in calls
    ]
    return await asyncio.gather(*tasks)

# ç¤ºä¾‹ï¼šåŒæ—¶æœç´¢å¤šä¸ªæ•°æ®æº
results = await self.parallel_tool_calls([
    {"tool": "github_search", "args": {"query": "ai-agent"}},
    {"tool": "arxiv_search", "args": {"query": "ai agent"}},
    {"tool": "news_search", "args": {"query": "AI Agent"}}
])
```

#### ä¼˜åŒ–2ï¼šç¼“å­˜æœºåˆ¶

```python
from functools import lru_cache
import hashlib

class CachedMCPClient:
    def __init__(self):
        self.cache = {}
    
    def call_with_cache(self, tool, args, ttl=3600):
        """å¸¦ç¼“å­˜çš„å·¥å…·è°ƒç”¨"""
        cache_key = hashlib.md5(
            f"{tool}:{json.dumps(args)}".encode()
        ).hexdigest()
        
        if cache_key in self.cache:
            cached_result, timestamp = self.cache[cache_key]
            if time.time() - timestamp < ttl:
                return cached_result
        
        result = self.mcp_client.call(tool, args)
        self.cache[cache_key] = (result, time.time())
        return result
```

#### ä¼˜åŒ–3ï¼šæµå¼è¾“å‡º

```python
def stream_response(self, prompt):
    """æµå¼è¿”å›ç»“æœï¼Œæå‡ç”¨æˆ·ä½“éªŒ"""
    for chunk in self.llm.stream(prompt):
        yield chunk
        # ç”¨æˆ·çœ‹åˆ°é€å­—è¾“å‡ºï¼Œæ„ŸçŸ¥é€Ÿåº¦æ›´å¿«

# å‰ç«¯å±•ç¤º
async def display_stream():
    async for chunk in agent.stream_response(user_input):
        print(chunk, end="", flush=True)
```

---

## ä¹ã€æ€»ç»“ä¸å±•æœ›

### 9.1 æ ¸å¿ƒè¦ç‚¹å›é¡¾

**å››å¤§ç»„ä»¶å…³ç³»å›¾**ï¼š

```plaintext
           ç”¨æˆ·éœ€æ±‚
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      Agent          â”‚  å†³ç­–å¤§è„‘
    â”‚   (æ€è€ƒ+è§„åˆ’)       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     â”‚
    â†“                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Skills â”‚          â”‚   MCP    â”‚
â”‚ å·¥ä½œæµ â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  å·¥å…·é›†  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“                     â†“
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Rules  â”‚  è´¨é‡ä¿è¯
         â”‚ è§„èŒƒ   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
           æœ€ç»ˆè¾“å‡º
```

**è®°ä½è¿™ä¸ªå…¬å¼**ï¼š

```plaintext
å¼ºå¤§çš„AIç³»ç»Ÿ = Agentï¼ˆå¤§è„‘ï¼‰ 
              Ã— MCPï¼ˆæ‰‹è„šï¼‰ 
              Ã— Skillsï¼ˆä¸“ä¸šçŸ¥è¯†ï¼‰ 
              Ã— Rulesï¼ˆè´¨é‡æ ‡å‡†ï¼‰
```

### 9.2 é€‚ç”¨åœºæ™¯æ€»ç»“

| åœºæ™¯ç±»å‹ | æ¨èç»„åˆ | å…¸å‹åº”ç”¨ |
|---------|---------|---------|
| **ç®€å•é—®ç­”** | Agent | ChatGPTå¼å¯¹è¯ |
| **éœ€è¦æŸ¥è¯¢æ•°æ®** | Agent + MCP | "æŸ¥è¯¢æ•°æ®åº“ä¸­çš„ç”¨æˆ·ä¿¡æ¯" |
| **ä¸“ä¸šé¢†åŸŸä»»åŠ¡** | Agent + MCP + Skills | "æ‰§è¡Œä»£ç å®¡æŸ¥" |
| **ä¼ä¸šç”Ÿäº§ç¯å¢ƒ** | Agent + MCP + Skills + Rules | "è‡ªåŠ¨åŒ–å®¢æœç³»ç»Ÿ" |

### 9.3 æŠ€æœ¯å‘å±•è¶‹åŠ¿

#### è¶‹åŠ¿1ï¼šå¤šAgentåä½œ

```plaintext
æœªæ¥æ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent A â”‚â”€â”€â”€â”€â–ºâ”‚ Agent B â”‚â”€â”€â”€â”€â–ºâ”‚ Agent C â”‚
â”‚ éœ€æ±‚åˆ†æâ”‚     â”‚ ä»£ç å®ç°â”‚     â”‚ æµ‹è¯•éªŒè¯â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“               â†“               â†“
    å…±äº«MCPå·¥å…·æ±  + ç»Ÿä¸€Rulesè§„èŒƒ
```

#### è¶‹åŠ¿2ï¼šè‡ªæˆ‘è¿›åŒ–çš„Agent

```python
class SelfImprovingAgent:
    def learn_from_feedback(self, task, feedback):
        """ä»ç”¨æˆ·åé¦ˆä¸­å­¦ä¹ """
        if feedback == "è¾“å‡ºæ ¼å¼ä¸å¯¹":
            # è‡ªåŠ¨è°ƒæ•´Rules
            self.rules.append(extract_format_rule(task))
        
        if feedback == "æµç¨‹å¤ªæ…¢":
            # ä¼˜åŒ–Skillæ‰§è¡Œé¡ºåº
            self.skills[task.skill].optimize()
```

#### è¶‹åŠ¿3ï¼šé¢†åŸŸç‰¹åŒ–

```plaintext
é€šç”¨Agent â†’ ä¸“ä¸šAgent

ä¾‹å¦‚ï¼š
- åŒ»ç–—è¯Šæ–­Agentï¼ˆæ¥å…¥åŒ»ç–—çŸ¥è¯†åº“MCPï¼‰
- æ³•å¾‹å’¨è¯¢Agentï¼ˆåŠ è½½æ³•å¾‹æ¡æ–‡Skillsï¼‰
- é‡‘èåˆ†æAgentï¼ˆåº”ç”¨ç›‘ç®¡åˆè§„Rulesï¼‰
```

### 9.4 å­¦ä¹ è·¯å¾„å»ºè®®

**åˆçº§ï¼ˆ1-2å‘¨ï¼‰**ï¼š
1. âœ… ç†è§£å››å¤§ç»„ä»¶çš„æ¦‚å¿µ
2. âœ… ä½¿ç”¨Claude Desktopæˆ–ç±»ä¼¼å¹³å°åˆ›å»ºç¬¬ä¸€ä¸ªAgent
3. âœ… ä½¿ç”¨ç°æˆçš„MCPå’ŒSkills

**ä¸­çº§ï¼ˆ1ä¸ªæœˆï¼‰**ï¼š
1. âœ… ç¼–å†™è‡ªå®šä¹‰Skills
2. âœ… å¼€å‘ç®€å•çš„MCP Server
3. âœ… åˆ¶å®šå›¢é˜Ÿä¸“ç”¨Rules

**é«˜çº§ï¼ˆ3ä¸ªæœˆï¼‰**ï¼š
1. âœ… è®¾è®¡å¤æ‚çš„å¤šAgentç³»ç»Ÿ
2. âœ… ä¼˜åŒ–MCPæ€§èƒ½å’Œå®‰å…¨æ€§
3. âœ… æ„å»ºé¢†åŸŸä¸“ç”¨AIå¹³å°

### 9.5 å»¶ä¼¸é˜…è¯»

**å®˜æ–¹æ–‡æ¡£**ï¼š
- Anthropic MCPè§„èŒƒï¼šhttps://modelcontextprotocol.io
- Claude Desktopä½¿ç”¨æŒ‡å—ï¼šhttps://claude.ai/desktop
- Agent Skillsæ ‡å‡†ï¼šhttps://agentskills.io

**å¼€æºé¡¹ç›®**ï¼š
- LangChainï¼šhttps://github.com/langchain-ai/langchain
- AutoGPTï¼šhttps://github.com/Significant-Gravitas/AutoGPT
- MCP Serversé›†åˆï¼šhttps://github.com/anthropics/mcp-servers

**ç¤¾åŒºèµ„æº**ï¼š
- MCPå¼€å‘è€…è®ºå›
- AI AgentæŠ€æœ¯å‘¨æŠ¥
- Discord/Slackå¼€å‘è€…ç¤¾åŒº

---

## ğŸ¯ è¡ŒåŠ¨å»ºè®®

è¯»å®Œæœ¬æ–‡åï¼Œå»ºè®®ä½ ï¼š

**ä»Šå¤©å°±åš**ï¼š
1. ä½¿ç”¨Claude Desktopæˆ–ç±»ä¼¼å¹³å°åˆ›å»ºç¬¬ä¸€ä¸ªAgent
2. å¯¼å…¥ä¸€ä¸ªç°æˆçš„Skillä½“éªŒæ•ˆæœ
3. ç¼–å†™ä¸€ä¸ªç®€å•çš„Ruleæµ‹è¯•çº¦æŸèƒ½åŠ›

**æœ¬å‘¨å®Œæˆ**ï¼š
1. å¼€å‘ä¸€ä¸ªè§£å†³å®é™…é—®é¢˜çš„MCP Server
2. ä¸ºå›¢é˜Ÿç¼–å†™ä¸“å±Skill
3. åˆ†äº«ç»™åŒäº‹ï¼Œæ”¶é›†åé¦ˆè¿­ä»£

**æŒç»­ä¼˜åŒ–**ï¼š
1. å…³æ³¨MCPç”Ÿæ€çš„æ–°å·¥å…·
2. æ€»ç»“æœ€ä½³å®è·µå½¢æˆçŸ¥è¯†åº“
3. å‚ä¸å¼€æºç¤¾åŒºè´¡çŒ®ä»£ç 

---

## âœï¸ ä½œè€…è¯´

è¿™å¥—æ¶æ„çš„ç¾å¦™ä¹‹å¤„åœ¨äº**åˆ†å±‚è§£è€¦**â€”â€”æ¯ä¸ªç»„ä»¶ä¸“æ³¨åšå¥½ä¸€ä»¶äº‹ï¼Œç»„åˆèµ·æ¥å´èƒ½å®ç°æ— é™å¯èƒ½ã€‚

å°±åƒä¹é«˜ç§¯æœ¨ï¼Œå•ä¸ªç§¯æœ¨ç®€å•ï¼Œä½†å¯ä»¥æ­å»ºå‡ºå¤æ‚çš„åŸå ¡ã€‚Agentã€MCPã€Rulesã€Skillsæ­£æ˜¯AIæ—¶ä»£çš„"ä¹é«˜ç§¯æœ¨"ï¼Œç­‰å¾…ä½ å»åˆ›é€ å±äºè‡ªå·±çš„æ™ºèƒ½ç³»ç»Ÿã€‚

**å¦‚æœè§‰å¾—æœ¬æ–‡æœ‰å¸®åŠ©ï¼Œæ¬¢è¿åˆ†äº«ç»™æ›´å¤šäººï¼** ğŸš€

---

**å…³é”®è¯**ï¼šAI Agent, Model Context Protocol, MCP, Skills, Rules, æ™ºèƒ½ä½“, å·¥ä½œæµè‡ªåŠ¨åŒ–, LLMåº”ç”¨å¼€å‘, Claude Desktop

**æœ¬æ–‡å­—æ•°**ï¼šçº¦8500å­—  
**é˜…è¯»æ—¶é•¿**ï¼šçº¦25åˆ†é’Ÿ  
**éš¾åº¦ç­‰çº§**ï¼šä¸­çº§  
**æ›´æ–°æ—¥æœŸ**ï¼š2026-02-25
